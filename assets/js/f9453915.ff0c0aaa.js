"use strict";(globalThis.webpackChunkblog=globalThis.webpackChunkblog||[]).push([[7467],{2669:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y});var o=r(6540),n=r(1656);r(8591);const s={testTensorColor:"testTensorColor_LQOr",referenceTensorColor:"referenceTensorColor_xtZ6",differenceTensorColor:"differenceTensorColor_XV79",testTensorText:"testTensorText_BrHP",referenceTensorText:"referenceTensorText_SApb",container:"container_AcWV",mainGrid:"mainGrid_n2wD",inputColumn:"inputColumn_hJkx",inputSection:"inputSection_C7Tt",header:"header_hSkD",workerStatus:"workerStatus_plMm",statusIndicator:"statusIndicator_eFtZ",ready:"ready_IrDx",loading:"loading_qQNw",pulse:"pulse_aZWe",exampleButtons:"exampleButtons_ODbm",exampleButton:"exampleButton_GPFI",tensorInput:"tensorInput_hXSv",analyzeButton:"analyzeButton_VfGY",errorMessage:"errorMessage_bMLK",logOutput:"logOutput_CW6x",logEntries:"logEntries_wist",logEntry:"logEntry_zWqD",info:"info_fYyA",warning:"warning_gskO",error:"error_NJer",debug:"debug_N8f2",message:"message_LnST",resultsColumn:"resultsColumn_eqno",propertiesCard:"propertiesCard_wW4j",copyButton:"copyButton_XJvZ",tablesGrid:"tablesGrid_WZtn",tableCell:"tableCell_NTy8",eigenvaluesCell:"eigenvaluesCell_tyIq",propertiesTable:"propertiesTable_sLOX",highlightRow:"highlightRow_oHbk",naCell:"naCell_A7Si",chartsSection:"chartsSection_Fym3",chartControls:"chartControls_Mycp",propertySelect:"propertySelect__phA",planeSelect:"planeSelect_rQZn",checkboxLabel:"checkboxLabel_ezkD",checkbox:"checkbox_oYj9",radioGroup:"radioGroup_PcH8",radioLabel:"radioLabel_ixtg",radio:"radio_DLz1",modeToggle:"modeToggle_igdJ",tensorNameInput:"tensorNameInput_j6od",tensorActions:"tensorActions_T1i2",saveButton:"saveButton_k5AZ",loadButton:"loadButton_a2QW",loadDropdown:"loadDropdown_DbjL",loadDropdownItem:"loadDropdownItem_ZLLk",tensorInfo:"tensorInfo_xNYb",tensorTimestamp:"tensorTimestamp_X0T6",deleteButton:"deleteButton_Brc7",polarChartsGrid:"polarChartsGrid_WEmc",sectionTitle:"sectionTitle_vlxf",chartLabel:"chartLabel_x0p6",surfaceChartContainer:"surfaceChartContainer_XRy4",directionalChartsGrid:"directionalChartsGrid_axvh",directionalChartContainer:"directionalChartContainer_Elam",chartsGrid:"chartsGrid_xZtP",chartContainer:"chartContainer_mWGr",rotationSection:"rotationSection_MHcq",rotationControls:"rotationControls_qelK",rotationRow:"rotationRow_PGfs",rotationLabel:"rotationLabel_nZVM",rotationInput:"rotationInput_uxD9",axisSelect:"axisSelect_XBAW",customAxisInputs:"customAxisInputs_RcVX",axisComponent:"axisComponent_fVDk",axisInput:"axisInput_YsT5",rotationButton:"rotationButton_EIIe",modalOverlay:"modalOverlay_LmMo",modal:"modal_VVAG",modalHeader:"modalHeader_ootp",closeButton:"closeButton_TH4u",modalContent:"modalContent_uk_A",modalFooter:"modalFooter_K2HL",dropZone:"dropZone_LuL7",dragActive:"dragActive_jouM",dropZoneContent:"dropZoneContent_ebcy",selectFilesButton:"selectFilesButton_gEDR",manualEntry:"manualEntry_yBZ3",addButton:"addButton_ghGJ",exampleSection:"exampleSection_n3Do",savedSection:"savedSection_aRSh",savedList:"savedList_nbxu",savedTensorButton:"savedTensorButton_u3FH",savedDate:"savedDate_zPgI",pendingSection:"pendingSection_scA0",pendingList:"pendingList_wbIi",pendingItem:"pendingItem_Zwzt",pendingInfo:"pendingInfo_UjkR",pendingSource:"pendingSource_PN2f",removePending:"removePending_gSAY",cancelButton:"cancelButton_qcIb",addAllButton:"addAllButton_mYv_",tensorList:"tensorList_wG9B",tensorItem:"tensorItem_LGCR",selected:"selected_yKdl","tensor-color-0":"tensor-color-0__HQC","tensor-color-1":"tensor-color-1_F_kz","tensor-color-2":"tensor-color-2_jdNp","tensor-color-3":"tensor-color-3_hNzB","tensor-color-4":"tensor-color-4_OCaz","tensor-color-5":"tensor-color-5_hsPK","tensor-color-6":"tensor-color-6_mLY7","tensor-color-7":"tensor-color-7_WhfL","tensor-color-8":"tensor-color-8_Pwut","tensor-color-9":"tensor-color-9_CiXQ",tensorColorIndicator:"tensorColorIndicator_p1ig",tensorCheckbox:"tensorCheckbox_ylCe",tensorName:"tensorName_YvH1",empty:"empty_lJIL",tensorStats:"tensorStats_VdhO",tensorActionButton:"tensorActionButton_WTcy",primary:"primary_x0qB",danger:"danger_aWyL",matrixComponentsTable:"matrixComponentsTable_dUnu",addTensorButton:"addTensorButton_Xa78",tensorSelectionSection:"tensorSelectionSection_KWfN",tensorSelector:"tensorSelector_nlCy"};function a(e){return{youngs:"Young's Modulus",linear_compressibility:"Linear Compressibility",shear:"Shear Modulus",poisson:"Poisson's Ratio"}[e]||e}function i(e){return{youngs:"GPa",linear_compressibility:"TPa\u207b\xb9",shear:"GPa",poisson:""}[e]||""}function l(e){const t=["#ff6600","#0066cc","#009900","#cc6600","#9900cc","#00cc99","#cc0099","#6600cc","#cc3300","#0099cc"];return getComputedStyle(document.documentElement).getPropertyValue(`--tensor-color-${e}`).trim()||t[e%t.length]}var c=r(5098),d=r(4848);const m=o.forwardRef((e,t)=>{const{data:r,multiTensorData:n,property:s,referenceData:m,comparisonMode:h=!1,showDifference:u=!1,testTensorName:x="Test Tensor",referenceTensorName:p="Reference Tensor",showShading:g=!0,showLegend:f=!0,showGridLines:y=!0}=e,j=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(j.current&&n&&n.length>0){const e=c.Ts(j.current),t="shear"===s||"poisson"===s,r=[];let o=[];n.forEach(e=>{o=[...o,...e.data.map(e=>e.value)],t&&(o=[...o,...e.data.map(e=>e.valueMin||0)])}),n.forEach(e=>{const o=l(e.colorIndex);t?(r.push({name:`${e.name} Max`,type:"line",data:e.data.map(e=>[e.angle,e.value]),smooth:!0,lineStyle:{width:2,color:o},...g?{areaStyle:{color:o,opacity:.2}}:{},itemStyle:{color:o},symbol:"none",animation:!1}),r.push({name:`${e.name} Min`,type:"line",data:e.data.map(e=>[e.angle,e.valueMin||0]),smooth:!0,lineStyle:{width:2,color:o,type:"dashed"},...g?{areaStyle:{color:o,opacity:.1}}:{},itemStyle:{color:o},symbol:"none",animation:!1})):r.push({name:e.name,type:"line",data:e.data.map(e=>[e.angle,e.value]),smooth:!0,lineStyle:{width:2,color:o},...g?{areaStyle:{color:o,opacity:.2}}:{},itemStyle:{color:o},symbol:"none",animation:!1})});const d={animation:!1,title:{show:!1},toolbox:{show:!0,orient:"vertical",left:"right",top:"top",feature:{saveAsImage:{show:!0,title:"Save as PNG",backgroundColor:"#ffffff",pixelRatio:2,excludeComponents:["toolbox"]}}},grid:{left:90,right:50,top:f&&n.length>1?80:60,bottom:80,borderWidth:0},tooltip:{trigger:"axis",formatter:e=>{let t=`Angle: ${e[0].data[0].toFixed(1)}\xb0<br/>`;return e.forEach(e=>{t+=`${e.seriesName}: ${e.data[1].toFixed(3)} ${i(s)}<br/>`}),t}},legend:{show:f&&n.length>1,top:10,textStyle:{color:"var(--ifm-color-emphasis-800)",fontSize:12}},xAxis:{type:"value",name:"Angle (degrees)",nameLocation:"center",nameGap:30,min:0,max:360,axisLabel:{formatter:"{value}\xb0",margin:15},splitLine:{show:y}},yAxis:{type:"value",name:`${a(s)} (${i(s)})`,nameLocation:"center",nameGap:60,nameRotate:90,min:Math.min(0,Math.min(...o)),axisLabel:{margin:15},splitLine:{show:y}},series:r};e.setOption(d);const m=()=>e.resize();return window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m),e.dispose()}}},[r,n,s,m,h,u,x,p,g,f,y]),(0,d.jsx)("div",{ref:j,style:{width:"100%",height:"100%",aspectRatio:"1/1"}})}),h=({property:e,plane:t,multiTensorData:r,showShading:n=!0,showLegend:s=!0,showGridLines:a=!0})=>{const m=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(!m.current)return;if(!r||0===r.length)return;!function(){const e=getComputedStyle(document.documentElement);e.getPropertyValue("--tensor-test-color").trim(),e.getPropertyValue("--tensor-reference-color").trim(),e.getPropertyValue("--tensor-difference-color").trim(),e.getPropertyValue("--tensor-matrix-diff-negative").trim(),e.getPropertyValue("--tensor-matrix-diff-zero").trim(),e.getPropertyValue("--tensor-matrix-diff-positive").trim(),e.getPropertyValue("--tensor-matrix-single-low").trim(),e.getPropertyValue("--tensor-matrix-single-mid").trim(),e.getPropertyValue("--tensor-matrix-single-high").trim()}();const o=c.Ts(m.current),d=r.map(e=>{const t=e.data.map(e=>{if(void 0!==e.x&&void 0!==e.y)return[e.x,e.y];const t=e.angleRad,r=e.value;let o,n;return o=r*Math.cos(t),n=r*Math.sin(t),[o,n]});return{...e,polarCoords:t}}),h=d.flatMap(e=>e.polarCoords.flat()),u=Math.max(...h.map(e=>Math.abs(e))),x=d.flatMap(e=>e.data.map(e=>e.value)),p=(Math.min(...x),Math.max(...x),(e=>{switch(e){case"xy":default:return{x:"X",y:"Y"};case"xz":return{x:"X",y:"Z"};case"yz":return{x:"Y",y:"Z"}}})(t)),g={animation:!1,title:{show:!1},toolbox:{show:!0,orient:"vertical",left:"right",top:"top",feature:{saveAsImage:{show:!0,title:"Save as PNG",backgroundColor:"#ffffff",pixelRatio:2,excludeComponents:["toolbox"]}}},tooltip:{trigger:"item",formatter:t=>{const[r,o]=t.data,n=Math.sqrt(r*r+o*o),s=180*Math.atan2(o,r)/Math.PI;return`${p.x}: ${r.toFixed(2)}<br/>${p.y}: ${o.toFixed(2)}<br/>Value: ${n.toFixed(3)} ${i(e)}<br/>Angle: ${s.toFixed(1)}\xb0`}},grid:{left:90,right:50,top:s&&r.length>1?80:60,bottom:80,borderWidth:0},xAxis:{type:"value",name:p.x,nameLocation:"center",nameGap:35,min:1.1*-u,max:1.1*u,axisLabel:{fontSize:10,formatter:e=>e.toFixed(0),margin:15},splitLine:{show:a}},yAxis:{type:"value",name:p.y,nameLocation:"center",nameGap:35,min:1.1*-u,max:1.1*u,axisLabel:{fontSize:10,formatter:e=>e.toFixed(0),margin:15},splitLine:{show:a}},series:(()=>{const t="shear"===e||"poisson"===e,r=[];return d.forEach((e,o)=>{const s=l(e.colorIndex);if(t){const t=e.data.map(e=>{const t=e.angleRad,r=e.value;return[r*Math.cos(t),r*Math.sin(t)]}),o=e.data.map(e=>{const t=e.angleRad,r=e.valueMin||e.value;return[r*Math.cos(t),r*Math.sin(t)]});r.push({name:`${e.name} (Max)`,type:"line",data:t,smooth:!1,lineStyle:{width:2,color:s,type:"solid"},...n?{areaStyle:{opacity:.3,color:s}}:{},symbol:"circle",symbolSize:3,itemStyle:{color:s},animation:!1,connectNulls:!0}),e.data.some(e=>void 0!==e.valueMin&&e.valueMin!==e.value)&&r.push({name:`${e.name} (Min)`,type:"line",data:o,smooth:!1,lineStyle:{width:2,color:s,type:"dashed"},symbol:"circle",symbolSize:2,itemStyle:{color:s},animation:!1,connectNulls:!0})}else r.push({name:e.name,type:"line",data:e.polarCoords,smooth:!1,lineStyle:{width:2,color:s,type:"solid"},...n?{areaStyle:{opacity:.3,color:s}}:{},symbol:"circle",symbolSize:3,itemStyle:{color:s},animation:!1,connectNulls:!0})}),r})(),legend:{show:s&&r.length>1,top:30,textStyle:{color:"var(--ifm-color-emphasis-800)",fontSize:12}},tooltip:{trigger:"item",formatter:t=>{const[r,o]=t.data,n=Math.sqrt(r*r+o*o),s=180*Math.atan2(o,r)/Math.PI;return`${p.x}: ${r.toFixed(2)}<br/>${p.y}: ${o.toFixed(2)}<br/>Value: ${n.toFixed(3)} ${i(e)}<br/>Angle: ${s.toFixed(1)}\xb0`}},grid:{left:"10%",right:"10%",top:"15%",bottom:"15%"}};o.setOption(g);const f=()=>o.resize();return window.addEventListener("resize",f),()=>{window.removeEventListener("resize",f),o.dispose()}},[e,t,r,n,s,a]),(0,d.jsx)("div",{ref:m,style:{width:"100%",height:"100%",aspectRatio:"1/1"}})},u=({multiSurfaceData:e,property:t,useScatter:r=!0,showLegend:n=!0})=>{const s=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(!s.current)return;if(!e||0===e.length)return;const o=c.Ts(s.current);let d=[];e.forEach(e=>{d=[...d,...e.data.surfaceData.flat()]}),d.sort((e,t)=>e-t);const m=Math.min(...d),h=Math.max(...d),u={animation:!1,title:{show:!1},toolbox:{show:!0,orient:"vertical",left:"right",top:"top",feature:{saveAsImage:{show:!0,title:"Save as PNG",backgroundColor:"#ffffff",pixelRatio:2,excludeComponents:["toolbox"]}}},tooltip:{trigger:"item",formatter:e=>{const r=e.value[3]||e.value[2];return`${a(t)}: ${r.toFixed(3)} ${i(t)}`}},visualMap:e.map((e,t)=>({show:!1,seriesIndex:t,dimension:3,min:m,max:h,inRange:{color:[l(e.colorIndex),l(e.colorIndex)]}})),xAxis3D:{type:"value",name:"X",nameTextStyle:{color:"var(--ifm-color-emphasis-800)"}},yAxis3D:{type:"value",name:"Y",nameTextStyle:{color:"var(--ifm-color-emphasis-800)"}},zAxis3D:{type:"value",name:"Z",nameTextStyle:{color:"var(--ifm-color-emphasis-800)"}},grid3D:{viewControl:{projection:"perspective"}},legend:{show:n&&e.length>1,data:e.map(e=>({name:e.name,itemStyle:{color:l(e.colorIndex)}})),textStyle:{color:"var(--ifm-color-emphasis-800)"}},series:e.map((e,t)=>{const o=l(e.colorIndex);console.log(`Tensor ${e.name} (index ${e.colorIndex}): color = ${o}`);const n=e.data,s=[];for(let r=0;r<n.numU;r++)for(let e=0;e<n.numV;e++){const t=r/(n.numU-1)*2*Math.PI,o=e/(n.numV-1)*Math.PI,a=n.surfaceData[r]&&n.surfaceData[r][e]?n.surfaceData[r][e]:0,i=a*Math.sin(o)*Math.cos(t),l=a*Math.sin(o)*Math.sin(t),c=a*Math.cos(o);s.push([i,l,c,a])}return r?{name:e.name,type:"scatter3D",data:s,symbolSize:2.5,itemStyle:{opacity:.8}}:{name:e.name,type:"surface",parametric:!0,shading:"lambert",wireframe:{show:!0,lineStyle:{color:"rgba(0,0,0,0.1)",width:.5}},itemStyle:{opacity:.8,color:o},parametricEquation:{u:{min:0,max:2*Math.PI,step:2*Math.PI/(n.numU-1)},v:{min:0,max:Math.PI,step:Math.PI/(n.numV-1)},x:function(e,t){const r=Math.round(e/(2*Math.PI)*(n.numU-1)),o=Math.round(t/Math.PI*(n.numV-1));return(n.surfaceData[r]&&n.surfaceData[r][o]?n.surfaceData[r][o]:0)*Math.sin(t)*Math.cos(e)},y:function(e,t){const r=Math.round(e/(2*Math.PI)*(n.numU-1)),o=Math.round(t/Math.PI*(n.numV-1));return(n.surfaceData[r]&&n.surfaceData[r][o]?n.surfaceData[r][o]:0)*Math.sin(t)*Math.sin(e)},z:function(e,t){const r=Math.round(e/(2*Math.PI)*(n.numU-1)),o=Math.round(t/Math.PI*(n.numV-1));return(n.surfaceData[r]&&n.surfaceData[r][o]?n.surfaceData[r][o]:0)*Math.cos(t)}}}})};o.setOption(u);const x=()=>o.resize();return window.addEventListener("resize",x),()=>{window.removeEventListener("resize",x),o.dispose()}},[e,t,r,n]),(0,d.jsx)("div",{ref:s,style:{width:"100%",height:"100%",minHeight:"400px"}})};function x(e,t){const r=e*Math.PI/180,[o,n,s]=function(e){const[t,r,o]=e,n=Math.sqrt(t*t+r*r+o*o);if(0===n)return[0,0,1];return[t/n,r/n,o/n]}(t),a=Math.cos(r),i=Math.sin(r),l=1-a;return[[a+o*o*l,o*n*l-s*i,o*s*l+n*i],[n*o*l+s*i,a+n*n*l,n*s*l-o*i],[s*o*l-n*i,s*n*l+o*i,a+s*s*l]]}function p(e,t){const r=function(e){const t=Array(3).fill(0).map(()=>Array(3).fill(0).map(()=>Array(3).fill(0).map(()=>Array(3).fill(0)))),r=[[0,0],[1,1],[2,2],[1,2],[0,2],[0,1]];for(let o=0;o<6;o++)for(let n=0;n<6;n++){const[s,a]=r[o],[i,l]=r[n];t[s][a][i][l]=e[o][n],t[a][s][i][l]=e[o][n],t[s][a][l][i]=e[o][n],t[a][s][l][i]=e[o][n]}return t}(e),o=Array(3).fill(0).map(()=>Array(3).fill(0).map(()=>Array(3).fill(0).map(()=>Array(3).fill(0)))),n=t;for(let s=0;s<3;s++)for(let e=0;e<3;e++)for(let t=0;t<3;t++)for(let a=0;a<3;a++){let i=0;for(let o=0;o<3;o++)for(let l=0;l<3;l++)for(let c=0;c<3;c++)for(let d=0;d<3;d++)i+=n[s][o]*n[e][l]*n[t][c]*n[a][d]*r[o][l][c][d];o[s][e][t][a]=i}return function(e){const t=Array(6).fill(0).map(()=>Array(6).fill(0)),r=[[0,0],[1,1],[2,2],[1,2],[0,2],[0,1]];for(let o=0;o<6;o++)for(let n=0;n<6;n++){const[s,a]=r[o],[i,l]=r[n];t[o][n]=e[s][a][i][l]}return t}(o)}const g=({isOpen:e,onClose:t,onAddTensors:r})=>{const[n,a]=(0,o.useState)(""),[i,l]=(0,o.useState)(""),[c,m]=(0,o.useState)([]),[h,u]=(0,o.useState)(!1),x=(0,o.useRef)(null);if(!e)return null;const p=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?u(!0):"dragleave"===e.type&&u(!1)},g=async e=>{const t=[];for(const o of e)if("text/plain"===o.type||o.name.endsWith(".txt"))try{const e=await o.text(),r=o.name.replace(/\.(txt|dat)$/i,"");t.push({name:r,input:e.trim(),source:"file"})}catch(r){console.error(`Failed to read file ${o.name}:`,r)}m(e=>[...e,...t])},f=e=>{let t="",r="";"silicon"===e?(t="166  64  64   0   0   0\n 64 166  64   0   0   0\n 64  64 166   0   0   0\n  0   0   0  80   0   0\n  0   0   0   0  80   0\n  0   0   0   0   0  80",r="Silicon"):"quartz"===e&&(t="48.137 11.411 12.783  0.000 -3.654  0.000\n11.411 34.968 14.749  0.000 -0.094  0.000\n12.783 14.749 26.015  0.000 -4.528  0.000\n 0.000  0.000  0.000 14.545  0.000  0.006\n-3.654 -0.094 -4.528  0.000 10.771  0.000\n 0.000  0.000  0.000  0.006  0.000 11.947",r="Quartz"),m(e=>[...e,{name:r,input:t,source:"paste"}])};return(0,d.jsx)("div",{className:s.modalOverlay,onClick:t,children:(0,d.jsxs)("div",{className:s.modal,onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:s.modalHeader,children:[(0,d.jsx)("h3",{children:"Add Tensors"}),(0,d.jsx)("button",{onClick:t,className:s.closeButton,children:"\xd7"})]}),(0,d.jsxs)("div",{className:s.modalContent,children:[(0,d.jsx)("div",{className:`${s.dropZone} ${h?s.dragActive:""}`,onDragEnter:p,onDragLeave:p,onDragOver:p,onDrop:e=>{e.preventDefault(),e.stopPropagation(),u(!1);const t=Array.from(e.dataTransfer.files);g(t)},children:(0,d.jsxs)("div",{className:s.dropZoneContent,children:[(0,d.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[(0,d.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,d.jsx)("polyline",{points:"14,2 14,8 20,8"}),(0,d.jsx)("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),(0,d.jsx)("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),(0,d.jsx)("polyline",{points:"10,9 9,9 8,9"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{style:{margin:"8px 0 4px 0"},children:"Drop .txt files here or"}),(0,d.jsx)("button",{onClick:()=>x.current?.click(),className:s.selectFilesButton,children:"Select Files"})]})]})}),(0,d.jsx)("input",{ref:x,type:"file",multiple:!0,accept:".txt,.dat",onChange:e=>{if(e.target.files){const t=Array.from(e.target.files);g(t)}},style:{display:"none"}}),(0,d.jsxs)("div",{className:s.manualEntry,children:[(0,d.jsx)("h4",{children:"Or enter manually:"}),(0,d.jsx)("input",{type:"text",value:i,onChange:e=>l(e.target.value),placeholder:"Tensor name",className:s.tensorNameInput}),(0,d.jsx)("textarea",{value:n,onChange:e=>a(e.target.value),placeholder:"6x6 elastic stiffness matrix (GPa)...",rows:6,className:s.tensorInput}),(0,d.jsx)("button",{onClick:()=>{n.trim()&&i.trim()&&(m(e=>[...e,{name:i.trim(),input:n.trim(),source:"paste"}]),a(""),l(""))},disabled:!n.trim()||!i.trim(),className:s.addButton,children:"Add to List"})]}),(0,d.jsxs)("div",{className:s.exampleSection,children:[(0,d.jsx)("h4",{children:"Quick add examples:"}),(0,d.jsxs)("div",{className:s.exampleButtons,children:[(0,d.jsx)("button",{onClick:()=>f("silicon"),className:s.exampleButton,children:"Silicon"}),(0,d.jsx)("button",{onClick:()=>f("quartz"),className:s.exampleButton,children:"Quartz"})]})]}),c.length>0&&(0,d.jsxs)("div",{className:s.pendingSection,children:[(0,d.jsxs)("h4",{children:["Ready to add (",c.length,"):"]}),(0,d.jsx)("div",{className:s.pendingList,children:c.map((e,t)=>(0,d.jsxs)("div",{className:s.pendingItem,children:[(0,d.jsxs)("div",{className:s.pendingInfo,children:[(0,d.jsx)("strong",{children:e.name}),(0,d.jsxs)("span",{className:s.pendingSource,children:["(",e.source,")"]})]}),(0,d.jsx)("button",{onClick:()=>(e=>{m(t=>t.filter((t,r)=>r!==e))})(t),className:s.removePending,children:"\xd7"})]},t))})]})]}),(0,d.jsxs)("div",{className:s.modalFooter,children:[(0,d.jsx)("button",{onClick:t,className:s.cancelButton,children:"Cancel"}),(0,d.jsxs)("button",{onClick:()=>{c.length>0&&(r(c),m([]),a(""),l(""),t())},disabled:0===c.length,className:s.addAllButton,children:["Add All (",c.length,")"]})]})]})})},f=()=>{const[e,t]=(0,o.useState)(null),[n,a]=(0,o.useState)(!1),[i,c]=(0,o.useState)([]),[f,y]=(0,o.useState)({}),[j,v]=(0,o.useState)("youngs"),[b,S]=(0,o.useState)("xy"),[C,_]=(0,o.useState)(!1),[w,N]=(0,o.useState)(!0),[k,M]=(0,o.useState)(!1),[T,L]=(0,o.useState)(!0),[$,A]=(0,o.useState)(!0),[I,D]=(0,o.useState)(!0),F=(e,t)=>{c(r=>r.map(r=>r.id===e?{...r,...t}:r))},P=()=>i.filter(e=>e.isSelected),z=e=>{const t=P().findIndex(t=>t.id===e);return t>=0?t%10:0},B=P(),E=(()=>{const e=P(),t={xy:[],xz:[],yz:[]},r=[];return e.forEach(e=>{const o=f[e.id];if(o){const n=z(e.id);["xy","xz","yz"].forEach(r=>{const s=o.directionalData?.[r]?.[j]||[];s.length>0&&t[r].push({data:s,tensorId:e.id,name:e.name||"Unnamed",colorIndex:n})});const s=o.surfaceData?.[j];s&&r.push({data:s,tensorId:e.id,name:e.name||"Unnamed",colorIndex:n})}}),{directionalData:t,surfaceData:r}})(),[G,R]=(0,o.useState)(!1),[W,V]=(0,o.useState)(""),[O,U]=(0,o.useState)([]),Z=e=>{const t=e.map(e=>({id:`tensor-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,name:e.name,input:e.input,data:null,isSelected:!1}));try{const t=e.map(e=>({name:e.name.trim(),data:e.input.trim(),timestamp:new Date})),r=new Set(t.map(e=>e.name)),o=H.filter(e=>!r.has(e.name)),n=[...t,...o];Y(n),localStorage.setItem("elasticTensors",JSON.stringify(n))}catch(W){console.error("Failed to save tensors:",W),V("Failed to save tensors to localStorage")}c(e=>[...e,...t]),ve(`Added and saved ${e.length} tensor(s)`,"info")},[H,Y]=(0,o.useState)([]),[q,X]=(0,o.useState)(!1),[J,Q]=(0,o.useState)(!1),[K,ee]=(0,o.useState)(!1),[te,re]=(0,o.useState)(""),[oe,ne]=(0,o.useState)(!1),se=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?ne(!0):"dragleave"===e.type&&ne(!1)},ae=async e=>{const t=[];for(const r of e)if("text/plain"===r.type||r.name.endsWith(".txt"))try{const e=await r.text(),o=r.name.replace(/\.(txt|dat)$/i,"");t.push({name:o,input:e.trim(),source:"file"})}catch(W){console.error(`Failed to read file ${r.name}:`,W)}t.length>0&&Z(t)};(0,o.useEffect)(()=>{(()=>{try{const e=localStorage.getItem("elasticTensors"),t=e?JSON.parse(e).map(e=>({...e,timestamp:new Date(e.timestamp)})):[];Y(t);const r=t.map((e,t)=>({id:`saved-${t}-${Date.now()}`,name:e.name,input:e.data,data:null,isSelected:!1}));if(0===r.length){const e="166  64  64   0   0   0\n 64 166  64   0   0   0\n 64  64 166   0   0   0\n  0   0   0  80   0   0\n  0   0   0   0  80   0\n  0   0   0   0   0  80",t="48.137 11.411 12.783  0.000 -3.654  0.000\n11.411 34.968 14.749  0.000 -0.094  0.000\n12.783 14.749 26.015  0.000 -4.528  0.000\n 0.000  0.000  0.000 14.545  0.000  0.006\n-3.654 -0.094 -4.528  0.000 10.771  0.000\n 0.000  0.000  0.000  0.006  0.000 11.947";r.push({id:"example-silicon",name:"Silicon (Example)",input:e,data:null,isSelected:!1},{id:"example-quartz",name:"Quartz (Example)",input:t,data:null,isSelected:!1})}c(r)}catch(W){console.error("Failed to load initial tensors:",W)}})()},[]);const[ie,le]=(0,o.useState)(!1),[ce,de]=(0,o.useState)(0),[me,he]=(0,o.useState)([0,0,1]),[ue,xe]=(0,o.useState)("Z"),[pe,ge]=(0,o.useState)(null);(0,o.useEffect)(()=>(fe(),be(),()=>{e&&e.terminate()}),[]);const fe=async()=>{try{const e=new Worker(new URL(r.p+r.u(9761),r.b),{type:void 0});e.onmessage=ye,e.onerror=e=>{console.error("Worker error:",e),V("Worker error: "+e.message),a(!1)},t(e),e.postMessage({type:"init",data:{}})}catch(W){console.error("Failed to initialize worker:",W),V("Failed to initialize Web Worker: "+W.message)}},ye=e=>{const{type:t,...r}=e.data;switch(t){case"initialized":r.success?(a(!0),ve("Worker initialized successfully","info")):(a(!1),V("Worker initialization failed: "+r.error));break;case"log":ve(r.message,je(r.level));break;case"analyzeAllResult":if(r.success){const e={};for(const t of r.data)e[t.id]=t;y(e),R(!1),ve(`Analysis complete for ${r.data.length} tensor(s)`,"info")}else V("Analysis failed: "+r.error),R(!1);break;case"error":console.error("Worker error:",r.error),V("Calculation error: "+r.error),R(!1)}},je=e=>{switch(e){case 0:case 1:return"debug";case 2:return"info";case 3:return"warning";default:return"error"}},ve=(e,t)=>{U(r=>[...r,{message:e,level:t,timestamp:new Date}])},be=()=>{try{const e=localStorage.getItem("elasticTensors");if(e){const t=JSON.parse(e).map(e=>({...e,timestamp:new Date(e.timestamp)}));Y(t)}}catch(W){console.error("Failed to load saved tensors:",W)}},Se=e=>{const t=e.trim().split("\n").filter(e=>e.trim());if(6!==t.length)throw new Error("Elastic tensor must have exactly 6 rows");const r=[];for(let s=0;s<t.length;s++){const e=t[s].trim().split(/\s+/).map(parseFloat);if(e.some(isNaN))throw new Error("All values must be valid numbers");r.push(e)}const o=r.every((e,t)=>e.length===6-t),n=r.every(e=>6===e.length);if(!o&&!n)throw new Error("Matrix must be either full 6x6 or upper triangular format");if(o){const e=Array(6).fill(0).map(()=>Array(6).fill(0));for(let t=0;t<6;t++)for(let o=0;o<r[t].length;o++){const n=r[t][o],s=t+o;e[t][s]=n,e[s][t]=n}return e}return r},Ce=e=>{if(!ie||0===ce)return e;try{const t=function(e,t,r){const o=x(t,r);return{rotatedMatrix:p(e,o),rotationMatrix:o,params:{angle:t,axis:r}}}(e,ce,me);return ve(`Applied rotation: ${ce}\xb0 about axis [${me.join(", ")}]`,"info"),t.rotatedMatrix}catch(W){return ve(`Rotation failed: ${W.message}`,"error"),e}};(0,o.useEffect)(()=>{const e=e=>{e.target.closest(".loadDropdownContainer")||(Q(!1),ee(!1))};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),(0,o.useEffect)(()=>{},[j]);return(0,d.jsxs)("div",{className:s.container,children:[(0,d.jsxs)("div",{className:s.mainGrid,children:[(0,d.jsx)("div",{className:s.inputColumn,children:(0,d.jsxs)("div",{className:s.inputSection,children:[(0,d.jsxs)("div",{className:s.header,children:[(0,d.jsx)("h3",{children:"Elastic Tensors"}),(0,d.jsxs)("div",{className:s.workerStatus,children:[(0,d.jsx)("span",{className:`${s.statusIndicator} ${n?s.ready:s.loading}`,children:n?"\u25cf":"\u25cb"}),n?"Ready":"Loading..."]})]}),(0,d.jsxs)("div",{onClick:()=>X(!0),onDragEnter:se,onDragLeave:se,onDragOver:se,onDrop:e=>{e.preventDefault(),e.stopPropagation(),ne(!1);const t=Array.from(e.dataTransfer.files);ae(t)},className:`${s.addTensorDropZone} ${oe?s.dragActive:""}`,style:{border:"2px dashed var(--ifm-color-emphasis-300)",borderRadius:"8px",padding:"20px",textAlign:"center",cursor:"pointer",transition:"all 0.2s ease",marginBottom:"16px",backgroundColor:oe?"var(--ifm-color-primary-lightest)":"var(--ifm-background-surface-color)",borderColor:oe?"var(--ifm-color-primary)":"var(--ifm-color-emphasis-300)"},children:[(0,d.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",style:{marginBottom:"8px"},children:[(0,d.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),(0,d.jsx)("polyline",{points:"14,2 14,8 20,8"}),(0,d.jsx)("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),(0,d.jsx)("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),(0,d.jsx)("polyline",{points:"10,9 9,9 8,9"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{style:{fontWeight:"500",marginBottom:"4px"},children:oe?"Drop tensor files here":"Add Tensors"}),(0,d.jsx)("div",{style:{fontSize:"0.875rem",color:"var(--ifm-color-emphasis-600)"},children:oe?"Release to upload":"Drag & drop .txt files or click to browse"})]})]}),i.length>0&&(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[(0,d.jsxs)("h4",{style:{margin:0},children:["Tensors (",i.length,", ",P().length," selected)"]}),(0,d.jsx)("button",{onClick:()=>{if(window.confirm(`Are you sure you want to remove all ${i.length} tensors? This will also clear them from storage and cannot be undone.`)){c([]),y({});try{localStorage.setItem("elasticTensors",JSON.stringify([])),Y([]),ve("Cleared all tensors and storage","info")}catch(W){console.error("Failed to clear storage:",W)}}},style:{padding:"4px 8px",border:"1px solid var(--ifm-color-danger)",borderRadius:"4px",fontSize:"0.75rem",background:"transparent",color:"var(--ifm-color-danger)",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--ifm-color-danger)",e.currentTarget.style.color="white"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color="var(--ifm-color-danger)"},title:"Remove all tensors and clear storage",children:"Clear All"})]}),(0,d.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"},children:[(0,d.jsx)("input",{type:"text",placeholder:"Search tensors...",value:te,onChange:e=>re(e.target.value),className:s.tensorSearchInput,style:{flex:1,padding:"6px 8px",border:"1px solid var(--ifm-color-emphasis-300)",borderRadius:"4px",fontSize:"0.875rem",background:"var(--ifm-background-color)",color:"var(--ifm-color-content)"}}),(0,d.jsx)("button",{onClick:()=>{c(e=>e.map(e=>({...e,isSelected:!1})))},disabled:0===P().length,style:{padding:"6px 12px",border:"1px solid var(--ifm-color-emphasis-300)",borderRadius:"4px",fontSize:"0.875rem",background:"var(--ifm-background-color)",color:"var(--ifm-color-content)",cursor:P().length>0?"pointer":"not-allowed",opacity:P().length>0?1:.5},title:"Clear all selections",children:"Clear"})]}),(0,d.jsx)("div",{className:s.tensorList,style:{maxHeight:"200px",overflowY:"auto"},children:(te.trim()?i.filter(e=>e.name.toLowerCase().includes(te.toLowerCase())):i).map(e=>{const t=z(e.id);return(0,d.jsxs)("div",{className:`${s.tensorItem} ${e.isSelected?s.selected:""}`,onClick:()=>{return t=e.id,void c(e=>e.map(e=>e.id===t?{...e,isSelected:!e.isSelected}:e));var t},style:{cursor:"pointer",backgroundColor:e.isSelected?l(t)+"20":"transparent",borderLeft:e.isSelected?`3px solid ${l(t)}`:"3px solid transparent"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",flex:1,minWidth:0,overflow:"hidden"},children:[e.isSelected&&(0,d.jsx)("div",{className:`${s.tensorColorIndicator} tensor-color-${t}`}),(0,d.jsx)("div",{className:s.tensorInfo,style:{flex:1,minWidth:0},children:(0,d.jsx)("div",{className:`${s.tensorName} ${e.name?"":s.empty}`,children:e.name||"Unnamed Tensor"})})]}),(0,d.jsxs)("div",{className:s.tensorActions,children:[(0,d.jsx)("button",{onClick:t=>{t.stopPropagation();const r=prompt("Enter tensor name:",e.name);null!==r&&F(e.id,{name:r})},className:s.tensorActionButton,title:"Rename tensor",children:"Edit"}),(0,d.jsx)("button",{onClick:t=>{var r;t.stopPropagation(),e.name&&(e=>{try{const t=H.filter(t=>t.name!==e);Y(t),localStorage.setItem("elasticTensors",JSON.stringify(t)),ve(`Deleted tensor: ${e}`,"info")}catch(W){console.error("Failed to delete tensor:",W)}})(e.name),r=e.id,c(e=>e.filter(e=>e.id!==r))},className:`${s.tensorActionButton} ${s.danger}`,title:"Remove tensor and delete from storage",children:"\xd7"})]})]},e.id)})})]}),0===i.length&&(0,d.jsx)("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--ifm-color-emphasis-600)",fontStyle:"italic"},children:'No tensors added yet. Click "Add Tensors" to get started.'}),(0,d.jsx)("button",{onClick:()=>{if(!n)return void V("Worker not ready. Please wait for initialization.");const t=P();if(0!==t.length)try{V(""),U([]);const o=[];let n=!1;for(const e of t)if(e.input.trim())try{const t=Se(e.input);let r=t;!n&&ie&&(ge(t),r=Ce(t),n=!0,ve(`Applied rotation to "${e.name||"Unnamed"}"`,"info")),F(e.id,{data:r}),o.push({id:e.id,data:r})}catch(r){ve(`Failed to parse tensor "${e.name||"Unnamed"}": ${r.message}`,"error")}else ve(`Skipping tensor "${e.name||"Unnamed"}" - no input data`,"warning");if(0===o.length)return void V("No valid tensors to analyze. Check tensor input data.");R(!0),ve(`Analyzing ${o.length} tensor(s)...`,"info"),e?.postMessage({type:"analyzeAll",data:{tensors:o,properties:["youngs","linear_compressibility","shear","poisson"]}})}catch(o){V(o.message),y({})}else V("No tensors selected for analysis. Click on tensors to select them.")},disabled:!n||G,className:"button button--primary button--lg",style:{width:"100%",marginBottom:"16px"},children:G?"Analyzing...":"Analyze"}),W&&(0,d.jsx)("div",{className:s.errorMessage,children:W}),O.length>0&&(0,d.jsx)("div",{className:s.logOutput,children:(0,d.jsx)("div",{className:s.logEntries,children:O.slice(-3).map((e,t)=>(0,d.jsx)("div",{className:`${s.logEntry} ${s[e.level]}`,children:(0,d.jsx)("span",{className:s.message,children:e.message})},t))})})]})}),(0,d.jsx)("div",{className:s.resultsColumn,children:B.length>0&&(0,d.jsxs)(d.Fragment,{children:[B.some(e=>{const t=f[e.id];return t?.eigenvalues&&!t.isPositiveDefinite})&&(0,d.jsxs)("div",{className:s.errorBanner,style:{backgroundColor:"#f8d7da",border:"1px solid #f5c6cb",borderLeft:"4px solid #dc3545",padding:"12px 16px",marginBottom:"20px",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,d.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#dc3545",strokeWidth:"2",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,d.jsx)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),(0,d.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{style:{color:"#721c24"},children:"Warning: Some Tensors Not Positive Definite"}),(0,d.jsx)("div",{style:{fontSize:"0.9em",color:"#721c24",marginTop:"4px"},children:"One or more elastic tensors have non-positive eigenvalues, indicating they are not physically stable. Properties and visualizations for these tensors are not physically meaningful."})]})]}),B.some(e=>{const t=f[e.id];return t?.eigenvalueError})&&(0,d.jsxs)("div",{className:s.warningBanner,style:{backgroundColor:"#f8d7da",border:"1px solid #f5c6cb",borderLeft:"4px solid #dc3545",padding:"12px 16px",marginBottom:"20px",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,d.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#dc3545",strokeWidth:"2",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,d.jsx)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),(0,d.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{style:{color:"#721c24"},children:"Error: Cannot Calculate Eigenvalues"}),(0,d.jsx)("div",{style:{fontSize:"0.9em",color:"#721c24",marginTop:"4px"},children:"Some tensors have eigenvalue calculation errors."})]})]}),B.some(e=>f[e.id])&&(0,d.jsxs)("div",{className:s.tablesGrid,children:[(0,d.jsxs)("div",{className:s.tableCell,children:[(0,d.jsxs)("h3",{children:["Properties",(0,d.jsx)("button",{onClick:()=>{const e=P();let t="Tensor\tAveraging scheme\tBulk modulus (GPa)\tYoung's modulus (GPa)\tShear modulus (GPa)\tPoisson's ratio\t\u03bb\u2081\t\u03bb\u2082\t\u03bb\u2083\t\u03bb\u2084\t\u03bb\u2085\t\u03bb\u2086\n";e.forEach(e=>{const r=f[e.id];r&&["voigt","reuss","hill"].forEach((o,n)=>{t+=`${e.name||"Unnamed"}\t${o.charAt(0).toUpperCase()+o.slice(1)}\t`,t+=`${r.properties.bulkModulus[o].toFixed(3)}\t`,t+=`${r.properties.youngsModulus[o].toFixed(3)}\t`,t+=`${r.properties.shearModulus[o].toFixed(3)}\t`,t+=`${r.properties.poissonRatio[o].toFixed(5)}`,0===n?(r.eigenvalues||Array(6).fill(null)).slice(0,6).forEach(e=>{t+=`\t${null!=e?e.toFixed(2):"N/A"}`}):t+="\t\t\t\t\t\t",t+="\n"})}),navigator.clipboard.writeText(t.trim()).then(()=>{ve("Properties table copied to clipboard","info")}).catch(e=>{console.error("Failed to copy table:",e)})},className:s.copyButton,title:"Copy table to clipboard",children:(0,d.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,d.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,d.jsx)("path",{d:"m5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2 2v1"})]})})]}),(0,d.jsxs)("table",{className:s.propertiesTable,children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Tensor"}),(0,d.jsx)("th",{children:"Averaging scheme"}),(0,d.jsx)("th",{children:"Bulk modulus (GPa)"}),(0,d.jsx)("th",{children:"Young's modulus (GPa)"}),(0,d.jsx)("th",{children:"Shear modulus (GPa)"}),(0,d.jsx)("th",{children:"Poisson's ratio"}),(0,d.jsx)("th",{children:"\u03bb\u2081"}),(0,d.jsx)("th",{children:"\u03bb\u2082"}),(0,d.jsx)("th",{children:"\u03bb\u2083"}),(0,d.jsx)("th",{children:"\u03bb\u2084"}),(0,d.jsx)("th",{children:"\u03bb\u2085"}),(0,d.jsx)("th",{children:"\u03bb\u2086"})]})}),(0,d.jsx)("tbody",{children:P().map(e=>{const t=f[e.id],r=l(z(e.id));return t?["voigt","reuss","hill"].map((o,n)=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{style:{fontWeight:"500",borderLeft:`3px solid ${r}`,paddingLeft:"8px"},children:e.name||"Unnamed"}),(0,d.jsx)("td",{children:o.charAt(0).toUpperCase()+o.slice(1)}),(0,d.jsx)("td",{children:t.properties.bulkModulus[o].toFixed(3)}),(0,d.jsx)("td",{children:t.properties.youngsModulus[o].toFixed(3)}),(0,d.jsx)("td",{children:t.properties.shearModulus[o].toFixed(3)}),(0,d.jsx)("td",{children:t.properties.poissonRatio[o].toFixed(5)}),0===n?(t.eigenvalues||Array(6).fill(null)).slice(0,6).map((e,t)=>(0,d.jsx)("td",{style:{fontSize:"0.8rem"},children:null!=e?e.toFixed(2):"N/A"},`eig${t}`)):Array.from({length:6},(e,t)=>(0,d.jsx)("td",{},`empty-${t}`))]},`${e.id}-${o}`)):null}).flat()})]})]}),(0,d.jsxs)("div",{className:s.tableCell,children:[(0,d.jsxs)("h3",{children:["Variations of the elastic moduli",(0,d.jsx)("button",{onClick:()=>{const e=P();let t="Tensor\tE_min\tE_max\tE_aniso\t\u03b2_min\t\u03b2_max\t\u03b2_aniso\tG_min\tG_max\tG_aniso\t\u03bd_min\t\u03bd_max\t\u03bd_aniso\n";e.forEach(e=>{const r=f[e.id];r&&r.extrema&&(t+=`${e.name||"Unnamed"}\t`,t+=`${r.extrema.youngsModulus.min.toFixed(3)}\t${r.extrema.youngsModulus.max.toFixed(3)}\t${r.extrema.youngsModulus.anisotropy.toFixed(2)}\t`,t+=`${r.extrema.linearCompressibility.min.toFixed(3)}\t${r.extrema.linearCompressibility.max.toFixed(3)}\t${r.extrema.linearCompressibility.anisotropy.toFixed(2)}\t`,t+=`${r.extrema.shearModulus.min.toFixed(3)}\t${r.extrema.shearModulus.max.toFixed(3)}\t${r.extrema.shearModulus.anisotropy.toFixed(2)}\t`,t+=`${r.extrema.poissonRatio.min.toFixed(5)}\t${r.extrema.poissonRatio.max.toFixed(5)}\t${isFinite(r.extrema.poissonRatio.anisotropy)?r.extrema.poissonRatio.anisotropy.toFixed(2):"\u221e"}\n`)}),navigator.clipboard.writeText(t.trim()).then(()=>{ve("Variations table copied to clipboard","info")}).catch(e=>{console.error("Failed to copy table:",e)})},className:s.copyButton,title:"Copy table to clipboard",children:(0,d.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,d.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,d.jsx)("path",{d:"m5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})]}),(0,d.jsxs)("table",{className:s.propertiesTable,children:[(0,d.jsxs)("thead",{children:[(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{}),(0,d.jsx)("th",{colSpan:"3",children:"Young's modulus (GPa)"}),(0,d.jsxs)("th",{colSpan:"3",children:["Linear compressibility (TPa",(0,d.jsx)("sup",{children:"\u22121"}),")"]}),(0,d.jsx)("th",{colSpan:"3",children:"Shear modulus (GPa)"}),(0,d.jsx)("th",{colSpan:"3",children:"Poisson's ratio"})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Tensor"}),(0,d.jsxs)("th",{children:[(0,d.jsx)("em",{children:"E"}),(0,d.jsx)("sub",{children:"min"})]}),(0,d.jsxs)("th",{children:[(0,d.jsx)("em",{children:"E"}),(0,d.jsx)("sub",{children:"max"})]}),(0,d.jsxs)("th",{children:[(0,d.jsx)("em",{children:"E"}),(0,d.jsx)("sub",{children:"aniso"})]}),(0,d.jsxs)("th",{children:["\u03b2",(0,d.jsx)("sub",{children:"min"})]}),(0,d.jsxs)("th",{children:["\u03b2",(0,d.jsx)("sub",{children:"max"})]}),(0,d.jsxs)("th",{children:["\u03b2",(0,d.jsx)("sub",{children:"aniso"})]}),(0,d.jsxs)("th",{children:[(0,d.jsx)("em",{children:"G"}),(0,d.jsx)("sub",{children:"min"})]}),(0,d.jsxs)("th",{children:[(0,d.jsx)("em",{children:"G"}),(0,d.jsx)("sub",{children:"max"})]}),(0,d.jsxs)("th",{children:[(0,d.jsx)("em",{children:"G"}),(0,d.jsx)("sub",{children:"aniso"})]}),(0,d.jsxs)("th",{children:["\u03bd",(0,d.jsx)("sub",{children:"min"})]}),(0,d.jsxs)("th",{children:["\u03bd",(0,d.jsx)("sub",{children:"max"})]}),(0,d.jsxs)("th",{children:["\u03bd",(0,d.jsx)("sub",{children:"aniso"})]})]})]}),(0,d.jsx)("tbody",{children:P().map(e=>{const t=f[e.id],r=l(z(e.id));return t?(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{style:{fontWeight:"500",borderLeft:`3px solid ${r}`,paddingLeft:"8px"},children:e.name||"Unnamed"}),(0,d.jsx)("td",{children:t.extrema.youngsModulus.min.toFixed(3)}),(0,d.jsx)("td",{children:t.extrema.youngsModulus.max.toFixed(3)}),(0,d.jsx)("td",{children:t.extrema.youngsModulus.anisotropy.toFixed(2)}),(0,d.jsx)("td",{children:t.extrema.linearCompressibility.min.toFixed(3)}),(0,d.jsx)("td",{children:t.extrema.linearCompressibility.max.toFixed(3)}),(0,d.jsx)("td",{children:t.extrema.linearCompressibility.anisotropy.toFixed(2)}),(0,d.jsx)("td",{children:t.extrema.shearModulus.min.toFixed(3)}),(0,d.jsx)("td",{children:t.extrema.shearModulus.max.toFixed(3)}),(0,d.jsx)("td",{children:t.extrema.shearModulus.anisotropy.toFixed(2)}),(0,d.jsx)("td",{children:t.extrema.poissonRatio.min.toFixed(5)}),(0,d.jsx)("td",{children:t.extrema.poissonRatio.max.toFixed(5)}),(0,d.jsx)("td",{children:isFinite(t.extrema.poissonRatio.anisotropy)?t.extrema.poissonRatio.anisotropy.toFixed(2):"\u221e"})]},e.id):null})})]})]})]}),B.some(e=>f[e.id])&&(0,d.jsxs)("div",{className:s.chartsSection,children:[(0,d.jsxs)("div",{className:s.chartControls,children:[(0,d.jsxs)("select",{value:j,onChange:e=>v(e.target.value),className:s.propertySelect,children:[(0,d.jsx)("option",{value:"youngs",children:"Young's Modulus"}),(0,d.jsx)("option",{value:"linear_compressibility",children:"Linear Compressibility"}),(0,d.jsx)("option",{value:"shear",children:"Shear Modulus"}),(0,d.jsx)("option",{value:"poisson",children:"Poisson's Ratio"}),(0,d.jsx)("option",{value:"matrix",children:"Tensor Matrix Components"})]}),(0,d.jsxs)("label",{className:s.checkboxLabel,children:[(0,d.jsx)("input",{type:"checkbox",checked:C,onChange:e=>_(e.target.checked),className:s.checkbox}),"Show 3D View"]}),(0,d.jsxs)("label",{className:s.checkboxLabel,children:[(0,d.jsx)("input",{type:"checkbox",checked:T,onChange:e=>L(e.target.checked),className:s.checkbox}),"Show Area Shading"]}),(0,d.jsxs)("label",{className:s.checkboxLabel,children:[(0,d.jsx)("input",{type:"checkbox",checked:$,onChange:e=>A(e.target.checked),className:s.checkbox}),"Show Legend"]}),(0,d.jsxs)("label",{className:s.checkboxLabel,children:[(0,d.jsx)("input",{type:"checkbox",checked:I,onChange:e=>D(e.target.checked),className:s.checkbox}),"Show Grid Lines"]}),C&&(0,d.jsxs)("div",{className:s.radioGroup,children:[(0,d.jsxs)("label",{className:s.radioLabel,children:[(0,d.jsx)("input",{type:"radio",name:"3dMode",checked:w,onChange:()=>N(!0),className:s.radio}),"Scatter"]}),(0,d.jsxs)("label",{className:s.radioLabel,children:[(0,d.jsx)("input",{type:"radio",name:"3dMode",checked:!w,onChange:()=>N(!1),className:s.radio}),"Surface"]})]})]}),"matrix"===j?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:s.sectionTitle,children:"Stiffness Matrix (C) - GPa"}),(0,d.jsx)("div",{className:s.surfaceChartContainer,children:(0,d.jsx)("div",{className:s.matrixComponentsTable,children:(0,d.jsxs)("table",{className:s.propertiesTable,children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Tensor"}),["C11","C12","C13","C14","C15","C16","C22","C23","C24","C25","C26","C33","C34","C35","C36","C44","C45","C46","C55","C56","C66"].map(e=>(0,d.jsx)("th",{style:{fontSize:"0.8rem"},children:e},e))]})}),(0,d.jsx)("tbody",{children:P().map(e=>{const t=f[e.id],r=l(z(e.id));if(!t)return null;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{style:{fontWeight:"500",borderLeft:`3px solid ${r}`,paddingLeft:"8px"},children:e.name||"Unnamed"}),[[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[1,1],[1,2],[1,3],[1,4],[1,5],[2,2],[2,3],[2,4],[2,5],[3,3],[3,4],[3,5],[4,4],[4,5],[5,5]].map(([e,r],o)=>(0,d.jsx)("td",{style:{fontSize:"0.8rem"},children:t.stiffnessMatrix?.[e]?.[r]?.toFixed(1)||"N/A"},`C${o}`))]},e.id)})})]})})}),(0,d.jsx)("div",{className:s.sectionTitle,children:"Compliance Matrix (S) - GPa\u207b\xb9"}),(0,d.jsx)("div",{className:s.surfaceChartContainer,children:(0,d.jsx)("div",{className:s.matrixComponentsTable,children:(0,d.jsxs)("table",{className:s.propertiesTable,children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Tensor"}),["S11","S12","S13","S14","S15","S16","S22","S23","S24","S25","S26","S33","S34","S35","S36","S44","S45","S46","S55","S56","S66"].map(e=>(0,d.jsx)("th",{style:{fontSize:"0.8rem"},children:e},e))]})}),(0,d.jsx)("tbody",{children:P().map(e=>{const t=f[e.id],r=l(z(e.id));if(!t)return null;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{style:{fontWeight:"500",borderLeft:`3px solid ${r}`,paddingLeft:"8px"},children:e.name||"Unnamed"}),[[0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[1,1],[1,2],[1,3],[1,4],[1,5],[2,2],[2,3],[2,4],[2,5],[3,3],[3,4],[3,5],[4,4],[4,5],[5,5]].map(([e,r],o)=>(0,d.jsx)("td",{style:{fontSize:"0.8rem"},children:t.complianceMatrix?.[e]?.[r]?.toFixed(6)||"N/A"},`S${o}`))]},e.id)})})]})})})]}):C&&"matrix"!==j?(0,d.jsx)(d.Fragment,{children:B.every(e=>{const t=f[e.id];return!1!==t?.isPositiveDefinite})?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:s.sectionTitle,children:"3D Property Surface"}),(0,d.jsx)("div",{className:s.surfaceChartContainer,children:E.surfaceData.length>0&&(0,d.jsx)(u,{multiSurfaceData:E.surfaceData,property:j,useScatter:w,showLegend:$})})]}):(0,d.jsx)("div",{style:{padding:"40px 20px",textAlign:"center",color:"var(--ifm-color-emphasis-600)",fontStyle:"italic"},children:"3D visualization disabled: Tensor is not positive definite"})}):"matrix"!==j?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:s.sectionTitle,children:"Property Surface Plots"}),(0,d.jsx)("div",{className:s.polarChartsGrid,children:["xy","xz","yz"].map(e=>(0,d.jsxs)("div",{className:s.chartContainer,children:[(0,d.jsxs)("div",{className:s.chartLabel,children:[e.toUpperCase()," Plane"]}),(0,d.jsx)(h,{property:j,plane:e,multiTensorData:E.directionalData[e],showShading:T,showLegend:$,showGridLines:I})]},e))}),(0,d.jsx)("div",{className:s.sectionTitle,children:"Angular Variation"}),(0,d.jsx)("div",{className:s.directionalChartsGrid,children:["xy","xz","yz"].map(e=>(0,d.jsxs)("div",{className:s.chartContainer,children:[(0,d.jsxs)("div",{className:s.chartLabel,children:[e.toUpperCase()," Plane"]}),(0,d.jsx)(m,{property:j,multiTensorData:E.directionalData[e],showShading:T,showLegend:$,showGridLines:I})]},e))})]}):null]})]})})]}),(0,d.jsx)(g,{isOpen:q,onClose:()=>X(!1),onAddTensors:Z})]})};function y(){return(0,d.jsx)(n.A,{title:"Elastic Tensor Calculator",description:"Interactive elastic tensor analysis tool for calculating elastic properties and visualizations",children:(0,d.jsxs)("main",{style:{minHeight:"calc(100vh - 60px)"},children:[(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"0.5rem 1rem",flexWrap:"wrap",gap:"0.5rem",margin:"1rem",marginBottom:"1.5rem"},children:[(0,d.jsx)("h1",{style:{marginBottom:0,fontSize:"1.5rem",flex:"1 1 auto"},children:"Elastic Tensor Calculator"}),(0,d.jsxs)("small",{style:{color:"var(--ifm-color-emphasis-600)",flex:"0 0 auto"},children:["Inspired by ",(0,d.jsx)("a",{href:"https://progs.coudert.name/elate",target:"_blank",rel:"noopener noreferrer",children:"ELATE"})]})]}),(0,d.jsx)(f,{})]})})}}}]);