"use strict";(globalThis.webpackChunkblog=globalThis.webpackChunkblog||[]).push([[3519],{7664:(e,t,s)=>{s.r(t),s.d(t,{default:()=>We});var n=s(6540),a=s(1656);const r="container_bOHe",o="tabBar_gHhB",i="tabBarTabs_gjqD",l="clearStorageBtn_sIgh",c="tabButton_jfbD",u="tabButtonActive_NL6c",d="tabBadge_XzaZ",p="tabBadgeError_XBPY",m="liveDotSmall_jxI5",f="tabContentWrapper_XmA4",h="tabContent_hFSo",g="inputTabContainer_Wafy",x="inputTabDragging_yE9Q",y="dragOverlay_rYM_",b="dragOverlayContent_roPH",j="dragIcon_imLH",v="fileBrowserPanel_l_JM",S="fileBrowserHeader__HNr",C="addFileBtn_QexH",N="fileList_yAMb",E="emptyFileList_skxT",F="dropZoneIcon_iKvg",M="fileListItem_lwKO",k="fileListItemSelected_VZBH",w="fileItemLeft_tOgm",_="mainFileToggle_bJ3D",$="checkmark_DxL4",L="fileName_CUq7",T="mainBadge_VKiD",A="fileDeleteBtn_dQvm",D="dropZoneSmall__3WE",z="editorPanel_L28T",R="editorHeader_H0gl",P="readOnlyBadge_zX5b",I="editorHint_re68",B="editor_VEJs",O="editorFooter_xaxU",W="buttonGroup_XO6g",U="status_obbO",H="outputFilesSection_ZqYE",X="outputHeader_T1LS",q="outputActions_ytZ0",V="viewerContainer_EIUX",J="viewerStatus_gxi7",Z="trajectoryInfo_lqGa",K="liveIndicator_KYSv",G="liveDot_oOHV",Y="viewerWrapper_czj4",Q="viewerPlaceholder_IbXd",ee="placeholderContent_Z48m",te="viewerLoading_vljp",se="output_WrLT",ne="error_UmX2",ae="outputFilesList_RxhV",re="outputFileItem_ebxE",oe="outputFileName_m1fX",ie="fileSize_mY5w",le="outputWithChart_WMEX",ce="consoleSection_zh1e",ue="chartSection_BFZP",de="thermoChart_aJm1",pe="thermoChartEmpty_EevD",me="histogramChart_I022",fe="histogramChartEmpty__zPd",he="histogramSlider_dmnq",ge="histogramTimestep_WW4M",xe="dataFileSelector_GemF",ye="chartSectionTabs_tO8e",be="chartTabButton_uSIC",je="chartTabButtonActive_V4yj",ve="chartContent_MDZE",Se="# LAMMPS input script - LJ fluid (Argon) simulation\n# ============================================\n# Simulation parameters - adjust these\nvariable        dump_freq equal 10      # Trajectory output frequency\nvariable        thermo_freq equal 100   # Thermodynamic output frequency\nvariable        run_steps equal 1000    # Total simulation steps\n\n# System setup\nunits           lj\ndimension       3\natom_style      atomic\nboundary        p p p\n\n# Create FCC lattice of atoms\nlattice         fcc 0.8442\nregion          box block 0 4 0 4 0 4\ncreate_box      1 box\ncreate_atoms    1 box\nmass            1 1.0\n\n# Initialize velocities (T = 1.44 in LJ units)\nvelocity        all create 1.44 87287 loop geom\n\n# LJ potential with cutoff at 2.5 sigma\npair_style      lj/cut 2.5\npair_coeff      1 1 1.0 1.0 2.5\n\n# Neighbor list settings\nneighbor        0.3 bin\nneigh_modify    delay 0 every 20 check no\n\n# NVE integration (constant energy)\nfix             1 all nve\n\n# Output settings\nthermo          ${thermo_freq}\n\n# Trajectory output with element symbol for visualization\ndump            traj all xyz ${dump_freq} trajectory.xyz\ndump_modify     traj element Ar sort id\n\n# Run simulation\nrun             ${run_steps}\n\n# Cleanup\nundump          traj";const Ce="lammps-interface-state",Ne=e=>{const t=atob(e),s=new Uint8Array(t.length);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return s.buffer};function Ee(){const[e,t]=(0,n.useState)(null),[s,a]=(0,n.useState)(!1);(0,n.useEffect)(()=>{try{const e=localStorage.getItem(Ce);if(e){const s=JSON.parse(e);t(s),a(!0)}}catch(e){console.warn("Failed to load from localStorage:",e)}},[]);return{savedState:e,saveInputs:(0,n.useCallback)((e,s,n)=>{try{const r={};e.forEach((e,t)=>{r[t]=(e=>{const t=new Uint8Array(e);let s="";for(let n=0;n<t.byteLength;n++)s+=String.fromCharCode(t[n]);return btoa(s)})(e)});const o={uploadedFiles:r,selectedMainFile:s,inputScript:n,output:[],savedAt:Date.now()};localStorage.setItem(Ce,JSON.stringify(o)),t(o),a(!0)}catch(r){console.warn("Failed to save to localStorage:",r)}},[]),saveOutputs:(0,n.useCallback)(e=>{try{const s=localStorage.getItem(Ce);if(s){const n=JSON.parse(s);n.output=e.slice(-500),n.savedAt=Date.now(),localStorage.setItem(Ce,JSON.stringify(n)),t(n)}}catch(s){console.warn("Failed to save outputs to localStorage:",s)}},[]),clearStorage:(0,n.useCallback)(()=>{try{localStorage.removeItem(Ce),t(null),a(!1)}catch(e){console.warn("Failed to clear localStorage:",e)}},[]),hasStoredData:s}}const Fe=[/\.lmp$/i,/\.in$/i,/\.inp$/i,/input/i,/lammps/i],Me=e=>Fe.some(t=>t.test(e)),ke=e=>{const t=[[1.008,"H"],[12.01,"C"],[14.01,"N"],[16,"O"],[19,"F"],[28.09,"Si"],[32.06,"S"],[35.45,"Cl"],[39.95,"Ar"],[79.9,"Br"],[126.9,"I"]];let s="X",n=1/0;for(const[a,r]of t){const t=Math.abs(e-a);t<n&&(n=t,s=r)}return n<1.5?s:"X"},we=e=>{const t=e.split("\n"),s={atoms:[],bonds:[],masses:[],atomTypes:0,box:{xlo:0,xhi:0,ylo:0,yhi:0,zlo:0,zhi:0}};let n="";for(let a=0;a<t.length;a++){const e=t[a].trim();if(e&&!e.startsWith("#")){if(e.includes("atom types")){const t=e.match(/(\d+)\s+atom types/);t&&(s.atomTypes=parseInt(t[1]));continue}if(e.includes("xlo xhi")){const t=e.match(/([-\d.]+)\s+([-\d.]+)\s+xlo xhi/);t&&(s.box.xlo=parseFloat(t[1]),s.box.xhi=parseFloat(t[2]));continue}if(e.includes("ylo yhi")){const t=e.match(/([-\d.]+)\s+([-\d.]+)\s+ylo yhi/);t&&(s.box.ylo=parseFloat(t[1]),s.box.yhi=parseFloat(t[2]));continue}if(e.includes("zlo zhi")){const t=e.match(/([-\d.]+)\s+([-\d.]+)\s+zlo zhi/);t&&(s.box.zlo=parseFloat(t[1]),s.box.zhi=parseFloat(t[2]));continue}if("Masses"!==e)if("Atoms"!==e)if("Bonds"!==e)if("Angles"!==e&&"Dihedrals"!==e&&"Impropers"!==e){if("masses"===n){const t=e.split(/\s+/);if(t.length>=2){const e=parseInt(t[0]),n=parseFloat(t[1]);isNaN(e)||isNaN(n)||s.masses.push({type:e,mass:n})}}if("atoms"===n){const t=e.split(/\s+/);if(t.length>=7){const e={id:parseInt(t[0]),moleculeId:parseInt(t[1]),type:parseInt(t[2]),charge:parseFloat(t[3]),x:parseFloat(t[4]),y:parseFloat(t[5]),z:parseFloat(t[6])};isNaN(e.id)||isNaN(e.x)||s.atoms.push(e)}}if("bonds"===n){const t=e.split(/\s+/);if(t.length>=4){const e={id:parseInt(t[0]),type:parseInt(t[1]),atom1:parseInt(t[2]),atom2:parseInt(t[3])};isNaN(e.id)||isNaN(e.atom1)||isNaN(e.atom2)||s.bonds.push(e)}}}else n="";else n="bonds";else n="atoms";else n="masses"}}return s.atoms.length>0?s:null};var _e=s(4848);const $e=({uploadedFiles:e,selectedMainFile:t,inputScript:s,isReady:a,isRunning:r,status:o,onFileUpload:i,onFileDelete:l,onMainFileSelect:c,onScriptChange:u,onRun:d,onCancel:p})=>{const m=(0,n.useRef)(null),[f,h]=(0,n.useState)(!1),[H,X]=(0,n.useState)(t||null);(0,n.useEffect)(()=>{t&&t!==H&&X(t)},[t]);const q=Array.from(e.keys()),V=H&&H===t?s:H&&e.has(H)?(t=>{const s=e.get(t);if(!s)return"";try{return(new TextDecoder).decode(s)}catch{return"[Binary file - cannot display]"}})(H):s,J=H&&e.has(H)?H:null;return(0,_e.jsxs)("div",{className:`${g} ${f?x:""}`,onDragOver:e=>{e.preventDefault(),e.stopPropagation(),h(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.contains(e.relatedTarget)||h(!1)},onDrop:e=>{e.preventDefault(),e.stopPropagation(),h(!1),e.dataTransfer.files.length>0&&i(e.dataTransfer.files)},children:[f&&(0,_e.jsx)("div",{className:y,children:(0,_e.jsxs)("div",{className:b,children:[(0,_e.jsx)("div",{className:j,children:"+"}),(0,_e.jsx)("div",{children:"Drop files here"})]})}),(0,_e.jsxs)("div",{className:v,children:[(0,_e.jsxs)("div",{className:S,children:[(0,_e.jsx)("h4",{children:"Files"}),(0,_e.jsx)("button",{className:C,onClick:()=>m.current?.click(),title:"Add files",children:"+"})]}),(0,_e.jsx)("input",{ref:m,type:"file",multiple:!0,onChange:e=>e.target.files&&i(e.target.files),style:{display:"none"}}),(0,_e.jsx)("div",{className:N,children:0===q.length?(0,_e.jsxs)("div",{className:E,onClick:()=>m.current?.click(),children:[(0,_e.jsx)("div",{className:F,children:(0,_e.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,_e.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,_e.jsx)("polyline",{points:"17 8 12 3 7 8"}),(0,_e.jsx)("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]})}),(0,_e.jsx)("span",{children:"Drop files or click to upload"})]}):q.map(e=>{const s=Me(e),n=t===e,a=H===e;return(0,_e.jsxs)("div",{className:`${M} ${a?k:""}`,onClick:()=>(e=>{X(e),Me(e)&&c(e)})(e),children:[(0,_e.jsxs)("div",{className:w,children:[s&&(0,_e.jsxs)("label",{className:_,onClick:e=>e.stopPropagation(),title:"Set as main input file",children:[(0,_e.jsx)("input",{type:"checkbox",checked:n,onChange:t=>{c(t.target.checked?e:"")}}),(0,_e.jsx)("span",{className:$})]}),(0,_e.jsx)("span",{className:L,title:e,children:e}),n&&(0,_e.jsx)("span",{className:T,children:"MAIN"})]}),(0,_e.jsx)("button",{className:A,onClick:t=>{t.stopPropagation(),l(e),H===e&&X(null)},title:"Delete file",children:"\xd7"})]},e)})}),q.length>0&&(0,_e.jsx)("div",{className:D,onClick:()=>m.current?.click(),children:"+ Add more files"})]}),(0,_e.jsxs)("div",{className:z,children:[(0,_e.jsxs)("div",{className:R,children:[(0,_e.jsxs)("h4",{children:[J||"LAMMPS Script",J&&!Me(J)&&(0,_e.jsx)("span",{className:P,children:"Read-only"})]}),!J&&(0,_e.jsx)("span",{className:I,children:"Default script (no file selected)"})]}),(0,_e.jsx)("textarea",{className:B,value:V,onChange:e=>{u(e.target.value)},placeholder:"Enter LAMMPS commands here...",readOnly:!!J&&!Me(J)}),(0,_e.jsxs)("div",{className:O,children:[(0,_e.jsx)("div",{className:W,children:r?(0,_e.jsx)("button",{onClick:p,className:"button button--danger",children:"Cancel"}):(0,_e.jsx)("button",{onClick:d,disabled:!a,className:"button button--primary",children:"Run LAMMPS"})}),(0,_e.jsx)("div",{className:U,children:o})]})]})]})};var Le=s(5098);const Te=({output:e,isRunning:t})=>{const s=(0,n.useRef)(null),a=(0,n.useRef)(null),r=(0,n.useMemo)(()=>(e=>{const t={step:[],temp:[],pe:[],ke:[],etotal:[],press:[],vol:[]};let s=!1,n={};for(const a of e){if(a.isError)continue;const e=a.text.trim();if(e.includes("Step")&&(e.includes("Temp")||e.includes("TotEng")))s=!0,e.split(/\s+/).forEach((e,t)=>{const s=e.toLowerCase();"step"===s?n.step=t:"temp"===s?n.temp=t:"poteng"===s||"pe"===s?n.pe=t:"kineng"===s||"ke"===s?n.ke=t:"toteng"===s||"etotal"===s?n.etotal=t:"press"===s?n.press=t:"volume"!==s&&"vol"!==s||(n.vol=t)});else if(s){const s=e.split(/\s+/);if(s.length>=2&&/^-?\d+$/.test(s[0])){const e=parseInt(s[n.step??0]);isNaN(e)||(t.step.push(e),void 0!==n.temp&&t.temp.push(parseFloat(s[n.temp])||0),void 0!==n.pe&&t.pe.push(parseFloat(s[n.pe])||0),void 0!==n.ke&&t.ke.push(parseFloat(s[n.ke])||0),void 0!==n.etotal&&t.etotal.push(parseFloat(s[n.etotal])||0),void 0!==n.press&&t.press.push(parseFloat(s[n.press])||0),void 0!==n.vol&&t.vol.push(parseFloat(s[n.vol])||0))}}}return t})(e),[e]),o=r.step.length>0;return(0,n.useEffect)(()=>{if(!s.current)return;a.current=Le.Ts(s.current);const e=()=>{a.current?.resize()};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e),a.current?.dispose()}},[]),(0,n.useEffect)(()=>{if(!a.current||!o)return;const e=[],t=[];let s=0;r.temp.length>0&&(t.push({type:"value",name:"Temp (K)",position:"left",axisLine:{lineStyle:{color:"#ee6666"}},axisLabel:{formatter:"{value}"}}),e.push({name:"Temperature",type:"line",yAxisIndex:s++,data:r.temp,smooth:!0,symbol:"none",itemStyle:{color:"#ee6666"},lineStyle:{color:"#ee6666",width:2}})),(r.etotal.length>0||r.pe.length>0)&&(t.push({type:"value",name:"Energy (eV)",position:"right",axisLine:{lineStyle:{color:"#5470c6"}},axisLabel:{formatter:"{value}"}}),r.etotal.length>0&&e.push({name:"Total Energy",type:"line",yAxisIndex:s,data:r.etotal,smooth:!0,symbol:"none",itemStyle:{color:"#5470c6"},lineStyle:{color:"#5470c6",width:2}}),r.pe.length>0&&e.push({name:"Potential Energy",type:"line",yAxisIndex:s,data:r.pe,smooth:!0,symbol:"none",itemStyle:{color:"#91cc75"},lineStyle:{color:"#91cc75",width:1.5,type:"dashed"}}),r.ke.length>0&&e.push({name:"Kinetic Energy",type:"line",yAxisIndex:s,data:r.ke,smooth:!0,symbol:"none",itemStyle:{color:"#fac858"},lineStyle:{color:"#fac858",width:1.5,type:"dashed"}}));const n={animation:!1,grid:{left:"12%",right:"12%",top:"15%",bottom:"15%"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:e.map(e=>e.name),top:0,textStyle:{fontSize:10}},xAxis:{type:"category",data:r.step.map(String),name:"Step",nameLocation:"middle",nameGap:25,axisLabel:{formatter:e=>{const t=parseInt(e);return t>=1e3?(t/1e3).toFixed(1)+"k":e}}},yAxis:t,series:e};a.current.setOption(n,!0)},[r,o]),o?(0,_e.jsx)("div",{className:de,children:(0,_e.jsx)("div",{ref:s,style:{height:"100%",width:"100%"}})}):(0,_e.jsx)("div",{className:pe,children:(0,_e.jsx)("span",{children:t?"Waiting for thermo data...":"No thermo data"})})},Ae=({data:e,filename:t,isLoading:s=!1})=>{const a=(0,n.useRef)(null),r=(0,n.useRef)(null),[o,i]=(0,n.useState)(-1),l=(0,n.useMemo)(()=>e?((e,t)=>{const s=e.trim().split("\n"),n=[];let a="",r=null;for(const i of s){const e=i.trim();if(!e)continue;if(e.startsWith("#")){e.includes("fix")&&(a=e);continue}const t=e.split(/\s+/);if(6!==t.length){if(r&&(4===t.length||3===t.length)){const e=parseFloat(t[1]),s=parseFloat(t[2]);isNaN(e)||isNaN(s)||(r.bins.push(e),r.counts.push(s))}}else r&&r.bins.length>0&&n.push(r),r={timestep:parseInt(t[0],10),bins:[],counts:[]}}if(r&&r.bins.length>0&&n.push(r),0===n.length)return null;let o=t.replace(/\.dat$/,"").replace(/_/g," ");if(a.includes("fix")){const e=a.match(/fix\s+(\w+)/);e&&(o=e[1].replace(/_/g," "))}return{timesteps:n,title:o}})(e,t):null,[e,t]),c=(0,n.useMemo)(()=>{if(!l||0===l.timesteps.length)return null;const e=o<0?l.timesteps.length-1:Math.min(o,l.timesteps.length-1);return l.timesteps[e]},[l,o]);if((0,n.useEffect)(()=>{if(!a.current)return;r.current=Le.Ts(a.current);const e=()=>{r.current?.resize()};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e),r.current?.dispose()}},[]),(0,n.useEffect)(()=>{if(!r.current||!c||!l)return;const e={animation:!1,title:{text:`${l.title} (step ${c.timestep})`,left:"center",top:5,textStyle:{fontSize:12}},grid:{left:"12%",right:"5%",top:"18%",bottom:"15%"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:e=>{const t=e[0];return`${t.name}\xb0: ${t.value.toFixed(0)} counts`}},xAxis:{type:"category",data:c.bins.map(e=>e.toFixed(1)),name:"Angle (\xb0)",nameLocation:"middle",nameGap:25,axisLabel:{interval:Math.floor(c.bins.length/10),rotate:0,fontSize:10}},yAxis:{type:"value",name:"Count",nameLocation:"middle",nameGap:40},series:[{type:"bar",data:c.counts,itemStyle:{color:new Le.fA.W4(0,0,0,1,[{offset:0,color:"#5470c6"},{offset:1,color:"#91cc75"}])},barWidth:"90%"}]};r.current.setOption(e,!0)},[l,c]),s)return(0,_e.jsx)("div",{className:fe,children:(0,_e.jsx)("span",{children:"Loading histogram data..."})});if(!e||!l||0===l.timesteps.length)return(0,_e.jsx)("div",{className:fe,children:(0,_e.jsx)("span",{children:"No histogram data available"})});const u=l.timesteps.length,d=o<0?u-1:o;return(0,_e.jsxs)("div",{className:me,children:[u>1&&(0,_e.jsxs)("div",{className:he,children:[(0,_e.jsx)("input",{type:"range",min:0,max:u-1,value:d,onChange:e=>i(parseInt(e.target.value,10)),style:{flex:1}}),(0,_e.jsxs)("span",{className:ge,children:[d+1," / ",u]})]}),(0,_e.jsx)("div",{ref:a,style:{flex:1,minHeight:0}})]})},De=({output:e,vfsFiles:t,isReady:s,isRunning:a,onClearOutput:r,onListFiles:o,onDownloadFile:i,onFetchFileContent:l})=>{const c=(0,n.useRef)(null),[u,d]=(0,n.useState)("thermo"),[p,m]=(0,n.useState)(""),[f,g]=(0,n.useState)(null),[x,y]=(0,n.useState)(!1),b=(0,n.useRef)(""),j=(0,n.useRef)(!1),v=(0,n.useRef)(!1);(0,n.useEffect)(()=>{a&&!v.current&&(m(""),g(null),b.current=""),v.current=a},[a]),(0,n.useEffect)(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[e]);const S=(0,n.useMemo)(()=>t.filter(e=>!e.isDirectory&&(e.name.endsWith(".dat")||e.name.endsWith(".csv"))),[t]);(0,n.useEffect)(()=>{S.length>0&&!p&&m(S[0].name)},[S,p]),(0,n.useEffect)(()=>{if(!p||!l)return;if(j.current)return;if(p===b.current)return;let e=!1;j.current=!0,y(!0);const t=setTimeout(()=>{e?j.current=!1:l(p).then(t=>{e||(g(t),b.current=p,y(!1),j.current=!1)}).catch(()=>{e||(g(null),y(!1),j.current=!1)})},300);return()=>{e=!0,clearTimeout(t),j.current=!1}},[p,l]);const C=t.filter(e=>!e.isDirectory);return(0,_e.jsx)("div",{className:h,children:(0,_e.jsxs)("div",{className:le,children:[(0,_e.jsxs)("div",{className:ce,children:[(0,_e.jsxs)("div",{className:X,children:[(0,_e.jsx)("h4",{children:"Console Output"}),(0,_e.jsxs)("div",{className:q,children:[(0,_e.jsx)("button",{onClick:r,className:"button button--secondary button--sm",children:"Clear"}),(0,_e.jsx)("button",{onClick:o,disabled:!s,className:"button button--secondary button--sm",children:"List Files"})]})]}),(0,_e.jsx)("div",{ref:c,className:se,children:0===e.length?"Waiting for LAMMPS to initialize...":e.map((e,t)=>(0,_e.jsx)("div",{className:e.isError?ne:"",children:e.text},t))}),C.length>0&&(0,_e.jsxs)("div",{className:H,children:[(0,_e.jsx)("h4",{children:"Output Files"}),(0,_e.jsx)("div",{className:ae,children:C.map(e=>(0,_e.jsxs)("div",{className:re,children:[(0,_e.jsxs)("span",{className:oe,children:[e.name,(0,_e.jsx)("span",{className:ie,children:e.size>1024?`${(e.size/1024).toFixed(1)} KB`:`${e.size} B`})]}),(0,_e.jsx)("button",{className:"button button--primary button--sm",onClick:()=>i(e.name),disabled:!s,children:"Download"})]},e.name))})]})]}),(0,_e.jsxs)("div",{className:ue,children:[(0,_e.jsxs)("div",{className:ye,children:[(0,_e.jsx)("button",{className:`${be} ${"thermo"===u?je:""}`,onClick:()=>d("thermo"),children:"Thermo"}),(0,_e.jsxs)("button",{className:`${be} ${"data"===u?je:""}`,onClick:()=>d("data"),disabled:0===S.length&&!l,children:["Data ",S.length>0&&`(${S.length})`]})]}),(0,_e.jsx)("div",{className:ve,children:"thermo"===u?(0,_e.jsx)(Te,{output:e,isRunning:a}):(0,_e.jsxs)(_e.Fragment,{children:[S.length>0&&(0,_e.jsxs)("div",{className:xe,children:[(0,_e.jsx)("label",{children:"File:"}),(0,_e.jsx)("select",{value:p,onChange:e=>m(e.target.value),children:S.map(e=>(0,_e.jsx)("option",{value:e.name,children:e.name},e.name))})]}),(0,_e.jsx)(Ae,{data:f,filename:p,isLoading:x})]})})]})]})})},ze=n.lazy(()=>Promise.all([s.e(1869),s.e(7851),s.e(6370)]).then(s.bind(s,6370))),Re=({trajectoryData:e,trajectoryFormat:t,trajectoryFilename:s,frameCount:a,isSimulationRunning:r,isPolling:o,topologyFile:i,trajectoryBinaryContent:l,atomTypes:c,elementMapping:u,onElementMappingChange:d,bonds:p})=>{const m="undefined"!=typeof window,f=(0,n.useMemo)(()=>{if(i&&m)return new File([i.content],i.name,{type:"chemical/x-pdb"})},[i,m]),g=(0,n.useMemo)(()=>{if(l&&s&&m&&"dcd"===t)return new File([l],s,{type:"application/octet-stream"})},[l,s,t,m]),x="dcd"===t&&f&&g,y=e||x,b=!y&&f;return y||b?(0,_e.jsx)("div",{className:h,children:(0,_e.jsxs)("div",{className:V,children:[(0,_e.jsxs)("div",{className:J,children:[(0,_e.jsx)("span",{className:Z,children:b?(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("strong",{children:i?.name}),(0,_e.jsx)("span",{children:" (initial structure)"})]}):s?(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("strong",{children:s}),a>0&&(0,_e.jsxs)("span",{children:[" (",a," frames)"]})]}):null}),r&&(0,_e.jsxs)("span",{className:K,children:[(0,_e.jsx)("span",{className:G}),"Live"]})]}),(0,_e.jsx)("div",{className:Y,children:m?(0,_e.jsx)(n.Suspense,{fallback:(0,_e.jsx)("div",{className:te,children:"Loading viewer..."}),children:b?(0,_e.jsx)(ze,{structureFile:f,moleculeName:"Initial Structure",autoPlay:!1,autoBond:!i?.hasExplicitBonds,atomTypes:c,elementMapping:u,onElementMappingChange:d}):x?(0,_e.jsx)(ze,{structureFile:f,trajectoryFile:g,moleculeName:"LAMMPS Trajectory",autoPlay:!1,autoBond:!i?.hasExplicitBonds,atomTypes:c,elementMapping:u,onElementMappingChange:d}):"xyz"===t||"lammpstrj"===t?(0,_e.jsx)(ze,{trajectoryData:e,moleculeName:"LAMMPS Trajectory",autoPlay:!1,autoBond:!p||0===p.length,bonds:p,atomTypes:c,elementMapping:u,onElementMappingChange:d}):(0,_e.jsx)("div",{className:Q,children:(0,_e.jsxs)("div",{className:ee,children:[(0,_e.jsxs)("p",{children:["Unsupported trajectory format: ",t]}),(0,_e.jsx)("small",{children:"Supported formats: XYZ, LAMMPSTRJ, or DCD (with PDB topology)."})]})})}):(0,_e.jsx)("div",{className:Q,children:(0,_e.jsx)("div",{className:ee,children:(0,_e.jsx)("p",{children:"Viewer not available during server-side rendering."})})})})]})}):(0,_e.jsx)("div",{className:h,children:(0,_e.jsx)("div",{className:Q,children:(0,_e.jsx)("div",{className:ee,children:r?(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsxs)("div",{className:K,children:[(0,_e.jsx)("span",{className:G}),"Simulation running..."]}),(0,_e.jsx)("p",{children:"Waiting for trajectory data..."}),o&&(0,_e.jsx)("small",{children:"Polling for trajectory files every 2 seconds"})]}):(0,_e.jsxs)(_e.Fragment,{children:[(0,_e.jsx)("p",{children:"No structure to display"}),(0,_e.jsx)("small",{children:"Upload a PDB file to view the initial structure, or run a simulation with trajectory output."})]})})})})},Pe=e=>/\.(pdb|ent|pqr|gro)$/i.test(e),Ie=e=>/coord\.lmp$/i.test(e)||/data\.lmp$/i.test(e)||/\.data$/i.test(e),Be=[{id:"input",label:"Input"},{id:"output",label:"Output"},{id:"viewer",label:"Viewer"}],Oe=()=>{const[e,t]=(0,n.useState)("input"),[a,h]=(0,n.useState)(new Map),[g,x]=(0,n.useState)(""),[y,b]=(0,n.useState)(Se),[j,v]=(0,n.useState)(!1),{savedState:S,saveInputs:C,saveOutputs:N,clearStorage:E,hasStoredData:F}=Ee(),M=(0,n.useRef)(!1),[k,w]=(0,n.useState)(null),[_,$]=(0,n.useState)(null),[L,T]=(0,n.useState)(null),[A,D]=(0,n.useState)(null),[z,R]=(0,n.useState)(0),[P,I]=(0,n.useState)(0),[B,O]=(0,n.useState)(new Map),W=(0,n.useMemo)(()=>{console.log("[LAMMPS Debug] Checking uploaded files:",Array.from(a.keys()));for(const[t,s]of a)if(console.log(`[LAMMPS Debug] File "${t}" - isLammpsCoordFile: ${Ie(t)}`),Ie(t))try{const e=(new TextDecoder).decode(s),n=we(e);if(console.log("[LAMMPS Debug] Parsed result:",n?{atoms:n.atoms.length,bonds:n.bonds.length,masses:n.masses,atomTypes:n.atomTypes}:null),n)return{data:n,filename:t}}catch(e){console.warn("Failed to parse LAMMPS data file:",e)}return null},[a]);(0,n.useEffect)(()=>{if(W&&0===B.size){const e=new Map;if(W.data.masses.length>0)for(const{type:t,mass:s}of W.data.masses){const n=[[1.008,"H"],[12.01,"C"],[14.01,"N"],[16,"O"],[19,"F"],[32.06,"S"],[35.45,"Cl"],[39.95,"Ar"]];let a="X",r=1/0;for(const[e,t]of n){const n=Math.abs(s-e);n<r&&(r=n,a=t)}e.set(t,r<1.5?a:"X")}else if(W.data.atomTypes>0){for(let t=1;t<=W.data.atomTypes;t++)e.set(t,"X");console.log("[LAMMPS Debug] No masses found, initialized default mapping for",W.data.atomTypes,"types")}O(e)}},[W,B.size]);const U=(0,n.useMemo)(()=>{for(const[e,t]of a)if(Pe(e))return console.log("[LAMMPS Debug] Found native topology file:",e),{name:e,content:t,hasExplicitBonds:!0};if(W){console.log("[LAMMPS Debug] Converting LAMMPS data to PDB with element mapping:",Object.fromEntries(B));const e=((e,t)=>{const s=new Map;if(t)t.forEach((e,t)=>s.set(t,e));else for(const{type:u,mass:d}of e.masses)s.set(u,ke(d));const n=[...e.atoms].sort((e,t)=>e.id-t.id),a=new Map;n.forEach((e,t)=>{a.set(e.id,t+1)});const r=[],o=e.box.xhi-e.box.xlo,i=e.box.yhi-e.box.ylo,l=e.box.zhi-e.box.zlo;r.push(`CRYST1${o.toFixed(3).padStart(9)}${i.toFixed(3).padStart(9)}${l.toFixed(3).padStart(9)}  90.00  90.00  90.00 P 1           1`);for(let u=0;u<n.length;u++){const e=n[u],t=s.get(e.type)||"X",a=((u+1)%1e5).toString().padStart(5),o=t.padEnd(4),i="MOL",l=String.fromCharCode(65+e.moleculeId%26),c=(e.moleculeId%1e4).toString().padStart(4),d=e.x.toFixed(3).padStart(8),p=e.y.toFixed(3).padStart(8),m=e.z.toFixed(3).padStart(8);r.push(`ATOM  ${a} ${o} ${i} ${l}${c}    ${d}${p}${m}  1.00  0.00           ${t.padStart(2)}`)}const c=new Map;for(const u of e.bonds){const e=a.get(u.atom1),t=a.get(u.atom2);e&&t&&(c.has(e)||c.set(e,[]),c.has(t)||c.set(t,[]),c.get(e).push(t),c.get(t).push(e))}for(const[u,d]of c){const e=[...d].sort((e,t)=>e-t);for(let t=0;t<e.length;t+=4){const s=e.slice(t,t+4);let n=`CONECT${u.toString().padStart(5)}`;for(const e of s)n+=e.toString().padStart(5);r.push(n)}}return r.push("END"),r.join("\n")})(W.data,B.size>0?B:void 0);console.log("[LAMMPS Debug] Generated PDB (first 500 chars):",e.substring(0,500)),console.log("[LAMMPS Debug] PDB has CONECT records:",e.includes("CONECT"));const t=new TextEncoder;return{name:W.filename.replace(/\.\w+$/,".pdb"),content:t.encode(e).buffer,hasExplicitBonds:W.data.bonds.length>0}}return console.log("[LAMMPS Debug] No topology file found"),null},[a,W,B]),H=(0,n.useMemo)(()=>{if(W){if(W.data.masses.length>0)return W.data.masses;if(W.data.atomTypes>0){const e=[];for(let t=1;t<=W.data.atomTypes;t++)e.push({type:t,mass:0});return e}}},[W]),{worker:X,isReady:q,isRunning:V,status:J,output:Z,vfsFiles:K,trajectoryFiles:G,trajectoryContent:Y,appendOutput:Q,clearOutput:ee,uploadFile:te,deleteFile:se,runSimulation:ne,cancelSimulation:ae,listFiles:re,getFile:oe,getFileContentAsText:ie,pollTrajectory:le,fetchTrajectory:ce,clearTrajectoryContent:ue,reuploadFiles:de}=function(){const[e,t]=(0,n.useState)(null),[a,r]=(0,n.useState)(!1),[o,i]=(0,n.useState)(!1),[l,c]=(0,n.useState)("Loading LAMMPS..."),[u,d]=(0,n.useState)([]),[p,m]=(0,n.useState)([]),[f,h]=(0,n.useState)([]),[g,x]=(0,n.useState)(null),y=(0,n.useRef)(null),b=(0,n.useRef)(new Map),j=(0,n.useRef)(new Map);(0,n.useRef)({isReady:a,pendingFiles:b.current}).current={isReady:a,pendingFiles:b.current};const v=(0,n.useCallback)((e,t=!1)=>{d(s=>[...s,{text:e,isError:t}])},[]),S=(0,n.useCallback)(()=>{d([])},[]),C=(0,n.useCallback)(()=>{x(null),h([])},[]);(0,n.useEffect)(()=>((async()=>{try{d(e=>[...e,{text:"Creating LAMMPS Web Worker...",isError:!1}]);const e=new Worker(new URL(s.p+s.u(9066),s.b),{type:void 0});e.onmessage=e=>{const{type:t,data:s}=e.data,n=e.target;switch(t){case"ready":d(e=>[...e,{text:s,isError:!1}]);const e=b.current;if(e.size>0){d(t=>[...t,{text:`Re-uploading ${e.size} file(s) to new worker...`,isError:!1}]);for(const[t,s]of e)n.postMessage({type:"upload-file",data:{name:t,content:s}})}c("Ready"),r(!0);break;case"stdout":d(e=>[...e,{text:s,isError:!1}]);break;case"stderr":d(e=>[...e,{text:s,isError:!0}]);break;case"completed":d(e=>[...e,{text:s.message,isError:!1}]),d(e=>[...e,{text:"Checking for output files...",isError:!1}]),c("Complete"),i(!1),setTimeout(()=>{n.postMessage({type:"list-files",data:{}})},500);break;case"cancelled":d(e=>[...e,{text:s,isError:!1}]),c("Cancelled"),i(!1);break;case"error":d(e=>[...e,{text:s,isError:!0}]),c("Error"),i(!1);break;case"file-uploaded":d("string"==typeof s?e=>[...e,{text:s,isError:!1}]:e=>[...e,{text:`Uploaded: ${s.filename} (${s.size} bytes)`,isError:!1}]);break;case"file-deleted":d("string"==typeof s?e=>[...e,{text:s,isError:!1}]:e=>[...e,{text:`Deleted: ${s.filename}`,isError:!1}]);break;case"file-not-found":d(e=>[...e,{text:s.message,isError:!0}]);break;case"file-list":m(s),0===s.length?d(e=>[...e,{text:"VFS is empty - no files found",isError:!1}]):(d(e=>[...e,{text:`VFS contains ${s.length} file(s):`,isError:!1}]),s.forEach(e=>{if(!e.isDirectory){const t=e.size>1024?`${(e.size/1024).toFixed(1)} KB`:`${e.size} B`;d(s=>[...s,{text:`  \u2192 ${e.name} (${t})`,isError:!1}])}}));break;case"file-content":const t=j.current.get(s.filename);if(t)t((new TextDecoder).decode(s.content)),j.current.delete(s.filename);else{const e=new Blob([s.content],{type:"application/octet-stream"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=s.filename,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t),d(e=>[...e,{text:`Downloaded: ${s.filename} (${s.size} bytes)`,isError:!1}])}break;case"trajectory-files":h(s);break;case"trajectory-content":x(s)}},e.onerror=e=>{d(t=>[...t,{text:`Worker error: ${e.message}`,isError:!0}]),c("Error")},t(e),y.current=e,d(e=>[...e,{text:"Web Worker created, initializing LAMMPS...",isError:!1}]),e.postMessage({type:"init"})}catch(e){d(t=>[...t,{text:`Failed to create worker: ${e.message}`,isError:!0}]),c("Error")}})(),()=>{y.current?.terminate()}),[]);const N=(0,n.useCallback)((e,t)=>{b.current.set(e,t),y.current&&a&&y.current.postMessage({type:"upload-file",data:{name:e,content:t}})},[a]),E=(0,n.useCallback)(e=>{b.current.delete(e),y.current&&a&&y.current.postMessage({type:"delete-file",data:{filename:e}})},[a]),F=(0,n.useCallback)((e,t)=>{a&&y.current?(c("Running..."),i(!0),y.current.postMessage({type:"run-lammps",data:{inputFile:e,inputContent:t}})):d(e=>[...e,{text:"LAMMPS worker not ready yet!",isError:!0}])},[a]),M=(0,n.useCallback)(()=>e=>{const{type:t,data:s}=e.data,n=e.target;switch(t){case"ready":d(e=>[...e,{text:s,isError:!1}]);const e=b.current;if(e.size>0){d(t=>[...t,{text:`Re-uploading ${e.size} file(s) to new worker...`,isError:!1}]);for(const[t,s]of e)n.postMessage({type:"upload-file",data:{name:t,content:s}})}c("Ready"),r(!0);break;case"stdout":d(e=>[...e,{text:s,isError:!1}]);break;case"stderr":d(e=>[...e,{text:s,isError:!0}]);break;case"completed":d(e=>[...e,{text:s.message,isError:!1}]),d(e=>[...e,{text:"Checking for output files...",isError:!1}]),c("Complete"),i(!1),setTimeout(()=>{n.postMessage({type:"list-files",data:{}})},500);break;case"cancelled":d(e=>[...e,{text:s,isError:!1}]),c("Cancelled"),i(!1);break;case"error":d(e=>[...e,{text:s,isError:!0}]),c("Error"),i(!1);break;case"file-uploaded":d("string"==typeof s?e=>[...e,{text:s,isError:!1}]:e=>[...e,{text:`Uploaded: ${s.filename} (${s.size} bytes)`,isError:!1}]);break;case"file-deleted":d("string"==typeof s?e=>[...e,{text:s,isError:!1}]:e=>[...e,{text:`Deleted: ${s.filename}`,isError:!1}]);break;case"file-not-found":d(e=>[...e,{text:s.message,isError:!0}]);break;case"file-list":m(s),0===s.length?d(e=>[...e,{text:"VFS is empty - no files found",isError:!1}]):(d(e=>[...e,{text:`VFS contains ${s.length} file(s):`,isError:!1}]),s.forEach(e=>{if(!e.isDirectory){const t=e.size>1024?`${(e.size/1024).toFixed(1)} KB`:`${e.size} B`;d(s=>[...s,{text:`  \u2192 ${e.name} (${t})`,isError:!1}])}}));break;case"file-content":const t=j.current.get(s.filename);if(t)t((new TextDecoder).decode(s.content)),j.current.delete(s.filename);else{const e=new Blob([s.content],{type:"application/octet-stream"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=s.filename,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t),d(e=>[...e,{text:`Downloaded: ${s.filename} (${s.size} bytes)`,isError:!1}])}break;case"trajectory-files":h(s);break;case"trajectory-content":x(s)}},[]),k=(0,n.useCallback)(()=>{o&&y.current&&(d(e=>[...e,{text:"Cancelling simulation and restarting worker...",isError:!0}]),y.current.terminate(),y.current=null,t(null),r(!1),i(!1),c("Cancelled - Restarting..."),setTimeout(()=>{const e=new Worker(new URL(s.p+s.u(6685),s.b),{type:void 0});e.onmessage=M(),e.onerror=e=>{d(t=>[...t,{text:`Worker error: ${e.message}`,isError:!0}]),c("Error")},t(e),y.current=e,e.postMessage({type:"init"})},500))},[o,M]),w=(0,n.useCallback)(()=>{a&&y.current?y.current.postMessage({type:"list-files",data:{}}):d(e=>[...e,{text:"Worker not ready yet!",isError:!0}])},[a]),_=(0,n.useCallback)(e=>{a&&y.current?(d(t=>[...t,{text:`Downloading ${e}...`,isError:!1}]),y.current.postMessage({type:"get-file",data:{filename:e}})):d(e=>[...e,{text:"Worker not ready yet!",isError:!0}])},[a]),$=(0,n.useCallback)(e=>new Promise(t=>{a&&y.current?j.current.has(e)?t(null):(j.current.set(e,t),y.current.postMessage({type:"get-file",data:{filename:e}}),setTimeout(()=>{j.current.has(e)&&(j.current.delete(e),t(null))},1e4)):t(null)}),[a]),L=(0,n.useCallback)(()=>{y.current&&y.current.postMessage({type:"poll-trajectory",data:{}})},[]),T=(0,n.useCallback)(e=>{y.current&&y.current.postMessage({type:"get-trajectory",data:{filename:e}})},[]),A=(0,n.useCallback)(e=>{b.current=new Map(e)},[]);return{worker:e,isReady:a,isRunning:o,status:l,output:u,vfsFiles:p,trajectoryFiles:f,trajectoryContent:g,appendOutput:v,clearOutput:S,uploadFile:N,deleteFile:E,runSimulation:F,cancelSimulation:k,listFiles:w,getFile:_,getFileContentAsText:$,pollTrajectory:L,fetchTrajectory:T,clearTrajectoryContent:C,reuploadFiles:A}}();(0,n.useEffect)(()=>{if(!M.current&&S&&q){if(M.current=!0,S.uploadedFiles&&Object.keys(S.uploadedFiles).length>0){const e=function(e){const t=new Map;for(const[s,n]of Object.entries(e))t.set(s,Ne(n));return t}(S.uploadedFiles);h(e),e.forEach((e,t)=>{te(t,e)})}S.selectedMainFile&&x(S.selectedMainFile),S.inputScript&&b(S.inputScript),S.output&&S.output.length>0&&S.output.forEach(e=>Q(e.text,e.isError)),console.log("[LAMMPS] Restored state from local storage")}},[S,q,te,Q]),(0,n.useEffect)(()=>{"Complete"===J&&Z.length>0&&N(Z)},[J,Z,N]);const[pe,me]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(G.length>0){const e=G.find(e=>"dcd"===e.format)||G[0];e.size>P&&ce(e.filename)}},[G,P,ce]),(0,n.useEffect)(()=>{if(Y&&Y.size>0){I(Y.size);let e="xyz";if(/\.dcd$/i.test(Y.filename)?e="dcd":/\.lammpstrj$/i.test(Y.filename)&&(e="lammpstrj"),$(e),T(Y.filename),"xyz"===e||"lammpstrj"===e){const e=(new TextDecoder).decode(Y.content);w(e),D(null);const t=(e=>{const t=e.trim().split("\n");let s=0,n=0;for(;n<t.length;){const e=parseInt(t[n],10);!isNaN(e)&&e>0?(s++,n+=e+2):n++}return s})(e);R(t)}else"dcd"===e&&(w(null),D(Y.content.buffer),R(0))}},[Y]),(0,n.useEffect)(()=>{let e=null;return V?(me(!0),e=setInterval(()=>{le()},2e3)):(me(!1),X&&setTimeout(()=>{le()},500)),()=>{e&&clearInterval(e)}},[V,X,le]),(0,n.useEffect)(()=>{if(!j)if(g&&a.has(g)){const e=a.get(g);if(e){const t=(new TextDecoder).decode(e);b(t)}}else b(Se)},[g,a,j]),(0,n.useEffect)(()=>{de(a)},[a,de]);const fe=(0,n.useCallback)(e=>{const t=new Map(a);let s=0;const n=e.length;Q(`Starting upload of ${n} file(s)...`),Array.from(e).forEach(a=>{const r=new FileReader;r.onload=r=>{const o=r.target?.result;if(t.set(a.name,o),s++,Q(`Read file: ${a.name} (${o.byteLength} bytes)`),s===n){if(h(new Map(t)),!g){const e=(e=>{const t=e.find(e=>/\.inp$/i.test(e));if(t)return t;const s=e.find(e=>"input.lmp"===e.toLowerCase());if(s)return s;const n=e.find(e=>/input/i.test(e)&&/\.(lmp|in)$/i.test(e));if(n)return n;const a=e.find(e=>/\.(lmp|in)$/i.test(e));if(a)return a;return e.find(e=>/input/i.test(e))||null})(Array.from(t.keys()));e&&(x(e),Q(`Auto-detected main input file: ${e}`))}X&&q&&(Q(`Sending ${n} file(s) to LAMMPS worker...`),Array.from(e).forEach(e=>{const s=t.get(e.name);s&&te(e.name,s)}))}},r.onerror=()=>{Q(`Failed to read file: ${a.name}`,!0),s++},r.readAsArrayBuffer(a)})},[a,g,X,q,Q,te]),he=(0,n.useCallback)(e=>{const t=new Map(a);t.delete(e),h(t),g===e&&(x(""),v(!1)),se(e)},[a,g,se]),ge=(0,n.useCallback)(e=>{x(e),v(!1)},[]),xe=(0,n.useCallback)(e=>{if(b(e),v(!0),g){const t=new TextEncoder,s=new Map(a);s.set(g,t.encode(e).buffer),h(s)}},[g,a]),ye=(0,n.useCallback)(()=>{E(),h(new Map),x(""),b(Se),v(!1),w(null),$(null),T(null),D(null),R(0),I(0),ue(),O(new Map),ee(),t("input"),Q("Cleared all saved data and reset state.")},[E,ee,ue,Q]),be=(0,n.useCallback)(()=>{C(a,g,y),ee(),w(null),$(null),T(null),D(null),R(0),I(0),ue();try{const e=y.trim();if(g){if(j){Q(`Uploading edited version of ${g}...`);const e=new TextEncoder;te(g,e.encode(y).buffer)}ne(g)}else e?ne("input.lmp",e):Q("No input provided! Either select a main input file or enter commands.",!0)}catch(e){Q(`Error: ${e.message}`,!0)}},[y,g,j,Q,te,ne,ue,ee,C,a]),je=Z.filter(e=>e.isError).length;return(0,_e.jsxs)("div",{className:r,children:[(0,_e.jsxs)("div",{className:o,children:[(0,_e.jsx)("div",{className:i,children:Be.map(({id:s,label:n})=>{const a=e===s,r="output"===s&&je>0?je:"viewer"===s&&z>0?z:void 0;return(0,_e.jsxs)("button",{onClick:()=>t(s),className:`${c} ${a?u:""}`,children:[n,void 0!==r&&(0,_e.jsx)("span",{className:`${d} ${"output"===s&&je>0?p:""}`,children:r}),"viewer"===s&&pe&&(0,_e.jsx)("span",{className:m})]},s)})}),(0,_e.jsx)("button",{className:l,onClick:ye,disabled:V,title:"Clear saved state and reset",children:"Clear"})]}),(0,_e.jsxs)("div",{className:f,children:["input"===e&&(0,_e.jsx)($e,{uploadedFiles:a,selectedMainFile:g,inputScript:y,isReady:q,isRunning:V,status:J,onFileUpload:fe,onFileDelete:he,onMainFileSelect:ge,onScriptChange:xe,onRun:be,onCancel:ae}),"output"===e&&(0,_e.jsx)(De,{output:Z,vfsFiles:K,isReady:q,isRunning:V,onClearOutput:ee,onListFiles:re,onDownloadFile:oe,onFetchFileContent:ie}),"viewer"===e&&(0,_e.jsx)(Re,{trajectoryData:k,trajectoryFormat:_,trajectoryFilename:L,frameCount:z,isSimulationRunning:V,isPolling:pe,topologyFile:U,trajectoryBinaryContent:A,atomTypes:H,elementMapping:B,onElementMappingChange:O,bonds:W?.data.bonds.map(e=>[e.atom1,e.atom2])})]})]})};function We(){return(0,_e.jsx)(a.A,{title:"LAMMPS Interface",description:"Run LAMMPS molecular dynamics simulations in your browser",wrapperClassName:"layout-wrapper--full-height",children:(0,_e.jsx)("div",{className:"container-fluid",style:{height:"100%",padding:"1rem"},children:(0,_e.jsx)(Oe,{})})})}}}]);