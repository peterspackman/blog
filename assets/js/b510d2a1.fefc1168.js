"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[995],{1790:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});r(6540);var l=r(1410),i=r(2477),o=r(4848);const a={name:"Sodium Chloride (NaCl)",description:"Rock salt structure - face-centered cubic",formula:"NaCl",unitCell:{a:5.64,b:5.64,c:5.64,alpha:90,beta:90,gamma:90},atoms:[{element:"Na",position:[0,0,0],label:"Na1"},{element:"Na",position:[0,.5,.5],label:"Na2"},{element:"Na",position:[.5,0,.5],label:"Na3"},{element:"Na",position:[.5,.5,0],label:"Na4"},{element:"Cl",position:[.5,.5,.5],label:"Cl1"},{element:"Cl",position:[.5,0,0],label:"Cl2"},{element:"Cl",position:[0,.5,0],label:"Cl3"},{element:"Cl",position:[0,0,.5],label:"Cl4"}],spaceGroup:"Fm-3m"};function n(){return(0,o.jsx)(l.A,{title:"Custom Crystal Structure Test",description:"Testing custom crystal structure functionality",children:(0,o.jsxs)("main",{style:{padding:"2rem"},children:[(0,o.jsx)("h1",{children:"Custom Crystal Structure Test"}),(0,o.jsx)("p",{children:"This page demonstrates the custom crystal structure functionality with atom filtering options."}),(0,o.jsxs)("div",{style:{marginBottom:"1rem",padding:"1rem",backgroundColor:"#f0f8ff",borderRadius:"8px"},children:[(0,o.jsx)("h3",{children:"Try these features:"}),(0,o.jsxs)("ul",{children:[(0,o.jsxs)("li",{children:[(0,o.jsx)("strong",{children:"Atom Display Mode:"}),' Switch between "All Atoms", "Unit Cell Only", or "Custom Range"']}),(0,o.jsxs)("li",{children:[(0,o.jsx)("strong",{children:"Element Filtering:"}),' Try showing only Na or Cl atoms by typing the element symbol in "Show Elements"']}),(0,o.jsxs)("li",{children:[(0,o.jsx)("strong",{children:"Hide Elements:"}),' Hide specific elements by typing them in "Hide Elements"']}),(0,o.jsxs)("li",{children:[(0,o.jsx)("strong",{children:"Representations:"})," Switch between ball+stick, spacefill, and other visualization styles"]})]})]}),(0,o.jsx)("div",{style:{margin:"2rem 0"},children:(0,o.jsx)(i.q4,{customStructure:a,children:(0,o.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"nowrap"},children:[(0,o.jsx)("div",{style:{width:"70%",flexShrink:0},children:(0,o.jsx)(i.Q3,{height:"500px"})}),(0,o.jsxs)("div",{style:{width:"30%",flexShrink:0},children:[(0,o.jsx)(i.Vh,{}),(0,o.jsxs)("div",{style:{marginTop:"1rem",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px"},children:[(0,o.jsx)("h4",{children:"Custom Structure Info"}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Name:"})," ",a.name]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Formula:"})," ",a.formula]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Unit Cell:"})," a=",a.unitCell.a,"\xc5"]}),(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"Atoms:"})," ",a.atoms.length]})]})]})]})})})]})})}},2477:(e,t,r)=>{r.d(t,{Vh:()=>h,RG:()=>x,j5:()=>y,q4:()=>n,rM:()=>c,Q3:()=>p});var l=r(6540),i=r(4848);const o=(0,l.createContext)(void 0),a=()=>{const e=(0,l.useContext)(o);if(!e)throw new Error("useCrystal must be used within a CrystalProvider");return e},n=e=>{let{children:t,initialState:r,customStructure:a}=e;const[n,s]=(0,l.useState)({currentStructure:a?"custom":"",customStructure:a,displayOptions:{showUnitCell:!0,showAxes:!1,representation:"ball+stick",colorScheme:"element"},atomDisplay:{mode:"all",showElements:void 0,hideElements:void 0},...r}),d={state:n,updateStructure:(0,l.useCallback)((e=>{s((t=>({...t,currentStructure:e,customStructure:"custom"===e?t.customStructure:void 0})))}),[]),updateCustomStructure:(0,l.useCallback)((e=>{s((t=>({...t,currentStructure:"custom",customStructure:e})))}),[]),updateDisplayOptions:(0,l.useCallback)((e=>{s((t=>({...t,displayOptions:{...t.displayOptions,...e}})))}),[]),updateAtomDisplay:(0,l.useCallback)((e=>{s((t=>({...t,atomDisplay:{...t.atomDisplay,...e}})))}),[])};return(0,i.jsx)(o.Provider,{value:d,children:t})},s=Object.values({"NaCl.pdb":{id:"NaCl.pdb",name:"Sodium Chloride (Salt)",description:"Rock salt structure - two interpenetrating FCC lattices",system:"Cubic",formula:"NaCl"},"diamond.pdb":{id:"diamond.pdb",name:"Diamond",description:"Face-centered cubic structure with tetrahedral coordination",system:"Cubic",formula:"C"},"calcite.pdb":{id:"calcite.pdb",name:"Calcite",description:"Calcium carbonate with trigonal symmetry",system:"Trigonal",formula:"CaCO\u2083"},"graphite.pdb":{id:"graphite.pdb",name:"Graphite",description:"Layered structure with hexagonal symmetry",system:"Hexagonal",formula:"C"}}),d=(0,l.createContext)(void 0),c=e=>{let{children:t,structures:r=s}=e;const l={availableStructures:r,getStructureById:e=>r.find((t=>t.id===e))};return(0,i.jsx)(d.Provider,{value:l,children:t})};var m=r(7851);const u=(e,t)=>{const{a:r,b:l,c:i,alpha:o,beta:a,gamma:n}=t,[s,d,c]=e,m=o*Math.PI/180,u=a*Math.PI/180,p=n*Math.PI/180,h=Math.cos(m),x=Math.cos(u),g=Math.cos(p),y=Math.sin(p);return[r*s+l*g*d+i*x*c,l*y*d+i*(h-x*g)/y*c,r*l*i*Math.sqrt(1+2*h*x*g-h*h-x*x-g*g)/(r*l*y)*c]},p=e=>{let{height:t="400px",structure:r}=e;const o=(0,l.useRef)(null),[n,s]=(0,l.useState)(null),[d,c]=(0,l.useState)(null),[p,h]=(0,l.useState)(!1),[x,g]=(0,l.useState)(""),{state:y}=a(),b=r||y.currentStructure;(0,l.useEffect)((()=>{if(o.current)try{const e=new m.BI(o.current,{backgroundColor:"white",quality:"medium"}),t=()=>{e.handleResize()};return window.addEventListener("resize",t),s(e),()=>{window.removeEventListener("resize",t),e&&e.dispose()}}catch(x){console.error("Error initializing NGL Stage:",x),g("Failed to initialize viewer. Please refresh the page.")}}),[]),(0,l.useEffect)((()=>{n&&b&&("custom"===b&&y.customStructure?d&&d._isCustom||C(y.customStructure):""!==b?f(b):d&&(n.removeComponent(d),c(null)))}),[n,b]),(0,l.useEffect)((()=>{n&&"custom"===b&&y.customStructure&&d&&C(y.customStructure)}),[y.customStructure]),(0,l.useEffect)((()=>{d&&S()}),[y.displayOptions,d]),(0,l.useEffect)((()=>{d&&"custom"===y.currentStructure&&y.customStructure&&C(y.customStructure)}),[y.atomDisplay]);const f=async e=>{if(n){h(!0),g(""),d&&(n.removeComponent(d),c(null));try{let t;if(e.startsWith("blob:"))t=await n.loadFile(e,{ext:"pdb",defaultRepresentation:!1});else{const r=`/pdb/${e}`;t=await n.loadFile(r,{defaultRepresentation:!1})}c(t),S(t),n.autoView(),h(!1)}catch(t){console.error("Structure loading error:",t),g(`Failed to load structure: ${t.message||"Unknown error"}`),h(!1)}}},C=async e=>{if(n){h(!0),g(""),d&&(n.removeComponent(d),c(null));try{const t=((e,t)=>{let r="";r+=`HEADER    CUSTOM CRYSTAL STRUCTURE                     ${(new Date).toISOString().slice(0,10)}\n`,r+=`TITLE     ${e.name}\n`,e.formula&&(r+=`COMPND    ${e.formula}\n`);const{a:l,b:i,c:o,alpha:a,beta:n,gamma:s}=e.unitCell;r+=`CRYST1${l.toFixed(3).padStart(9)}${i.toFixed(3).padStart(9)}${o.toFixed(3).padStart(9)}`,r+=`${a.toFixed(2).padStart(7)}${n.toFixed(2).padStart(7)}${s.toFixed(2).padStart(7)} P 1           1\n`;let d=[[0,0],[0,0],[0,0]];if(t&&"all"!==t.mode){if("custom"===t.mode&&t.customRange){const{customRange:e}=t;d=[[Math.floor(e.x[0]),Math.ceil(e.x[1])],[Math.floor(e.y[0]),Math.ceil(e.y[1])],[Math.floor(e.z[0]),Math.ceil(e.z[1])]]}}else d=[[-1,1],[-1,1],[-1,1]];let c=0;for(let m=d[0][0];m<=d[0][1];m++)for(let t=d[1][0];t<=d[1][1];t++)for(let l=d[2][0];l<=d[2][1];l++)e.atoms.forEach((i=>{const o=[i.position[0]+m,i.position[1]+t,i.position[2]+l],[a,n,s]=u(o,e.unitCell);c++;const d=c.toString().padStart(5),p=i.element.padEnd(4),h="CRY".padEnd(3),x=(100*(m+1)+10*(t+1)+(l+1)).toString().padStart(4);r+=`ATOM  ${d} ${p} ${h} A${x}    `,r+=`${a.toFixed(3).padStart(8)}${n.toFixed(3).padStart(8)}${s.toFixed(3).padStart(8)}`,r+=`  1.00 20.00           ${i.element.padStart(2)}\n`}));return r+="END\n",r})(e,y.atomDisplay),r=new Blob([t],{type:"text/plain"}),l=new File([r],"custom.pdb",{type:"text/plain"}),i=await n.loadFile(l,{defaultRepresentation:!1});i._isCustom=!0,c(i),S(i),n.autoView(),h(!1)}catch(t){console.error("Custom structure loading error:",t),g(`Failed to load custom structure: ${t.message||"Unknown error"}`),h(!1)}}},S=function(e){if(void 0===e&&(e=d),!e)return;e.removeAllRepresentations();const t=(e=>{const t=[];if(e.showElements&&e.showElements.length>0){const r=e.showElements.map((e=>`_${e}`)).join(" or ");t.push(`(${r})`)}if(e.hideElements&&e.hideElements.length>0){const r=e.hideElements.map((e=>`_${e}`)).join(" or ");t.push(`not (${r})`)}return"unitCell"===e.mode&&t.push(":111"),0===t.length?"*":t.join(" and ")})(y.atomDisplay),r={colorScheme:y.displayOptions.colorScheme,sele:t};"ball+stick"===y.displayOptions.representation&&(r.multipleBond=!0,r.bondScale=.3,r.radius=.3),e.addRepresentation(y.displayOptions.representation,r),y.displayOptions.showUnitCell&&e.addRepresentation("unitcell",{name:"unitcell_box",color:"darkgray",linewidth:3,opacity:.9}),y.displayOptions.showAxes&&e.addRepresentation("axes",{name:"crystal_axes",scale:2.5,showAxes:["x","y","z"],showBox:!1})};return(0,i.jsxs)("div",{style:{position:"relative",width:"100%",height:t,border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden",backgroundColor:"#f8f9fa"},children:[(0,i.jsx)("div",{ref:o,style:{width:"100%",height:"100%"}}),p&&(0,i.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.9)",fontSize:"0.9rem",color:"#666"},children:"Loading crystal structure..."}),x&&(0,i.jsx)("div",{style:{position:"absolute",top:"10px",left:"10px",right:"10px",padding:"0.8rem",backgroundColor:"#fee",color:"#c53030",borderRadius:"6px",fontSize:"0.85rem"},children:x}),!p&&!x&&!d&&""===b&&(0,i.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(248, 249, 250, 0.95)",fontSize:"0.9rem",color:"#666"},children:(0,i.jsx)("div",{style:{textAlign:"center"},children:(0,i.jsx)("div",{style:{fontSize:"1.1rem",color:"#444"},children:"No crystal structure loaded"})})})]})},h=()=>{const{state:e,updateDisplayOptions:t,updateAtomDisplay:r}=a();return(0,i.jsxs)("div",{style:{padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #ddd"},children:[(0,i.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,i.jsx)("div",{style:{fontSize:"0.8rem",fontWeight:"500",color:"#666",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Display Options"}),(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.3rem"},children:[{key:"showUnitCell",label:"Unit Cell"},{key:"showAxes",label:"Axes"}].map((r=>(0,i.jsxs)("label",{style:{display:"flex",alignItems:"center",fontSize:"0.7rem",color:"#666"},children:[(0,i.jsx)("input",{type:"checkbox",checked:e.displayOptions[r.key],onChange:e=>t({[r.key]:e.target.checked}),style:{marginRight:"0.4rem"}}),r.label]},r.key)))})]}),(0,i.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,i.jsx)("div",{style:{fontSize:"0.8rem",fontWeight:"500",color:"#666",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Representation"}),(0,i.jsxs)("select",{value:e.displayOptions.representation,onChange:e=>t({representation:e.target.value}),style:{width:"100%",padding:"0.4rem",border:"1px solid #ddd",borderRadius:"4px",fontSize:"0.75rem",backgroundColor:"white"},children:[(0,i.jsx)("option",{value:"ball+stick",children:"Ball & Stick"}),(0,i.jsx)("option",{value:"spacefill",children:"Space Filling"}),(0,i.jsx)("option",{value:"cartoon",children:"Cartoon"}),(0,i.jsx)("option",{value:"surface",children:"Surface"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:"0.8rem",fontWeight:"500",color:"#666",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Color Scheme"}),(0,i.jsxs)("select",{value:e.displayOptions.colorScheme,onChange:e=>t({colorScheme:e.target.value}),style:{width:"100%",padding:"0.4rem",border:"1px solid #ddd",borderRadius:"4px",fontSize:"0.75rem",backgroundColor:"white"},children:[(0,i.jsx)("option",{value:"element",children:"By Element"}),(0,i.jsx)("option",{value:"residue",children:"By Residue"}),(0,i.jsx)("option",{value:"chainname",children:"By Chain"}),(0,i.jsx)("option",{value:"uniform",children:"Uniform"})]})]}),(0,i.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,i.jsx)("div",{style:{fontSize:"0.8rem",fontWeight:"500",color:"#666",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Atom Display"}),(0,i.jsx)("div",{style:{marginBottom:"0.5rem"},children:(0,i.jsxs)("select",{value:e.atomDisplay.mode,onChange:e=>r({mode:e.target.value}),style:{width:"100%",padding:"0.4rem",border:"1px solid #ddd",borderRadius:"4px",fontSize:"0.75rem",backgroundColor:"white",marginBottom:"0.3rem"},children:[(0,i.jsx)("option",{value:"all",children:"All Atoms (3x3x3)"}),(0,i.jsx)("option",{value:"unitCell",children:"Unit Cell Only"}),(0,i.jsx)("option",{value:"custom",children:"Custom Range"})]})}),(0,i.jsx)("div",{style:{fontSize:"0.7rem",color:"#666",marginBottom:"0.3rem"},children:"Show Elements (comma-separated):"}),(0,i.jsx)("input",{type:"text",placeholder:"e.g., Na,Cl",value:e.atomDisplay.showElements?.join(",")||"",onChange:e=>{const t=e.target.value?e.target.value.split(",").map((e=>e.trim())).filter((e=>e)):void 0;r({showElements:t})},style:{width:"100%",padding:"0.3rem",border:"1px solid #ddd",borderRadius:"4px",fontSize:"0.7rem",marginBottom:"0.3rem"}}),(0,i.jsx)("div",{style:{fontSize:"0.7rem",color:"#666",marginBottom:"0.3rem"},children:"Hide Elements (comma-separated):"}),(0,i.jsx)("input",{type:"text",placeholder:"e.g., H",value:e.atomDisplay.hideElements?.join(",")||"",onChange:e=>{const t=e.target.value?e.target.value.split(",").map((e=>e.trim())).filter((e=>e)):void 0;r({hideElements:t})},style:{width:"100%",padding:"0.3rem",border:"1px solid #ddd",borderRadius:"4px",fontSize:"0.7rem"}})]})]})},x=()=>{const{state:e,updateStructure:t}=a(),{availableStructures:r}=(()=>{const e=(0,l.useContext)(d);if(!e)throw new Error("useCrystalStructures must be used within a CrystalStructureProvider");return e})();return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:{marginBottom:"1rem",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #ddd"},children:[(0,i.jsx)("div",{style:{fontSize:"0.8rem",fontWeight:"500",color:"#666",marginBottom:"0.5rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Crystal Structure"}),(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"0.4rem"},children:r.map((r=>(0,i.jsxs)("button",{onClick:()=>t(r.id),style:{padding:"0.5rem",backgroundColor:r.id===e.currentStructure?"#e3f2fd":"white",border:"1px solid #ddd",borderRadius:"6px",cursor:"pointer",fontSize:"0.75rem",textAlign:"left",transition:"all 0.2s ease"},onMouseOver:t=>{r.id!==e.currentStructure&&(t.currentTarget.style.backgroundColor="#f5f5f5")},onMouseOut:t=>{r.id!==e.currentStructure&&(t.currentTarget.style.backgroundColor="white")},children:[(0,i.jsx)("div",{style:{fontWeight:"500",marginBottom:"0.2rem"},children:r.name}),r.formula&&(0,i.jsx)("div",{style:{fontSize:"0.7rem",color:"#888",marginBottom:"0.2rem"},children:r.formula}),(0,i.jsxs)("div",{style:{fontSize:"0.65rem",color:"#666",fontStyle:"italic"},children:[r.system," System"]})]},r.id)))})]}),(0,i.jsx)(h,{})]})},g={nacl:{name:"Sodium Chloride (NaCl)",unitCell:{a:5.64,b:5.64,c:5.64,alpha:90,beta:90,gamma:90},atoms:[{id:"1",element:"Na",x:0,y:0,z:0,label:"Na1"},{id:"2",element:"Na",x:0,y:.5,z:.5,label:"Na2"},{id:"3",element:"Na",x:.5,y:0,z:.5,label:"Na3"},{id:"4",element:"Na",x:.5,y:.5,z:0,label:"Na4"},{id:"5",element:"Cl",x:.5,y:.5,z:.5,label:"Cl1"},{id:"6",element:"Cl",x:.5,y:0,z:0,label:"Cl2"},{id:"7",element:"Cl",x:0,y:.5,z:0,label:"Cl3"},{id:"8",element:"Cl",x:0,y:0,z:.5,label:"Cl4"}]},bcc:{name:"Body-Centered Cubic (BCC)",unitCell:{a:2.866,b:2.866,c:2.866,alpha:90,beta:90,gamma:90},atoms:[{id:"1",element:"Fe",x:0,y:0,z:0,label:"Fe1"},{id:"2",element:"Fe",x:.5,y:.5,z:.5,label:"Fe2"}]},fcc:{name:"Face-Centered Cubic (FCC)",unitCell:{a:4.078,b:4.078,c:4.078,alpha:90,beta:90,gamma:90},atoms:[{id:"1",element:"Au",x:0,y:0,z:0,label:"Au1"},{id:"2",element:"Au",x:.5,y:.5,z:0,label:"Au2"},{id:"3",element:"Au",x:.5,y:0,z:.5,label:"Au3"},{id:"4",element:"Au",x:0,y:.5,z:.5,label:"Au4"}]},simple:{name:"Simple Cubic",unitCell:{a:3,b:3,c:3,alpha:90,beta:90,gamma:90},atoms:[{id:"1",element:"X",x:0,y:0,z:0,label:"X1"}]}},y=e=>{let{height:t="500px"}=e;const{updateCustomStructure:r}=a(),[o,n]=(0,l.useState)(""),[s,d]=(0,l.useState)("New Crystal Structure"),[c,m]=(0,l.useState)({a:3,b:3,c:3,alpha:90,beta:90,gamma:90}),[u,p]=(0,l.useState)([]),[h,x]=(0,l.useState)(""),y=(e,t)=>{m((r=>({...r,[e]:t})))},b=(e,t,r)=>{p((l=>l.map((l=>l.id===e?{...l,[t]:r}:l))))},f=(0,l.useCallback)((()=>{try{if(0===u.length)return void x("Structure must contain at least one atom");const e={name:s,description:`Custom structure with ${u.length} atoms`,unitCell:{a:c.a,b:c.b,c:c.c,alpha:c.alpha,beta:c.beta,gamma:c.gamma},atoms:u.map((e=>({element:e.element,position:[e.x,e.y,e.z]})))};r(e),x("")}catch(e){x(`Error applying structure: ${e.message}`)}}),[s,c,u,r]);return(0,l.useEffect)((()=>{if(0===u.length)return;const e=setTimeout((()=>{f()}),100);return()=>clearTimeout(e)}),[c,u,s,f]),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.8rem",padding:"1rem",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #ddd",height:t,overflow:"auto"},children:[(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.8rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"500",color:"#666",marginBottom:"0.2rem"},children:"Load Preset"}),(0,i.jsxs)("select",{value:o,onChange:e=>e.target.value&&(e=>{const t=g[e];n(e),d(t.name),m(t.unitCell),p(t.atoms),x("")})(e.target.value),style:{width:"100%",padding:"0.3rem",border:"1px solid #ddd",borderRadius:"4px",fontSize:"0.7rem"},children:[(0,i.jsx)("option",{value:"",children:"-- Select preset --"}),(0,i.jsx)("option",{value:"nacl",children:"NaCl (Rock Salt)"}),(0,i.jsx)("option",{value:"bcc",children:"BCC Iron"}),(0,i.jsx)("option",{value:"fcc",children:"FCC Gold"}),(0,i.jsx)("option",{value:"simple",children:"Simple Cubic"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"0.75rem",fontWeight:"500",color:"#666",marginBottom:"0.2rem"},children:"Structure Name"}),(0,i.jsx)("input",{type:"text",value:s,onChange:e=>d(e.target.value),style:{width:"100%",padding:"0.3rem",border:"1px solid #ddd",borderRadius:"4px",fontSize:"0.7rem"},placeholder:"Crystal name"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:"0.8rem",fontWeight:"500",color:"#666",marginBottom:"0.4rem"},children:"Unit Cell Parameters"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(80px, 1fr))",gap:"0.4rem"},children:[["a","b","c"].map((e=>(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{style:{fontSize:"0.65rem",color:"#666",display:"block"},children:[e," (\xc5)"]}),(0,i.jsx)("input",{type:"number",step:"0.1",value:c[e],onChange:t=>y(e,parseFloat(t.target.value)||0),style:{width:"100%",padding:"0.25rem",border:"1px solid #ddd",borderRadius:"3px",fontSize:"0.7rem"}})]},e))),["alpha","beta","gamma"].map((e=>(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{style:{fontSize:"0.65rem",color:"#666",display:"block"},children:[e," (\xb0)"]}),(0,i.jsx)("input",{type:"number",step:"0.5",value:c[e],onChange:t=>y(e,parseFloat(t.target.value)||0),style:{width:"100%",padding:"0.25rem",border:"1px solid #ddd",borderRadius:"3px",fontSize:"0.7rem"}})]},e)))]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[(0,i.jsx)("div",{style:{fontSize:"0.8rem",fontWeight:"500",color:"#666"},children:"Atoms (Fractional Coordinates)"}),(0,i.jsx)("button",{onClick:()=>{const e=(Math.max(...u.map((e=>parseInt(e.id))))+1).toString();p((t=>[...t,{id:e,element:"H",x:0,y:0,z:0,label:`H${e}`}]))},style:{padding:"0.3rem 0.6rem",backgroundColor:"#10b981",color:"white",border:"none",borderRadius:"4px",fontSize:"0.75rem",cursor:"pointer"},children:"+ Add Atom"})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"60px 1fr 1fr 1fr 80px 35px",gap:"0.3rem",fontSize:"0.65rem",color:"#666",marginBottom:"0.3rem",fontWeight:"500"},children:[(0,i.jsx)("div",{children:"Element"}),(0,i.jsx)("div",{children:"X"}),(0,i.jsx)("div",{children:"Y"}),(0,i.jsx)("div",{children:"Z"}),(0,i.jsx)("div",{children:"Label"}),(0,i.jsx)("div",{})]}),(0,i.jsx)("div",{style:{maxHeight:"180px",overflowY:"auto",border:"1px solid #e5e5e5",borderRadius:"4px",padding:"0.2rem"},children:0===u.length?(0,i.jsx)("div",{style:{textAlign:"center",padding:"2rem",color:"#999",fontSize:"0.8rem",fontStyle:"italic"},children:'No atoms yet. Click "Add Atom" to start building your crystal.'}):u.map((e=>(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"60px 1fr 1fr 1fr 80px 35px",gap:"0.3rem",marginBottom:"0.3rem",alignItems:"center"},children:[(0,i.jsx)("input",{type:"text",value:e.element,onChange:t=>b(e.id,"element",t.target.value),style:{padding:"0.25rem",border:"1px solid #ddd",borderRadius:"3px",fontSize:"0.7rem",textAlign:"center"},placeholder:"H"}),(0,i.jsx)("input",{type:"number",step:"0.1",min:"0",max:"1",value:e.x,onChange:t=>b(e.id,"x",parseFloat(t.target.value)||0),style:{padding:"0.25rem",border:"1px solid #ddd",borderRadius:"3px",fontSize:"0.7rem"},placeholder:"0.0"}),(0,i.jsx)("input",{type:"number",step:"0.1",min:"0",max:"1",value:e.y,onChange:t=>b(e.id,"y",parseFloat(t.target.value)||0),style:{padding:"0.25rem",border:"1px solid #ddd",borderRadius:"3px",fontSize:"0.7rem"},placeholder:"0.0"}),(0,i.jsx)("input",{type:"number",step:"0.1",min:"0",max:"1",value:e.z,onChange:t=>b(e.id,"z",parseFloat(t.target.value)||0),style:{padding:"0.25rem",border:"1px solid #ddd",borderRadius:"3px",fontSize:"0.7rem"},placeholder:"0.0"}),(0,i.jsx)("input",{type:"text",value:e.label,onChange:t=>b(e.id,"label",t.target.value),style:{padding:"0.25rem",border:"1px solid #ddd",borderRadius:"3px",fontSize:"0.7rem"},placeholder:"Label"}),(0,i.jsx)("button",{onClick:()=>{return t=e.id,void p((e=>e.filter((e=>e.id!==t))));var t},style:{padding:"0.25rem",backgroundColor:"#ef4444",color:"white",border:"none",borderRadius:"3px",fontSize:"0.65rem",cursor:"pointer",width:"100%"},title:"Remove atom",children:"\xd7"})]},e.id)))})]}),h&&(0,i.jsx)("div",{style:{padding:"0.5rem",backgroundColor:"#fee",color:"#c53030",borderRadius:"4px",fontSize:"0.75rem"},children:h}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,i.jsx)("div",{style:{fontSize:"0.7rem",color:"#10b981",backgroundColor:"#ecfdf5",padding:"0.3rem 0.5rem",borderRadius:"4px",flex:1},children:"\u2713 Auto-updating (100ms delay)"}),(0,i.jsx)("button",{onClick:f,style:{padding:"0.4rem 0.8rem",backgroundColor:"#6b7280",color:"white",border:"none",borderRadius:"4px",fontSize:"0.75rem",cursor:"pointer"},title:"Manually apply structure immediately",children:"Apply Now"})]})]})}}}]);