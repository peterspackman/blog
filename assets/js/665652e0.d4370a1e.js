"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[1288],{7595:(e,s,a)=>{a.r(s),a.d(s,{default:()=>hs});var t=a(6540),n=a(1656);const l="container_Qh_B",r="layout_SyMw",i="sidebar_Cwvp",c="content_ak_G",o="tabs_tRXw",d="tab_F12w",u="tabContent_hF_7",h="collapsibleSection_Nmyk",m="sectionHeader_qShV",x="sectionTitle_aNil",p="chevron_b8vT",j="sectionContent_NPTV",v="chevronExpanded_ry9E",g="status_l6dK",N="statusLoading_AJab",f="statusReady_FVt8",b="moleculeInfo_KKVy",_="button_XSDO",y="stickyButtons_GEQA",S="buttonPrimary_eux_",C="buttonDanger_gLI_",w="tabActive_fzT3",k="propertiesTab_ipsn",$="structureTab_HvbL",E="noStructure_y5fR",F="matricesSection_omrz",L="noMatrices_bajq",M="orbitalsCard_tkcK",H="orbitalGrid_Wtwa",O="orbitalItem_DTbW",D="orbitalEnergy_S07_",T="orbitalEnergyEV_Avgz",z="orbitalOccupied_CNCs",R="occupationBadge_zYXF",A="orbitalVirtual_Lrdp",B="orbitalContent_KW2G",I="moreOrbitals_oRmJ",V="errorModal_HssV",W="errorContent_nEMj",X="section_X2kF",P="exampleSection_iMDs",U="exampleLabel__wK2",Y="exampleSelect_VuLc",G="inputContainer_aHUj",Z="headerRow_MA_E",K="label_1fak",q="controls_Azqc",J="browseButton_eNgL",Q="combinedInput_AOvI",ee="dragging_F5j2",se="clearButton_KExK",ae="xyzTextarea_Jaou";var te=a(4848);const ne={water:{name:"Water (H\u2082O)",xyz:"3\nWater molecule\nO  0.000000  0.000000  0.000000\nH  0.757000  0.586000  0.000000\nH -0.757000  0.586000  0.000000"},urea:{name:"Urea (CH\u2084N\u2082O)",xyz:"8\nUrea molecule\nC  0.000000  0.000000  0.000000\nO  0.000000  1.220000  0.000000\nN  1.150000 -0.610000  0.000000\nN -1.150000 -0.610000  0.000000\nH  1.150000 -1.610000  0.000000\nH  2.050000 -0.110000  0.000000\nH -1.150000 -1.610000  0.000000\nH -2.050000 -0.110000  0.000000"},formamide:{name:"Formamide (CH\u2083NO)",xyz:"6\nFormamide molecule\nC  0.000000  0.000000  0.000000\nO  1.220000  0.000000  0.000000\nN -0.610000  1.150000  0.000000\nH -0.610000 -0.950000  0.000000\nH -1.610000  1.150000  0.000000\nH -0.110000  2.050000  0.000000"},methane:{name:"Methane (CH\u2084)",xyz:"5\nMethane molecule\nC  0.000000  0.000000  0.000000\nH  0.629000  0.629000  0.629000\nH -0.629000 -0.629000  0.629000\nH -0.629000  0.629000 -0.629000\nH  0.629000 -0.629000 -0.629000"},ammonia:{name:"Ammonia (NH\u2083)",xyz:"4\nAmmonia molecule\nN  0.000000  0.000000  0.000000\nH  0.000000  0.950000  0.330000\nH  0.820000 -0.480000  0.330000\nH -0.820000 -0.480000  0.330000"},ethylene:{name:"Ethylene (C\u2082H\u2084)",xyz:"6\nEthylene molecule\nC  0.000000  0.000000  0.668000\nC  0.000000  0.000000 -0.668000\nH  0.000000  0.923000  1.232000\nH  0.000000 -0.923000  1.232000\nH  0.000000  0.923000 -1.232000\nH  0.000000 -0.923000 -1.232000"}},le=({onFileLoad:e})=>{const[s,a]=(0,t.useState)(""),[n,l]=(0,t.useState)(""),[r,i]=(0,t.useState)(!1),[c,o]=(0,t.useState)("water"),d=(0,t.useRef)(null);(0,t.useEffect)((()=>{const s=ne.water;l(s.xyz),a(""),o("water"),e(s.xyz)}),[]);const u=async s=>{const t=s.name.split(".").pop()?.toLowerCase();if("xyz"===t){a(s.name);try{const a=await s.text();l(a),e(a)}catch(n){console.error("Error reading file:",n),alert("Failed to read file: "+n.message)}}else alert("Please upload an XYZ file.")};return(0,te.jsxs)("div",{className:X,children:[(0,te.jsxs)("div",{className:P,children:[(0,te.jsx)("label",{className:U,children:"Example Molecules"}),(0,te.jsxs)("select",{value:c,onChange:s=>{const t=s.target.value;if(t&&ne[t]){const s=ne[t];l(s.xyz),a(""),o(t),e(s.xyz),d.current&&(d.current.value="")}},className:Y,children:[(0,te.jsx)("option",{value:"",children:"Select an example..."}),Object.entries(ne).map((([e,s])=>(0,te.jsx)("option",{value:e,children:s.name},e)))]})]}),(0,te.jsxs)("div",{className:G,children:[(0,te.jsxs)("div",{className:Z,children:[(0,te.jsx)("span",{className:K,children:"XYZ Coordinates"}),(0,te.jsxs)("div",{className:q,children:[(0,te.jsx)("button",{onClick:e=>{e.stopPropagation(),d.current?.click()},className:J,children:"Browse"}),(s||n)&&(0,te.jsx)("button",{onClick:()=>{a(""),l(""),o(""),d.current&&(d.current.value="")},className:se,children:"Clear"})]})]}),(0,te.jsxs)("div",{className:`${Q} ${r?ee:""}`,onDrop:e=>{e.preventDefault(),i(!1);const s=e.dataTransfer.files[0];s&&u(s)},onDragOver:e=>{e.preventDefault(),i(!0)},onDragLeave:()=>{i(!1)},children:[(0,te.jsx)("textarea",{value:n,onChange:s=>{const t=s.target.value;l(t),t.trim()&&(a(""),o(""),e(t))},placeholder:s?`Loaded: ${s}`:"Select an example molecule above or drag & drop XYZ file here",rows:8,className:ae}),(0,te.jsx)("input",{ref:d,type:"file",accept:".xyz",onChange:e=>{const s=e.target.files?.[0];s&&u(s)},style:{display:"none"}})]})]})]})},re="section_H6hy",ie="field_rd2A",ce=({method:e,setMethod:s,basisSet:a,setBasisSet:t,maxIterations:n,setMaxIterations:l,energyTolerance:r,setEnergyTolerance:i,logLevel:c,setLogLevel:o})=>(0,te.jsxs)(te.Fragment,{children:[(0,te.jsxs)("div",{className:re,children:[(0,te.jsx)("h3",{children:"Calculation Method"}),(0,te.jsxs)("div",{className:ie,children:[(0,te.jsx)("label",{children:"Theory Level"}),(0,te.jsxs)("select",{value:e,onChange:e=>s(e.target.value),children:[(0,te.jsx)("option",{value:"hf",children:"Hartree-Fock (HF)"}),(0,te.jsx)("option",{value:"dft-b3lyp",children:"DFT (B3LYP)"}),(0,te.jsx)("option",{value:"dft-pbe",children:"DFT (PBE)"}),(0,te.jsx)("option",{value:"dft-pbe0",children:"DFT (PBE0)"}),(0,te.jsx)("option",{value:"dft-blyp",children:"DFT (BLYP)"}),(0,te.jsx)("option",{value:"dft-wb97x",children:"DFT (\u03c9B97X)"}),(0,te.jsx)("option",{value:"dft-wb97m",children:"DFT (\u03c9B97M)"}),(0,te.jsx)("option",{value:"dft-m062x",children:"DFT (M06-2X)"}),(0,te.jsx)("option",{value:"dft-r2scan",children:"DFT (r\xb2SCAN)"}),(0,te.jsx)("option",{value:"dft-tpss",children:"DFT (TPSS)"})]})]}),(0,te.jsxs)("div",{className:ie,children:[(0,te.jsx)("label",{children:"Basis Set"}),(0,te.jsxs)("select",{value:a,onChange:e=>t(e.target.value),children:[(0,te.jsx)("option",{value:"sto-3g",children:"STO-3G"}),(0,te.jsx)("option",{value:"3-21g",children:"3-21G"}),(0,te.jsx)("option",{value:"6-31g",children:"6-31G"}),(0,te.jsx)("option",{value:"6-31g(d,p)",children:"6-31G(d,p)"}),(0,te.jsx)("option",{value:"6-311g(d,p)",children:"6-311G(d,p)"}),(0,te.jsx)("option",{value:"def2-svp",children:"def2-SVP"}),(0,te.jsx)("option",{value:"def2-tzvp",children:"def2-TZVP"}),(0,te.jsx)("option",{value:"cc-pvdz",children:"cc-pVDZ"}),(0,te.jsx)("option",{value:"cc-pvtz",children:"cc-pVTZ"}),(0,te.jsx)("option",{value:"cc-pvqz",children:"cc-pVQZ"}),(0,te.jsx)("option",{value:"pcseg-0",children:"pc-0"}),(0,te.jsx)("option",{value:"pcseg-1",children:"pc-1"}),(0,te.jsx)("option",{value:"pcseg-2",children:"pc-2"}),(0,te.jsx)("option",{value:"pcseg-3",children:"pc-3"}),(0,te.jsx)("option",{value:"aug-pcseg-1",children:"aug-pc-1"}),(0,te.jsx)("option",{value:"aug-pcseg-2",children:"aug-pc-2"})]})]})]}),(0,te.jsxs)("div",{className:re,children:[(0,te.jsx)("h3",{children:"SCF Settings"}),(0,te.jsxs)("div",{className:ie,children:[(0,te.jsx)("label",{children:"Max Iterations"}),(0,te.jsx)("input",{type:"number",min:"10",max:"500",value:n,onChange:e=>l(parseInt(e.target.value))})]}),(0,te.jsxs)("div",{className:ie,children:[(0,te.jsx)("label",{children:"Energy Tolerance"}),(0,te.jsxs)("select",{value:r.toString(),onChange:e=>i(parseFloat(e.target.value)),children:[(0,te.jsx)("option",{value:"1e-6",children:"1e-6"}),(0,te.jsx)("option",{value:"1e-7",children:"1e-7"}),(0,te.jsx)("option",{value:"1e-8",children:"1e-8"}),(0,te.jsx)("option",{value:"1e-9",children:"1e-9"}),(0,te.jsx)("option",{value:"1e-10",children:"1e-10"})]})]}),(0,te.jsxs)("div",{className:ie,children:[(0,te.jsx)("label",{children:"Log Level"}),(0,te.jsxs)("select",{value:c,onChange:e=>o(parseInt(e.target.value)),children:[(0,te.jsx)("option",{value:"0",children:"Trace"}),(0,te.jsx)("option",{value:"1",children:"Debug"}),(0,te.jsx)("option",{value:"2",children:"Info"}),(0,te.jsx)("option",{value:"3",children:"Warning"}),(0,te.jsx)("option",{value:"4",children:"Error"}),(0,te.jsx)("option",{value:"5",children:"Critical"})]})]})]})]}),oe="container_R89I",de="summaryGrid_ag2i",ue="energyCard_YXOX",he="statusCard_RoU8",me="propertiesCard_AHmH",xe="primaryEnergy_Xokq",pe="secondaryEnergy_Gl5x",je="propertyItem_grVF",ve="exportSection_Tufw",ge="exportButtons_Op6D",Ne="exportButton_Xvg9",fe="energyValues_pzt_",be="statusInfo_hd1b",_e="convergenceStatus_AYcc",ye="converged_xwWE",Se="notConverged_Y8IO",Ce="timing_HvIZ",we="propertyList_aAAD",ke="propertyLabel_Acxr",$e="propertyValue_OR5o",Ee="noResults_jWfa",Fe=({results:e})=>{if(!e)return(0,te.jsxs)("div",{className:Ee,children:[(0,te.jsx)("h3",{children:"No Results Yet"}),(0,te.jsx)("p",{children:"Run a calculation to see results here."})]});const s=s=>{if(!e.wavefunctionData)return;let a,t,n;switch(s){case"fchk":if(!e.wavefunctionData.fchk)return void alert("FCHK data not available.");a=e.wavefunctionData.fchk,t="wavefunction.fchk",n="text/plain";break;case"json":a=JSON.stringify({energy:e.energy,energyInEV:e.energyInEV,properties:e.properties,numBasisFunctions:e.wavefunctionData.numBasisFunctions,numAtoms:e.wavefunctionData.numAtoms,calculationTime:e.elapsedMs},null,2),t="wavefunction.json",n="application/json"}const l=new Blob([a],{type:n}),r=URL.createObjectURL(l),i=document.createElement("a");i.href=r,i.download=t,i.click(),URL.revokeObjectURL(r)};return(0,te.jsxs)("div",{className:oe,children:[(0,te.jsxs)("div",{className:de,children:[(0,te.jsxs)("div",{className:ue,children:[(0,te.jsx)("h4",{children:"Total Energy"}),(0,te.jsxs)("div",{className:fe,children:[(0,te.jsxs)("div",{className:xe,children:[e.energy.toFixed(8)," Eh"]}),(0,te.jsxs)("div",{className:pe,children:[e.energyInEV.toFixed(6)," eV"]})]})]}),(0,te.jsxs)("div",{className:he,children:[(0,te.jsx)("h4",{children:"Status"}),(0,te.jsxs)("div",{className:be,children:[(0,te.jsx)("div",{className:`${_e} ${e.converged?ye:Se}`,children:e.converged?"\u2713 Converged":"\u2717 Not Converged"}),(0,te.jsx)("div",{className:Ce,children:(a=e.elapsedMs,`${Math.floor(a/1e3)}s ${Math.round(a%1e3)}ms`)})]})]}),e.properties&&(0,te.jsxs)("div",{className:me,children:[(0,te.jsx)("h4",{children:"Key Properties"}),(0,te.jsxs)("div",{className:we,children:[void 0!==e.properties.homo&&(0,te.jsxs)("div",{className:je,children:[(0,te.jsx)("span",{className:ke,children:"HOMO:"}),(0,te.jsxs)("span",{className:$e,children:[e.properties.homo.toFixed(6)," Eh"]})]}),void 0!==e.properties.lumo&&(0,te.jsxs)("div",{className:je,children:[(0,te.jsx)("span",{className:ke,children:"LUMO:"}),(0,te.jsxs)("span",{className:$e,children:[e.properties.lumo.toFixed(6)," Eh"]})]}),void 0!==e.properties.gap&&(0,te.jsxs)("div",{className:je,children:[(0,te.jsx)("span",{className:ke,children:"Gap:"}),(0,te.jsxs)("span",{className:$e,children:[e.properties.gap.toFixed(6)," Eh"]})]})]})]})]}),e.wavefunctionData&&(0,te.jsxs)("div",{className:ve,children:[(0,te.jsx)("h4",{children:"Export Wavefunction"}),(0,te.jsxs)("div",{className:ge,children:[(0,te.jsx)("button",{className:Ne,onClick:()=>s("json"),children:"\u2193 JSON"}),e.wavefunctionData.fchk&&(0,te.jsx)("button",{className:Ne,onClick:()=>s("fchk"),children:"\u2193 FCHK"})]})]})]});var a},Le={container:"container_BYXD",header:"header_RGzB",controls:"controls_Rvup",button:"button_YEOU",buttonActive:"buttonActive_nb5D",logOutput:"logOutput_RpAa",noLogs:"noLogs_oYTM",logEntry:"logEntry_Oa3L",timestamp:"timestamp__Tyr",message:"message_A8Nt","log-debug":"log-debug_cHxc","log-info":"log-info_Lwm5","log-warn":"log-warn_SwuY","log-error":"log-error_TdP2"},Me=({logs:e})=>{const[s,a]=(0,t.useState)(!0),n=(0,t.useRef)(null);(0,t.useEffect)((()=>{s&&n.current&&(n.current.scrollTop=n.current.scrollHeight)}),[e,s]);return(0,te.jsxs)("div",{className:Le.container,children:[(0,te.jsxs)("div",{className:Le.header,children:[(0,te.jsx)("h3",{children:"Calculation Output"}),(0,te.jsx)("div",{className:Le.controls,children:(0,te.jsx)("button",{className:`${Le.button} ${s?Le.buttonActive:""}`,onClick:()=>a(!s),children:s?"Auto-scroll ON":"Auto-scroll OFF"})})]}),(0,te.jsx)("div",{ref:n,className:Le.logOutput,children:0===e.length?(0,te.jsx)("div",{className:Le.noLogs,children:"No output yet. Run a calculation to see logs."}):e.map(((e,s)=>{return(0,te.jsxs)("div",{className:`${Le.logEntry} ${Le[`log-${e.level}`]}`,children:[(0,te.jsxs)("span",{className:Le.timestamp,children:["[",(a=e.timestamp,a.toLocaleTimeString()),"]"]}),(0,te.jsx)("span",{className:Le.message,children:e.message})]},s);var a}))})]})},He="matrixContainer__RiK",Oe="header_t7QL",De="controls_sj24",Te="dimensions_G9Ce",ze="toggleButton_ziSy",Re="downloadButton_yZ_5",Ae="matrixWrapper_lIP_",Be="matrix_UPd_",Ie="matrixElement_jLaA",Ve="infoContent_XCc5",We="fullMatrix_FIje",Xe="zeroElement_VjgC",Pe="truncationNotice_Npk0",Ue="matrixInfo_AD0u",Ye="infoToggle_sbWR",Ge=({matrix:e,title:s,precision:a=6,maxDisplaySize:n=8})=>{const[l,r]=(0,t.useState)(!1),[i,c]=(0,t.useState)(!1);if(!e||!e.data)return(0,te.jsxs)("div",{className:He,children:[(0,te.jsx)("h4",{children:s}),(0,te.jsx)("p",{children:"Matrix data not available"})]});const{rows:o,cols:d,data:u}=e,h=o>n||d>n,m=i?o:Math.min(o,n),x=i?d:Math.min(d,n),p=e=>Math.abs(e)<1e-10?"\xb7":e.toFixed(a);return(0,te.jsxs)("div",{className:He,children:[(0,te.jsxs)("div",{className:Oe,children:[(0,te.jsx)("h4",{children:s}),(0,te.jsxs)("div",{className:De,children:[(0,te.jsxs)("span",{className:Te,children:[o," \xd7 ",d]}),h&&(0,te.jsx)("button",{className:ze,onClick:()=>c(!i),children:i?"Show Preview":"Show Full"}),(0,te.jsx)("button",{className:Re,onClick:()=>{const e=u.map((e=>e.map((e=>p(e))).join(","))).join("\n"),a=new Blob([e],{type:"text/csv"}),t=URL.createObjectURL(a),n=document.createElement("a");n.href=t,n.download=`${s.toLowerCase().replace(/\s+/g,"_")}_matrix.csv`,n.click(),URL.revokeObjectURL(t)},title:"Download as CSV",children:"\u2193 CSV"})]})]}),(0,te.jsxs)("div",{className:Ae,children:[(0,te.jsx)("div",{className:`${Be} ${i?We:""}`,style:{gridTemplateColumns:`repeat(${x}, 1fr)`},children:Array.from({length:m},((e,s)=>Array.from({length:x},((e,a)=>{const t=u[s]?.[a]||0,n=p(t),l=Math.abs(t)<1e-10;return(0,te.jsx)("div",{className:`${Ie} ${l?Xe:""}`,title:`[${s+1},${a+1}] = ${t}`,children:n},`${s}-${a}`)}))))}),h&&!i&&(0,te.jsxs)("div",{className:Pe,children:["Showing ",m," \xd7 ",x," of ",o," \xd7 ",d," matrix"]})]}),(0,te.jsxs)("div",{className:Ue,children:[(0,te.jsxs)("button",{className:Ye,onClick:()=>r(!l),children:[l?"\u25bc":"\u25b6"," Matrix Information"]}),l&&(0,te.jsxs)("div",{className:Ve,children:[(0,te.jsxs)("div",{children:[(0,te.jsx)("strong",{children:"Dimensions:"})," ",o," rows \xd7 ",d," columns"]}),(0,te.jsxs)("div",{children:[(0,te.jsx)("strong",{children:"Total elements:"})," ",o*d]}),u.length>0&&u[0]&&(0,te.jsxs)(te.Fragment,{children:[(0,te.jsxs)("div",{children:[(0,te.jsx)("strong",{children:"Max value:"})," ",Math.max(...u.flat()).toFixed(a)]}),(0,te.jsxs)("div",{children:[(0,te.jsx)("strong",{children:"Min value:"})," ",Math.min(...u.flat()).toFixed(a)]}),(0,te.jsxs)("div",{children:[(0,te.jsx)("strong",{children:"Trace (diagonal sum):"})," ",u.reduce(((e,s,a)=>e+(s[a]||0)),0).toFixed(a)]})]})]})]})]})};var Ze=a(7851);const Ke="container_BTtL",qe="header_Zg_R",Je="controls_krEJ",Qe="controlButton_kE_9",es="viewer_MOiN",ss="representationControls_JFkt",as="controlGroup_advN",ts="controlLabel_p9ac",ns="controlSelect_wf9l",ls="checkboxLabel_O6nm",rs="checkbox_vb0q",is="placeholder_XAIu",cs="loading_XCE6",os="error_fQgs",ds=({xyzData:e,moleculeName:s="Molecule"})=>{const a=(0,t.useRef)(null),n=(0,t.useRef)(null),l=(0,t.useRef)(null),[r,i]=(0,t.useState)(!1),[c,o]=(0,t.useState)(""),[d,u]=(0,t.useState)("ball+stick"),[h,m]=(0,t.useState)(!0),[x,p]=(0,t.useState)("element");(0,t.useEffect)((()=>{if(!a.current)return;n.current=new Ze.BI(a.current,{backgroundColor:"white",quality:"medium",clipNear:1e-6,clipFar:100,clipDist:10,fogNear:100,fogFar:100});const e=()=>{n.current&&n.current.handleResize()};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e),n.current&&n.current.dispose()}}),[]);const j=()=>{if(!l.current)return;l.current.removeAllRepresentations();const e={colorScheme:x,sele:h?"all":"not hydrogen"};switch(d){case"ball+stick":e.radiusScale=.8,e.bondScale=.3;break;case"line":e.linewidth=2;break;case"spacefill":e.radiusScale=1;break;case"licorice":e.bondScale=.5,e.multipleBond=!0;break;case"surface":e.opacity=.8,e.surfaceType="vws"}l.current.addRepresentation(d,e),n.current?.autoView()};(0,t.useEffect)((()=>{j()}),[d,h,x]),(0,t.useEffect)((()=>{if(!e||!n.current)return;(async()=>{i(!0),o("");try{n.current.removeAllComponents();const a=((e,s)=>{const a=e.trim().split("\n"),t=parseInt(a[0]),n=a[1]||s,l=[];for(let h=2;h<2+t;h++){const e=a[h].trim().split(/\s+/);l.push({element:e[0],x:parseFloat(e[1]),y:parseFloat(e[2]),z:parseFloat(e[3])})}const r={"H-H":.74,"H-C":1.09,"H-N":1.01,"H-O":.96,"H-S":1.34,"C-C":1.54,"C-N":1.47,"C-O":1.43,"C-S":1.82,"N-N":1.45,"N-O":1.4,"N-S":1.68,"O-O":1.48,"O-S":1.66,"S-S":2.05},i=(e,s)=>{const a=e.x-s.x,t=e.y-s.y,n=e.z-s.z;return Math.sqrt(a*a+t*t+n*n)},c=[];for(let h=0;h<l.length;h++)for(let e=h+1;e<l.length;e++){const s=i(l[h],l[e]),a=r[`${o=l[h].element}-${d=l[e].element}`]||r[`${d}-${o}`]||2;if(s<=1.3*a){let t=1;s<.85*a&&(t=2),s<.75*a&&(t=3),c.push({atom1:h+1,atom2:e+1,order:t})}}var o,d;let u=`${n}\n`;return u+="  Generated from XYZ with bond guessing\n",u+="\n",u+=`${t.toString().padStart(3," ")}${c.length.toString().padStart(3," ")}  0  0  0  0  0  0  0  0999 V2000\n`,l.forEach((e=>{const s=e.x.toFixed(4).padStart(10," "),a=e.y.toFixed(4).padStart(10," "),t=e.z.toFixed(4).padStart(10," ");u+=`${s}${a}${t} ${e.element.padEnd(3," ")} 0  0  0  0  0  0  0  0  0  0  0  0\n`})),c.forEach((e=>{u+=`${e.atom1.toString().padStart(3," ")}${e.atom2.toString().padStart(3," ")}${e.order.toString().padStart(3," ")}  0  0  0  0\n`})),u+="M  END\n$$$$\n",u})(e,s),t=new Blob([a],{type:"text/plain"}),r=await n.current.loadFile(t,{ext:"sdf",name:s});l.current=r,j(),i(!1)}catch(a){console.error("Error loading molecule:",a),o("Failed to load molecule structure"),i(!1)}})()}),[e,s]);return e?(0,te.jsxs)("div",{className:Ke,children:[(0,te.jsxs)("div",{className:qe,children:[(0,te.jsx)("h4",{children:"3D Structure"}),(0,te.jsxs)("div",{className:Je,children:[(0,te.jsx)("button",{className:Qe,onClick:()=>{n.current&&n.current.autoView()},title:"Reset view",children:"\u2302"}),(0,te.jsx)("button",{className:Qe,onClick:()=>{n.current&&n.current.toggleFullscreen()},title:"Toggle fullscreen",children:"\u26f6"})]})]}),(0,te.jsxs)("div",{className:ss,children:[(0,te.jsxs)("div",{className:as,children:[(0,te.jsx)("label",{className:ts,children:"Style"}),(0,te.jsxs)("select",{value:d,onChange:e=>u(e.target.value),className:ns,children:[(0,te.jsx)("option",{value:"ball+stick",children:"Ball & Stick"}),(0,te.jsx)("option",{value:"line",children:"Line"}),(0,te.jsx)("option",{value:"spacefill",children:"Space Fill"}),(0,te.jsx)("option",{value:"licorice",children:"Licorice"}),(0,te.jsx)("option",{value:"surface",children:"Surface"})]})]}),(0,te.jsxs)("div",{className:as,children:[(0,te.jsx)("label",{className:ts,children:"Color"}),(0,te.jsxs)("select",{value:x,onChange:e=>p(e.target.value),className:ns,children:[(0,te.jsx)("option",{value:"element",children:"By Element"}),(0,te.jsx)("option",{value:"uniform",children:"Uniform"}),(0,te.jsx)("option",{value:"chainname",children:"By Chain"}),(0,te.jsx)("option",{value:"random",children:"Random"})]})]}),(0,te.jsx)("div",{className:as,children:(0,te.jsxs)("label",{className:ls,children:[(0,te.jsx)("input",{type:"checkbox",checked:h,onChange:e=>m(e.target.checked),className:rs}),"Show Hydrogens"]})})]}),c&&(0,te.jsx)("div",{className:os,children:(0,te.jsx)("p",{children:c})}),r&&(0,te.jsx)("div",{className:cs,children:(0,te.jsx)("p",{children:"Loading molecule..."})}),(0,te.jsx)("div",{ref:a,className:es,style:{opacity:r?.5:1}})]}):(0,te.jsx)("div",{className:Ke,children:(0,te.jsxs)("div",{className:is,children:[(0,te.jsx)("h4",{children:"Molecule Viewer"}),(0,te.jsx)("p",{children:"Load a molecule to see its 3D structure"})]})})},us=()=>{const[e,s]=(0,t.useState)(null),[n,X]=(0,t.useState)(!1),[P,U]=(0,t.useState)(""),[Y,G]=(0,t.useState)(null),[Z,K]=(0,t.useState)(!1),[q,J]=(0,t.useState)(null),[Q,ee]=(0,t.useState)([]),[se,ae]=(0,t.useState)("structure"),[ne,re]=(0,t.useState)(""),[ie,oe]=(0,t.useState)(!0),[de,ue]=(0,t.useState)(!0),[he,me]=(0,t.useState)("dft-wb97x"),[xe,pe]=(0,t.useState)("6-31g(d,p)"),[je,ve]=(0,t.useState)(100),[ge,Ne]=(0,t.useState)(1e-8),[fe,be]=(0,t.useState)(2);(0,t.useEffect)((()=>(_e(),()=>{e&&e.terminate()})),[]);const _e=async()=>{try{const e=new Worker(new URL(a.p+a.u(842),a.b),{type:void 0});e.onmessage=ye,e.onerror=e=>{console.error("Worker error:",e),re("Worker error: "+e.message),X(!1)},s(e),e.postMessage({type:"init",data:{}})}catch(ne){console.error("Failed to initialize worker:",ne),re("Failed to initialize Web Worker: "+ne.message)}},ye=e=>{const{type:s,...a}=e.data;switch(s){case"initialized":a.success?(X(!0),Ce("Worker initialized successfully","info")):(X(!1),re("Worker initialization failed: "+a.error));break;case"log":Ce(a.message,Se(a.level));break;case"progress":Ce(a.message,"info"),"complete"===a.stage&&K(!1);break;case"result":we(a);break;case"error":console.error("Worker error:",a.error),re("Calculation error: "+a.error),K(!1)}},Se=e=>{switch(e){case 0:case 1:return"debug";case 2:default:return"info";case 3:return"warn";case 4:case 5:return"error"}},Ce=(e,s)=>{ee((a=>[...a,{message:e,level:s,timestamp:new Date}]))},we=e=>{K(!1),e.success?(J(e.results),ae("results"),Ce("Calculation completed successfully!","info")):re("Calculation failed: "+e.error)};return(0,te.jsxs)("div",{className:l,children:[(0,te.jsxs)("div",{className:r,children:[(0,te.jsxs)("div",{className:i,children:[(0,te.jsx)("div",{className:`${g} ${n?f:N}`,children:n?"\u2713 Ready":"\u23f3 Loading..."}),(0,te.jsxs)("div",{className:h,children:[(0,te.jsxs)("button",{className:m,onClick:()=>oe(!ie),children:[(0,te.jsx)("span",{className:x,children:"Molecule Input"}),(0,te.jsx)("span",{className:`${p} ${ie?v:""}`,children:"\u25bc"})]}),ie&&(0,te.jsxs)("div",{className:j,children:[(0,te.jsx)(le,{onFileLoad:e=>{U(e);try{const s=e.trim().split("\n"),a=parseInt(s[0]),t=s[1]||"Loaded Molecule",n=new Map;for(let e=2;e<2+a;e++){const a=s[e].trim().split(/\s+/)[0];n.set(a,(n.get(a)||0)+1)}const l=Array.from(n.entries()).map((([e,s])=>s>1?`${e}${s}`:e)).join("");G({name:t,formula:l,numAtoms:a}),Ce(`Molecule loaded: ${l} (${a} atoms)`,"info")}catch(ne){console.error("Error parsing XYZ:",ne),re("Failed to parse XYZ data: "+ne.message)}}}),Y&&(0,te.jsx)("div",{className:b,children:(0,te.jsxs)("div",{children:[(0,te.jsx)("strong",{children:Y.formula})," (",Y.numAtoms," atoms)"]})})]})]}),P&&(0,te.jsxs)("div",{className:h,children:[(0,te.jsxs)("button",{className:m,onClick:()=>ue(!de),children:[(0,te.jsx)("span",{className:x,children:"Calculation Settings"}),(0,te.jsx)("span",{className:`${p} ${de?v:""}`,children:"\u25bc"})]}),de&&(0,te.jsx)("div",{className:j,children:(0,te.jsx)(ce,{method:he,setMethod:me,basisSet:xe,setBasisSet:pe,maxIterations:je,setMaxIterations:ve,energyTolerance:ge,setEnergyTolerance:Ne,logLevel:fe,setLogLevel:be})})]}),P&&(0,te.jsxs)("div",{className:y,children:[(0,te.jsx)("button",{className:`${_} ${S}`,onClick:()=>{if(!P)return void re("Please load a molecule first.");if(!e||!n)return void re("Web Worker not ready.");J(null),ee([]),ae("output"),K(!0),e.postMessage({type:"setLogLevel",data:{level:fe}});const s={xyzData:P,method:he,basisSet:xe,maxIterations:je,energyTolerance:ge};Ce("Starting calculation...","info"),e.postMessage({type:"calculate",data:s})},disabled:Z||!n,children:Z?"Calculating...":"Run Calculation"}),Z&&(0,te.jsx)("button",{className:`${_} ${C}`,onClick:()=>{e&&Z&&(e.terminate(),Ce("Calculation cancelled. Restarting worker...","warn"),_e(),K(!1))},children:"Cancel"})]})]}),(0,te.jsxs)("div",{className:c,children:[P&&(0,te.jsxs)("div",{className:o,children:[(0,te.jsx)("button",{className:`${d} ${"output"===se?w:""}`,onClick:()=>ae("output"),children:"Output"}),(0,te.jsx)("button",{className:`${d} ${"results"===se?w:""}`,onClick:()=>ae("results"),children:"Results"}),(0,te.jsx)("button",{className:`${d} ${"structure"===se?w:""}`,onClick:()=>ae("structure"),children:"Structure"}),(0,te.jsx)("button",{className:`${d} ${"properties"===se?w:""}`,onClick:()=>ae("properties"),children:"Properties"})]}),(0,te.jsxs)("div",{className:u,children:["output"===se&&(0,te.jsx)(Me,{logs:Q}),"results"===se&&(0,te.jsx)(Fe,{results:q}),"structure"===se&&(0,te.jsx)("div",{className:$,children:P?(0,te.jsx)(ds,{xyzData:P,moleculeName:Y?.name||"Molecule"}):(0,te.jsxs)("div",{className:E,children:[(0,te.jsx)("h3",{children:"No Structure Loaded"}),(0,te.jsx)("p",{children:"Load a molecule to see its 3D structure visualization."})]})}),"properties"===se&&q&&(0,te.jsxs)("div",{className:k,children:[q.orbitalEnergies&&q.orbitalEnergies.length>0&&(0,te.jsxs)("div",{className:M,children:[(0,te.jsx)("h4",{children:"Orbital Energies"}),(0,te.jsx)("div",{className:H,children:q.orbitalEnergies.slice(0,20).map(((e,s)=>{const a=q.orbitalOccupations?.[s]??0,t=a>0;return(0,te.jsxs)("div",{className:`${O} ${t?z:A}`,children:[(0,te.jsxs)("div",{className:B,children:[(0,te.jsxs)("div",{className:D,children:[e.toFixed(6)," Eh"]}),(0,te.jsxs)("div",{className:T,children:[(27.2114*e).toFixed(3)," eV"]})]}),(0,te.jsx)("div",{className:R,children:2===a?"\u2191\u2193":1===a?"\u2191":""})]},s)}))}),q.orbitalEnergies.length>20&&(0,te.jsxs)("div",{className:I,children:["... and ",q.orbitalEnergies.length-20," more orbitals"]})]}),q.matrices&&Object.keys(q.matrices).length>0?(0,te.jsx)("div",{className:F,children:Object.entries(q.matrices).map((([e,s])=>s?(0,te.jsx)(Ge,{matrix:s,title:`${e.charAt(0).toUpperCase()}${e.slice(1)} Matrix`,precision:6,maxDisplaySize:6},e):null))}):(0,te.jsx)("div",{className:L,children:(0,te.jsx)("p",{children:"No matrix data available. Matrices are generated during SCF calculations and may depend on the calculation method and settings."})})]})]})]})]}),ne&&(0,te.jsx)("div",{className:V,children:(0,te.jsxs)("div",{className:W,children:[(0,te.jsx)("h3",{children:"Error"}),(0,te.jsx)("p",{children:ne}),(0,te.jsx)("button",{onClick:()=>re(""),children:"Close"})]})})]})};function hs(){return(0,te.jsx)(n.A,{title:"Wavefunction Calculator",description:"Quantum Chemistry Calculations in Your Browser",children:(0,te.jsx)("main",{style:{minHeight:"calc(100vh - 60px)"},children:(0,te.jsx)(us,{})})})}}}]);