"use strict";(globalThis.webpackChunkblog=globalThis.webpackChunkblog||[]).push([[6370],{6370:(e,t,a)=>{a.r(t),a.d(t,{default:()=>q});var r=a(6540),n=a(7851);const s="container_kZ5w",l="header_HEr1",c="controls_ixvO",o="controlButton_GDgO",i="viewer_WviD",u="loadingOverlay_lwCV",d="errorOverlay_rmFC",m="loadingSpinner_PLZ5",h="errorMessage_qkbu",p="frameInfoOverlay_vX3K",f="frameNumber_EMUy",g="frameComment_F9wg",y="frameEnergy_RPyN",j="frameVolume_c0K5",v="displayControlsOverlay_fIES",x="overlayControls_EEtd",b="overlayControlGroup_E9WC",C="overlayLabel_tcBl",N="overlaySelect_UZvO",S="overlayTextInput_CauI",F="overlayCheckbox_jtWY",M="overlaySlider_ifAA",w="overlayValue_f7JJ",E="overlayNumberInput_nqMv",k="overlaySection_XvbQ",I="overlaySectionHeader_L3NO",L="trajectoryControls_t0nZ",R="compactControls_H6OY",T="frameControls_R8UR",_="playerControls_ukm9",$="playerButton_Mfw8",P="playPauseButton_PlTX",U="frameSlider_B4ss";var O=a(4848);class D{shapeComponent=null;frameUnitcells=[];constructor(e,t){this.component=e,this.stage=t}setFrameUnitcells(e){this.frameUnitcells=e.map(e=>{if(!e.includes("Lattice="))return null;const t=e.match(/Lattice="([^"]+)"/);if(!t)return null;const a=t[1].split(/\s+/).map(e=>parseFloat(e));if(9!==a.length)return null;return{a:[a[0],a[1],a[2]],b:[a[3],a[4],a[5]],c:[a[6],a[7],a[8]]}})}updateFrame(e){if(e<0||e>=this.frameUnitcells.length)return;const t=this.frameUnitcells[e];t&&(this.remove(),this.createUnitCellShape(t))}createUnitCellShape(e){const{a:t,b:a,c:r}=e,s=this.component.structure.center,l=[[0,0,0],[1,0,0],[0,1,0],[0,0,1],[1,1,0],[1,0,1],[0,1,1],[1,1,1]].map(([e,n,l])=>[s.x+e*t[0]+n*a[0]+l*r[0],s.y+e*t[1]+n*a[1]+l*r[1],s.z+e*t[2]+n*a[2]+l*r[2]]),c=new n.yp("unitcell");[[0,1],[0,2],[0,3],[1,4],[1,5],[2,4],[2,6],[3,5],[3,6],[4,7],[5,7],[6,7]].forEach(([e,t])=>{c.addWideline(l[e],l[t],[1,.5,0])}),this.shapeComponent=this.stage.addComponentFromObject(c),this.shapeComponent.addRepresentation("buffer",{linewidth:5,opacity:.8})}remove(){this.shapeComponent&&(this.stage.removeComponent(this.shapeComponent),this.shapeComponent=null)}setVisible(e){this.shapeComponent&&this.shapeComponent.setVisibility(e)}}const B=e=>e.toLowerCase().split(".").pop()||"",V=e=>["pdb","ent","pqr","mmcif","cif","mcif","gro","sdf","mol2","mmtf"].includes(e);class A{static convertXYZTrajToPDB(e,t="MOL"){const a=this.parseXYZTrajectory(e);return this.convertFramesToPDB(a,t)}static calculateVolume(e,t,a,r,n,s){const l=r*Math.PI/180,c=n*Math.PI/180,o=s*Math.PI/180,i=Math.cos(l),u=Math.cos(c),d=Math.cos(o);return e*t*a*Math.sqrt(1+2*i*u*d-i*i-u*u-d*d)}static parseLatticeInfo(e){const t=e.match(/Lattice="([^"]+)"/);if(!t)return null;const a=t[1].split(/\s+/).map(e=>parseFloat(e));if(9!==a.length)return null;const r=a[0],n=a[1],s=a[2],l=a[3],c=a[4],o=a[5],i=a[6],u=a[7],d=a[8],m=Math.sqrt(r*r+n*n+s*s),h=Math.sqrt(l*l+c*c+o*o),p=Math.sqrt(i*i+u*u+d*d),f=180*Math.acos((l*i+c*u+o*d)/(h*p))/Math.PI,g=180*Math.acos((r*i+n*u+s*d)/(m*p))/Math.PI,y=180*Math.acos((r*l+n*c+s*o)/(m*h))/Math.PI;return{a:m,b:h,c:p,alpha:f,beta:g,gamma:y,volume:this.calculateVolume(m,h,p,f,g,y)}}static convertFramesToPDB(e,t="MOL",a){let r="",n="";if(a&&a.length>0){const e=new Map;for(const[t,r]of a)e.has(t)||e.set(t,[]),e.has(r)||e.set(r,[]),e.get(t).push(r),e.get(r).push(t);for(const[t,a]of e){const e=[...a].sort((e,t)=>e-t);for(let a=0;a<e.length;a+=4){const r=e.slice(a,a+4);let s=`CONECT${t.toString().padStart(5)}`;for(const e of r)s+=e.toString().padStart(5);n+=s+"\n"}}}return e.forEach((e,a)=>{r+=`MODEL     ${(a+1).toString().padStart(4," ")}\n`;const s=e.trim().split("\n"),l=parseInt(s[0]),c=s[1]||"",o=this.parseLatticeInfo(c);if(o){const e=o.a.toFixed(3).padStart(9," "),t=o.b.toFixed(3).padStart(9," "),a=o.c.toFixed(3).padStart(9," "),n=o.alpha.toFixed(2).padStart(7," "),s=o.beta.toFixed(2).padStart(7," "),l=o.gamma.toFixed(2).padStart(7," ");r+=`CRYST1${e}${t}${a}${n}${s}${l} P 1           1\n`}for(let n=0;n<l;n++){const e=s[n+2].trim().split(/\s+/),a=e[0],l=parseFloat(e[1]),c=parseFloat(e[2]),o=parseFloat(e[3]),i=(n+1).toString().padStart(5," "),u=a.padEnd(4," "),d=t.substring(0,3).padEnd(3," "),m="A",h="1".padStart(4," "),p=l.toFixed(3).padStart(8," "),f=c.toFixed(3).padStart(8," "),g=o.toFixed(3).padStart(8," ");r+=`ATOM  ${i} ${u} ${d} ${m}${h}    ${p}${f}${g}  1.00  0.00           ${a.padEnd(2," ")}\n`}0===a&&n&&(r+=n),r+="ENDMDL\n"}),r+="END\n",r}static parseXYZTrajectory(e){const t=[],a=e.trim().split("\n");let r=0;for(;r<a.length;){if(!a[r]||""===a[r].trim()){r++;continue}const e=parseInt(a[r]);if(isNaN(e)||e<=0){r++;continue}if(r+e+1>=a.length)break;const n=a.slice(r,r+e+2);t.push(n.join("\n")),r+=e+2}return t}}const q=({trajectoryData:e,xyzFrames:t,structureFile:a,trajectoryFile:q,structureUrl:H,trajectoryUrl:z,moleculeName:Z="Trajectory",autoPlay:X=!1,initialSpeed:Y=100,autoBond:W=!0,bonds:J,atomTypes:G,elementMapping:K,onElementMappingChange:Q})=>{const ee=(0,r.useRef)(null),te=(0,r.useRef)(null),ae=(0,r.useRef)(null),re=(0,r.useRef)(null),ne=(0,r.useRef)(null),[se,le]=(0,r.useState)(!1),[ce,oe]=(0,r.useState)(""),[ie,ue]=(0,r.useState)(0),[de,me]=(0,r.useState)(0),[he,pe]=(0,r.useState)(!1),[fe,ge]=(0,r.useState)(30),[ye,je]=(0,r.useState)("ball+stick"),[ve,xe]=(0,r.useState)(!0),[be,Ce]=(0,r.useState)("element"),[Ne,Se]=(0,r.useState)([]),[Fe,Me]=(0,r.useState)([]),[we,Ee]=(0,r.useState)(null),[ke,Ie]=(0,r.useState)(!1),[Le,Re]=(0,r.useState)(!1),[Te,_e]=(0,r.useState)(!1),[$e,Pe]=(0,r.useState)(1),[Ue,Oe]=(0,r.useState)(1),[De,Be]=(0,r.useState)(1),[Ve,Ae]=(0,r.useState)([]),[qe,He]=(0,r.useState)(null),[ze,Ze]=(0,r.useState)([]);(0,r.useEffect)(()=>{fetch("/data/elements.json").then(e=>e.json()).then(e=>Ze(e)).catch(e=>console.warn("Failed to load element data:",e))},[]);const Xe=()=>"dark"===document.documentElement.getAttribute("data-theme")?"#1b1b1d":"#ffffff";(0,r.useEffect)(()=>{if(!ee.current)return;te.current=new n.BI(ee.current,{backgroundColor:Xe(),quality:"medium",clipNear:1e-6,clipFar:100,clipDist:10});const e=()=>{te.current&&te.current.handleResize()};window.addEventListener("resize",e);const t=new MutationObserver(()=>{te.current&&te.current.setParameters({backgroundColor:Xe()})});return t.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>{window.removeEventListener("resize",e),t.disconnect(),te.current&&te.current.dispose()}},[]);const Ye=e=>{const t=[/Energy\s*=\s*(-?\d+\.?\d*)/i,/E\s*=\s*(-?\d+\.?\d*)/i,/energy:\s*(-?\d+\.?\d*)/i];for(const a of t){const t=e.match(a);if(t){const e=parseFloat(t[1]);if(!isNaN(e))return e}}return null},We=e=>e.includes("cm\u207b\xb9")||e.includes("cm-1")||e.toLowerCase().includes("mode")||e.includes("Frame=")?null:e.toUpperCase().includes("ORCA")?(e=>{if(e.toUpperCase().includes("ORCA")){const t=e.match(/E\s+(-?\d+\.?\d*)/i);if(t){const e=parseFloat(t[1]);if(!isNaN(e))return e}}return null})(e):e.includes("Energy=")||e.includes("E=")||e.includes("energy:")||e.includes("Lattice=")?Ye(e):null,Je=e=>{const t=e.match(/Lattice="([^"]+)"/);if(!t)return null;const a=t[1].split(/\s+/).map(e=>parseFloat(e));if(9!==a.length)return null;const r=a[0],n=a[1],s=a[2],l=a[3],c=a[4],o=a[5],i=a[6],u=a[7],d=a[8],m=Math.sqrt(r*r+n*n+s*s),h=Math.sqrt(l*l+c*c+o*o),p=Math.sqrt(i*i+u*u+d*d),f=180*Math.acos((l*i+c*u+o*d)/(h*p))/Math.PI,g=180*Math.acos((r*i+n*u+s*d)/(m*p))/Math.PI,y=180*Math.acos((r*l+n*c+s*o)/(m*h))/Math.PI,j=f*Math.PI/180,v=g*Math.PI/180,x=y*Math.PI/180,b=Math.cos(j),C=Math.cos(v),N=Math.cos(x);return m*h*p*Math.sqrt(1+2*b*C*N-b*b-C*C-N*N)},Ge=e=>{const t=e.trim().split("\n"),a=[],r=[],n=[],s=[];let l=!1,c=0;for(;c<t.length;){const e=parseInt(t[c]);if(isNaN(e)){c++;continue}const o=t.slice(c,c+e+2);a.push(o.join("\n"));const i=t[c+1]||"";n.push(i);const u=We(i);r.push(u);const d=Je(i);s.push(d),i.includes("Lattice=")&&(l=!0),c+=e+2}Se(r),Me(n),Ae(s),Re(l);const o=r.filter(e=>null!==e);return o.length>0?Ee(Math.min(...o)):Ee(null),{frames:a,comments:n,hasLattice:l}},Ke=async(e,t=[],a=!1)=>{if(te.current){le(!0),oe("");try{te.current.removeAllComponents(),re.current=null,ne.current=null;const r=A.convertFramesToPDB(e,Z,J),n=new Blob([r],{type:"text/plain"}),s=await te.current.loadFile(n,{ext:"pdb",name:Z,asTrajectory:!0,autoBond:W});ae.current=s,me(e.length),Qe();const l=s.addTrajectory();if(re.current=l,l.trajectory&&l.trajectory.player){const e=l.trajectory.player;ne.current=e;const t=Math.round(1e3/fe);e.parameters&&(e.parameters.timeout=t,e.parameters.mode="loop",e.parameters.step=1,e.parameters.direction="forward"),e.signals&&(e.signals.startedRunning&&e.signals.startedRunning.add(()=>{pe(!0)}),e.signals.haltedRunning&&e.signals.haltedRunning.add(()=>{pe(!1)}))}if(l.trajectory&&l.trajectory.signals&&l.trajectory.signals.frameChanged&&l.trajectory.signals.frameChanged.add(e=>{ue(e)}),te.current.autoView(),console.log("Trajectory loaded. latticeDetected:",a,"comments.length:",t.length),a&&t.length>0){console.log("Creating CustomUnitCellRepresentation...");const e=new D(s,te.current);e.setFrameUnitcells(t),He(e),Re(!0),console.log("CustomUnitCellRepresentation created:",e)}else console.log("Not creating unit cell: latticeDetected =",a,"comments =",t.length),Re(!1);X&&ne.current&&setTimeout(()=>ne.current.play(),500),le(!1)}catch(r){console.error("Error loading trajectory:",r),oe(`Failed to load trajectory: ${r.message}`),le(!1)}}},Qe=()=>{if(!ae.current)return;ae.current.removeAllRepresentations();const e={colorScheme:be,sele:ve?"all":"not hydrogen"};switch(ye){case"ball+stick":e.radiusScale=.8,e.bondScale=.3,e.aspectRatio=1.5;break;case"line":e.linewidth=2;break;case"spacefill":e.radiusScale=1;break;case"licorice":e.bondScale=.5,e.multipleBond=!0}ae.current.addRepresentation(ye,e),te.current?.autoView()},et=e=>1===$e&&1===Ue&&1===De?e:e.map(e=>{const t=e.trim().split("\n"),a=parseInt(t[0]),r=t[1]||"",n=r.match(/Lattice="([^"]+)"/);if(!n)return e;const s=n[1].split(/\s+/).map(e=>parseFloat(e));if(9!==s.length)return e;const l=[s[0],s[1],s[2]],c=[s[3],s[4],s[5]],o=[s[6],s[7],s[8]],i=[];for(let h=0;h<a;h++){const e=t[h+2].trim().split(/\s+/);i.push({element:e[0],x:parseFloat(e[1]),y:parseFloat(e[2]),z:parseFloat(e[3])})}const u=[];for(let h=0;h<$e;h++)for(let e=0;e<Ue;e++)for(let t=0;t<De;t++){const a=[h*l[0]+e*c[0]+t*o[0],h*l[1]+e*c[1]+t*o[1],h*l[2]+e*c[2]+t*o[2]];i.forEach(e=>{u.push({element:e.element,x:e.x+a[0],y:e.y+a[1],z:e.z+a[2]})})}const d=[u.length.toString()],m=r.replace(/Lattice="([^"]+)"/,(e,t)=>`Lattice="${[l[0]*$e,l[1]*$e,l[2]*$e,c[0]*Ue,c[1]*Ue,c[2]*Ue,o[0]*De,o[1]*De,o[2]*De].join(" ")}"`);return d.push(m),u.forEach(e=>{d.push(`${e.element}  ${e.x.toFixed(6)}  ${e.y.toFixed(6)}  ${e.z.toFixed(6)}`)}),d.join("\n")}),tt=()=>{qe&&Le&&(Te?(qe.updateFrame(ie),qe.setVisible(!0)):qe.setVisible(!1))};(0,r.useEffect)(()=>{const r=()=>{if(ne.current)if("function"==typeof ne.current.pause)try{ne.current.pause()}catch(e){}else ne.current.intervalId&&clearInterval(ne.current.intervalId);pe(!1)};if((a||H)&&(q||z||V(a?B(a.name):H?B(H):""))){r();const e=a||H,t=q||z;setTimeout(()=>(async(e,t)=>{if(te.current){le(!0),oe("");try{let a;if(te.current.removeAllComponents(),re.current=null,ne.current=null,"string"==typeof e)a=await te.current.loadFile(e,{name:Z,autoBond:W});else{const t=B(e.name);a=await te.current.loadFile(e,{ext:t,name:Z,autoBond:W})}if(ae.current=a,Qe(),t){let e;if("string"==typeof t)e=await n.un(t);else{const a=URL.createObjectURL(t);try{e=await n.un(a,{ext:B(t.name)})}finally{URL.revokeObjectURL(a)}}const r=a.addTrajectory(e);if(re.current=r,r.trajectory&&r.trajectory.player){const e=r.trajectory.player;ne.current=e;const t=Math.round(1e3/fe);e.parameters&&(e.parameters.timeout=t,e.parameters.mode="loop",e.parameters.step=1,e.parameters.direction="forward"),e.signals&&(e.signals.startedRunning&&e.signals.startedRunning.add(()=>{pe(!0)}),e.signals.haltedRunning&&e.signals.haltedRunning.add(()=>{pe(!1)}))}r.trajectory&&r.trajectory.signals&&r.trajectory.signals.frameChanged&&r.trajectory.signals.frameChanged.add(e=>{ue(e)}),e&&void 0!==e.frameCount?me(e.frameCount):r.trajectory&&void 0!==r.trajectory.frameCount&&me(r.trajectory.frameCount)}else if(V(B("string"==typeof e?e:e.name))){const e=a.addTrajectory();if(re.current=e,e.trajectory&&e.trajectory.player){const t=e.trajectory.player;ne.current=t;const a=Math.round(1e3/fe);t.parameters&&(t.parameters.timeout=a,t.parameters.mode="loop",t.parameters.step=1,t.parameters.direction="forward"),t.signals&&(t.signals.startedRunning&&t.signals.startedRunning.add(()=>{pe(!0)}),t.signals.haltedRunning&&t.signals.haltedRunning.add(()=>{pe(!1)}))}e.trajectory&&e.trajectory.signals&&e.trajectory.signals.frameChanged&&e.trajectory.signals.frameChanged.add(e=>{ue(e)}),a.structure&&a.structure.modelStore&&void 0!==a.structure.modelStore.count&&me(a.structure.modelStore.count)}te.current.autoView(),X&&ne.current&&de>1&&setTimeout(()=>{ne.current&&"function"==typeof ne.current.play&&ne.current.play()},500),le(!1)}catch(a){console.error("Error loading trajectory:",a),oe(`Failed to load trajectory: ${a.message}`),le(!1)}}})(e,t),50)}else if(e){const t=Ge(e);if(t.frames.length>0){r();const e=et(t.frames);setTimeout(()=>Ke(e,t.comments,t.hasLattice),50)}}else if(t&&t.length>0){r();const e=t.join("\n\n"),a=Ge(e),n=et(a.frames);setTimeout(()=>Ke(n,a.comments,a.hasLattice),50)}return r},[e,t,a,q,H,z,$e,Ue,De]),(0,r.useEffect)(()=>{Qe()},[ye,ve,be]),(0,r.useEffect)(()=>{Te?tt():qe&&qe.remove()},[Te,$e,Ue,De,Le,qe]),(0,r.useEffect)(()=>{Te&&Le&&tt()},[ie,Te,Le,qe]);const at=()=>{if(ne.current&&"function"==typeof ne.current.play)ne.current.play();else if(re.current&&re.current.trajectory&&de>1){pe(!0);let e=ie;const t=setInterval(()=>{try{re.current&&re.current.trajectory?(e=(e+1)%de,re.current.trajectory.setFrame(e),ue(e)):(clearInterval(t),pe(!1))}catch(a){console.warn("Trajectory disposed during playback, stopping:",a.message),clearInterval(t),pe(!1)}},Math.round(1e3/fe));ne.current={intervalId:t}}},rt=()=>{ne.current&&("function"==typeof ne.current.pause?ne.current.pause():ne.current.intervalId&&(clearInterval(ne.current.intervalId),ne.current=null)),pe(!1)},nt=e=>{try{re.current&&re.current.trajectory&&re.current.trajectory.setFrame(e)}catch(t){console.warn("Cannot set frame on disposed trajectory:",t.message)}};return(0,r.useEffect)(()=>{const e=e=>{if(!(de<=1||e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||e.target instanceof HTMLSelectElement))switch(e.code){case"Space":e.preventDefault(),he?rt():at();break;case"ArrowLeft":e.preventDefault(),nt(Math.max(0,ie-1));break;case"ArrowRight":e.preventDefault(),nt(Math.min(de-1,ie+1));break;case"Home":e.preventDefault(),nt(0);break;case"End":e.preventDefault(),nt(de-1)}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[de,ie,he]),(0,O.jsxs)("div",{className:s,children:[(0,O.jsxs)("div",{className:l,children:[(0,O.jsx)("h4",{children:Z}),(0,O.jsxs)("div",{className:c,children:[(0,O.jsx)("button",{onClick:()=>Ie(!ke),className:o,title:"Toggle display options",children:"Options"}),(0,O.jsx)("button",{onClick:()=>{te.current&&te.current.autoView(1e3)},className:o,children:"Reset View"}),(0,O.jsx)("button",{onClick:()=>{te.current&&te.current.toggleFullscreen(ee.current)},className:o,children:"Fullscreen"})]})]}),(0,O.jsxs)("div",{className:i,ref:ee,children:[se&&(0,O.jsx)("div",{className:u,children:(0,O.jsx)("div",{className:m,children:"Loading trajectory..."})}),ce&&(0,O.jsx)("div",{className:d,children:(0,O.jsx)("div",{className:h,children:ce})}),de>0&&(0,O.jsxs)("div",{className:p,children:[(0,O.jsxs)("div",{className:f,children:["Frame ",ie+1,"/",de]}),Fe[ie]&&(0,O.jsx)("div",{className:g,children:Fe[ie]}),null!==Ne[ie]&&void 0!==Ne[ie]&&null!==we&&(0,O.jsx)("div",{className:y,children:(()=>{const e=Ne[ie]-we;return`${e>=0?"+":""}${(2625.5*e).toFixed(2)} kJ/mol`})()}),null!==Ve[ie]&&void 0!==Ve[ie]&&(0,O.jsxs)("div",{className:j,children:["Volume: ",Ve[ie].toFixed(2)," \xc5\xb3"]})]}),ke&&(0,O.jsx)("div",{className:v,children:(0,O.jsxs)("div",{className:x,children:[(0,O.jsxs)("div",{className:b,children:[(0,O.jsx)("label",{className:C,children:"Style:"}),(0,O.jsxs)("select",{value:ye,onChange:e=>je(e.target.value),className:N,children:[(0,O.jsx)("option",{value:"ball+stick",children:"Ball & Stick"}),(0,O.jsx)("option",{value:"line",children:"Line"}),(0,O.jsx)("option",{value:"spacefill",children:"Spacefill"}),(0,O.jsx)("option",{value:"licorice",children:"Licorice"}),(0,O.jsx)("option",{value:"cartoon",children:"Cartoon"})]})]}),(0,O.jsxs)("div",{className:b,children:[(0,O.jsx)("label",{className:C,children:"Color:"}),(0,O.jsxs)("select",{value:be,onChange:e=>Ce(e.target.value),className:N,children:[(0,O.jsx)("option",{value:"element",children:"Element"}),(0,O.jsx)("option",{value:"chainname",children:"Chain"}),(0,O.jsx)("option",{value:"residueindex",children:"Residue"}),(0,O.jsx)("option",{value:"bfactor",children:"B-factor"})]})]}),(0,O.jsxs)("div",{className:b,children:[(0,O.jsx)("input",{type:"checkbox",checked:ve,onChange:e=>xe(e.target.checked),id:"showH-overlay",className:F}),(0,O.jsx)("label",{htmlFor:"showH-overlay",className:C,children:"Show Hydrogens"})]}),(0,O.jsxs)("div",{className:b,children:[(0,O.jsx)("label",{className:C,children:"FPS:"}),(0,O.jsx)("input",{type:"range",min:"10",max:"60",step:"5",value:fe,onChange:e=>(e=>{if(ge(e),ne.current&&ne.current.parameters){const t=Math.round(1e3/e);ne.current.parameters.timeout=t,he&&"function"==typeof ne.current.pause&&"function"==typeof ne.current.play&&(ne.current.pause(),ne.current.play())}})(parseInt(e.target.value)),className:M}),(0,O.jsx)("span",{className:w,children:fe})]}),G&&G.length>0&&K&&Q&&(0,O.jsxs)("div",{className:k,children:[(0,O.jsx)("div",{className:I,children:"Atom Types"}),G.map(({type:e,mass:t})=>(0,O.jsxs)("div",{className:b,children:[(0,O.jsxs)("label",{className:C,children:["Type ",e,t>0?` (${t.toFixed(1)})`:"",":"]}),(0,O.jsx)("input",{type:"text",list:`elements-list-${e}`,value:K.get(e)||"",onChange:t=>{const a=new Map(K);a.set(e,t.target.value),Q(a)},placeholder:"Element",className:S}),(0,O.jsx)("datalist",{id:`elements-list-${e}`,children:ze.map(e=>(0,O.jsxs)("option",{value:e.symbol,children:[e.name," (",e.mass.toFixed(2),")"]},e.symbol))})]},e))]}),Le&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{className:b,children:[(0,O.jsx)("input",{type:"checkbox",checked:Te,onChange:e=>_e(e.target.checked),id:"showUnitCell-overlay",className:F}),(0,O.jsx)("label",{htmlFor:"showUnitCell-overlay",className:C,children:"Show Unit Cell"})]}),Te&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{className:b,children:[(0,O.jsx)("label",{className:C,children:"Supercell X:"}),(0,O.jsx)("input",{type:"number",min:"1",max:"5",value:$e,onChange:e=>Pe(parseInt(e.target.value)||1),className:E})]}),(0,O.jsxs)("div",{className:b,children:[(0,O.jsx)("label",{className:C,children:"Supercell Y:"}),(0,O.jsx)("input",{type:"number",min:"1",max:"5",value:Ue,onChange:e=>Oe(parseInt(e.target.value)||1),className:E})]}),(0,O.jsxs)("div",{className:b,children:[(0,O.jsx)("label",{className:C,children:"Supercell Z:"}),(0,O.jsx)("input",{type:"number",min:"1",max:"5",value:De,onChange:e=>Be(parseInt(e.target.value)||1),className:E})]})]})]})]})})]}),de>1&&(0,O.jsx)("div",{className:L,children:(0,O.jsxs)("div",{className:R,children:[(0,O.jsxs)("div",{className:_,children:[(0,O.jsx)("button",{onClick:()=>nt(Math.max(0,ie-1)),className:$,disabled:0===ie,title:"Previous frame",children:"\u23ee"}),(0,O.jsx)("button",{onClick:he?rt:at,className:`${$} ${P}`,title:he?"Pause":"Play",children:he?"\u23f8":"\u23f5"}),(0,O.jsx)("button",{onClick:()=>nt(Math.min(de-1,ie+1)),className:$,disabled:ie===de-1,title:"Next frame",children:"\u23ed"})]}),(0,O.jsx)("div",{className:T,children:(0,O.jsx)("input",{type:"range",min:"0",max:de-1,value:ie,onChange:e=>nt(parseInt(e.target.value)),className:U})})]})})]})}}}]);