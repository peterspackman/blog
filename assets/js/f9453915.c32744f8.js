"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[7467],{4910:(e,s,t)=>{t.r(s),t.d(s,{default:()=>b});var r=t(6540),o=t(1656);t(8591);const i={testTensorColor:"testTensorColor_LQOr",referenceTensorColor:"referenceTensorColor_xtZ6",differenceTensorColor:"differenceTensorColor_XV79",testTensorText:"testTensorText_BrHP",referenceTensorText:"referenceTensorText_SApb",container:"container_AcWV",mainGrid:"mainGrid_n2wD",inputColumn:"inputColumn_hJkx",inputSection:"inputSection_C7Tt",header:"header_hSkD",workerStatus:"workerStatus_plMm",statusIndicator:"statusIndicator_eFtZ",ready:"ready_IrDx",loading:"loading_qQNw",pulse:"pulse_aZWe",exampleButtons:"exampleButtons_ODbm",exampleButton:"exampleButton_GPFI",tensorInput:"tensorInput_hXSv",analyzeButton:"analyzeButton_VfGY",errorMessage:"errorMessage_bMLK",logOutput:"logOutput_CW6x",logEntries:"logEntries_wist",logEntry:"logEntry_zWqD",info:"info_fYyA",warning:"warning_gskO",error:"error_NJer",debug:"debug_N8f2",message:"message_LnST",resultsColumn:"resultsColumn_eqno",propertiesCard:"propertiesCard_wW4j",copyButton:"copyButton_XJvZ",tablesGrid:"tablesGrid_WZtn",tableCell:"tableCell_NTy8",eigenvaluesCell:"eigenvaluesCell_tyIq",propertiesTable:"propertiesTable_sLOX",highlightRow:"highlightRow_oHbk",naCell:"naCell_A7Si",chartsSection:"chartsSection_Fym3",chartControls:"chartControls_Mycp",propertySelect:"propertySelect__phA",planeSelect:"planeSelect_rQZn",checkboxLabel:"checkboxLabel_ezkD",checkbox:"checkbox_oYj9",radioGroup:"radioGroup_PcH8",radioLabel:"radioLabel_ixtg",radio:"radio_DLz1",modeToggle:"modeToggle_igdJ",tensorNameInput:"tensorNameInput_j6od",tensorActions:"tensorActions_T1i2",saveButton:"saveButton_k5AZ",loadButton:"loadButton_a2QW",loadDropdown:"loadDropdown_DbjL",loadDropdownItem:"loadDropdownItem_ZLLk",tensorInfo:"tensorInfo_xNYb",tensorTimestamp:"tensorTimestamp_X0T6",deleteButton:"deleteButton_Brc7",polarChartsGrid:"polarChartsGrid_WEmc",sectionTitle:"sectionTitle_vlxf",chartLabel:"chartLabel_x0p6",surfaceChartContainer:"surfaceChartContainer_XRy4",directionalChartsGrid:"directionalChartsGrid_axvh",directionalChartContainer:"directionalChartContainer_Elam",chartsGrid:"chartsGrid_xZtP",chartContainer:"chartContainer_mWGr"},a=(e,s)=>e&&s&&e.length===s.length?e.map(((e,t)=>{const r=s[t];return{angle:e.angle,angleRad:e.angleRad,value:e.value-r.value,valueMin:(e.valueMin||0)-(r.valueMin||0),valueMax:(e.valueMax||0)-(r.valueMax||0),x:void 0!==e.x&&void 0!==r.x?e.x-r.x:void 0,y:void 0!==e.y&&void 0!==r.y?e.y-r.y:void 0}})):[],n=e=>Math.abs(e)<.001?"var(--ifm-color-emphasis-600)":e>0?"#28a745":"#dc3545",l=e=>Math.abs(e)<.001?"\xb1":e>0?"+":"-",c=(e,s)=>{let t="";"averages"===e?(t="Averaging scheme\tBulk modulus (GPa)\tYoung's modulus (GPa)\tShear modulus (GPa)\tPoisson's ratio\n",t+=`Voigt\t${s.properties.bulkModulus.voigt.toFixed(3)}\t${s.properties.youngsModulus.voigt.toFixed(3)}\t${s.properties.shearModulus.voigt.toFixed(3)}\t${s.properties.poissonRatio.voigt.toFixed(5)}\n`,t+=`Reuss\t${s.properties.bulkModulus.reuss.toFixed(3)}\t${s.properties.youngsModulus.reuss.toFixed(3)}\t${s.properties.shearModulus.reuss.toFixed(3)}\t${s.properties.poissonRatio.reuss.toFixed(5)}\n`,t+=`Hill\t${s.properties.bulkModulus.hill.toFixed(3)}\t${s.properties.youngsModulus.hill.toFixed(3)}\t${s.properties.shearModulus.hill.toFixed(3)}\t${s.properties.poissonRatio.hill.toFixed(5)}`):"eigenvalues"===e?(t="Eigenvalue\tValue (GPa)\n",s.eigenvalues.forEach(((e,s)=>{t+=`\u03bb${s+1}\t${e.toFixed(3)}\n`})),t=t.trim()):"variations"===e&&(t="Property\tMinimum\tMaximum\tAnisotropy\n",t+=`Young's modulus (GPa)\t${s.extrema.youngsModulus.min.toFixed(3)}\t${s.extrema.youngsModulus.max.toFixed(3)}\t${s.extrema.youngsModulus.anisotropy.toFixed(2)}\n`,t+=`Linear compressibility (TPa\u207b\xb9)\t${s.extrema.linearCompressibility.min.toFixed(3)}\t${s.extrema.linearCompressibility.max.toFixed(3)}\t${s.extrema.linearCompressibility.anisotropy.toFixed(4)}\n`,t+=`Shear modulus (GPa)\t${s.extrema.shearModulus.min.toFixed(3)}\t${s.extrema.shearModulus.max.toFixed(3)}\t${s.extrema.shearModulus.anisotropy.toFixed(2)}\n`,t+=`Poisson's ratio\t${s.extrema.poissonRatio.min.toFixed(5)}\t${s.extrema.poissonRatio.max.toFixed(5)}\t${isFinite(s.extrema.poissonRatio.anisotropy)?s.extrema.poissonRatio.anisotropy.toFixed(2):"\u221e"}`),navigator.clipboard.writeText(t).then((()=>{console.log("Table copied to clipboard")})).catch((e=>{console.error("Failed to copy table: ",e)}))};function d(e){return{youngs:"Young's Modulus",linear_compressibility:"Linear Compressibility",shear:"Shear Modulus",poisson:"Poisson's Ratio"}[e]||e}function m(e){return{youngs:"GPa",linear_compressibility:"TPa\u207b\xb9",shear:"GPa",poisson:""}[e]||""}const u={TEST_VALUE:"var(--tensor-test-color)",REFERENCE_VALUE:"var(--tensor-reference-color)",DIFFERENCE_LIGHT:"var(--tensor-text-light)",DIFFERENCE_DARK:"var(--tensor-text-dark)",SMALL_DIFF:"var(--tensor-text-small-diff)"};function h(){const e=getComputedStyle(document.documentElement);return{testColor:e.getPropertyValue("--tensor-test-color").trim()||"#ff6600",referenceColor:e.getPropertyValue("--tensor-reference-color").trim()||"#0066cc",differenceColor:e.getPropertyValue("--tensor-difference-color").trim()||"#cc0066",diffNegativeColor:e.getPropertyValue("--tensor-matrix-diff-negative").trim()||"#2196f3",diffZeroColor:e.getPropertyValue("--tensor-matrix-diff-zero").trim()||"#ffffff",diffPositiveColor:e.getPropertyValue("--tensor-matrix-diff-positive").trim()||"#f44336",singleLowColor:e.getPropertyValue("--tensor-matrix-single-low").trim()||"#ffffff",singleMidColor:e.getPropertyValue("--tensor-matrix-single-mid").trim()||"#9e9e9e",singleHighColor:e.getPropertyValue("--tensor-matrix-single-high").trim()||"#757575"}}var x=t(5098),p=t(4848);const f=r.forwardRef(((e,s)=>{const{data:t,property:o,referenceData:i,comparisonMode:n=!1,showDifference:l=!1,testTensorName:c="Test Tensor",referenceTensorName:u="Reference Tensor"}=e,f=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(!f.current||0===t.length)return;const e=x.Ts(f.current),s=h(),r="shear"===o||"poisson"===o,p=[];let y=t.map((e=>e.value));n&&i&&(y=[...y,...i.map((e=>e.value))]);Math.min(...y),Math.max(...y);if(n&&i)if(l){const e=a(t,i);p.push({name:`Difference (${c} - ${u})`,type:"line",data:e.map((e=>[e.angle,e.value])),smooth:!0,lineStyle:{width:3,color:s.differenceColor},areaStyle:{color:s.differenceColor,opacity:.4},itemStyle:{color:s.differenceColor},symbol:"none",animation:!1})}else r?p.push({name:`${c} Max`,type:"line",data:t.map((e=>[e.angle,e.value])),smooth:!0,lineStyle:{width:2,color:s.testColor},areaStyle:{color:s.testColor,opacity:.2},itemStyle:{color:s.testColor},symbol:"none",animation:!1},{name:`${c} Min`,type:"line",data:t.map((e=>[e.angle,e.valueMin||0])),smooth:!0,lineStyle:{width:2,color:"#ff9944"},areaStyle:{color:"#ff9944",opacity:.2},itemStyle:{color:"#ff9944"},symbol:"none",animation:!1},{name:`${u} Max`,type:"line",data:i.map((e=>[e.angle,e.value])),smooth:!0,lineStyle:{width:2,color:s.referenceColor,type:"dashed"},areaStyle:{color:s.referenceColor,opacity:.1},itemStyle:{color:s.referenceColor},symbol:"none",animation:!1},{name:`${u} Min`,type:"line",data:i.map((e=>[e.angle,e.valueMin||0])),smooth:!0,lineStyle:{width:2,color:"#4499cc",type:"dashed"},areaStyle:{color:"#4499cc",opacity:.1},itemStyle:{color:"#4499cc"},symbol:"none",animation:!1}):p.push({name:c,type:"line",data:t.map((e=>[e.angle,e.value])),smooth:!0,lineStyle:{width:2,color:s.testColor},areaStyle:{color:s.testColor,opacity:.2},itemStyle:{color:s.testColor},symbol:"none",animation:!1},{name:u,type:"line",data:i.map((e=>[e.angle,e.value])),smooth:!0,lineStyle:{width:2,color:s.referenceColor,type:"dashed"},areaStyle:{color:s.referenceColor,opacity:.1},itemStyle:{color:s.referenceColor},symbol:"none",animation:!1});else if(r){const e=t.map((e=>e.valueMin||0)),r=[...y,...e];Math.min(...r),Math.max(...r);p.push({name:"Maximum",type:"line",data:t.map((e=>[e.angle,e.value])),smooth:!0,lineStyle:{width:2,color:s.testColor},areaStyle:{color:s.testColor,opacity:.3},itemStyle:{color:s.testColor},symbol:"none",animation:!1}),p.push({name:"Minimum",type:"line",data:t.map((e=>[e.angle,e.valueMin||0])),smooth:!0,lineStyle:{width:2,color:s.referenceColor},areaStyle:{color:s.referenceColor,opacity:.3},itemStyle:{color:s.referenceColor},symbol:"none",animation:!1})}else p.push({name:"Value",type:"line",data:t.map((e=>[e.angle,e.value])),smooth:!0,lineStyle:{width:2,color:s.referenceColor},areaStyle:{color:s.referenceColor,opacity:.3},itemStyle:{color:s.referenceColor},symbol:"none",animation:!1});const g={animation:!1,title:{show:!1},toolbox:{show:!0,orient:"vertical",left:"right",top:"top",feature:{saveAsImage:{show:!0,title:"Save as PNG",backgroundColor:"#ffffff",pixelRatio:2}}},grid:{left:80,right:40,top:70,bottom:70,borderWidth:0},tooltip:{trigger:"axis",formatter:e=>{let s=`Angle: ${e[0].data[0].toFixed(1)}\xb0<br/>`;return e.forEach((e=>{s+=`${e.seriesName}: ${e.data[1].toFixed(3)} ${m(o)}<br/>`})),s}},legend:{show:!0,top:10,textStyle:{color:"var(--ifm-color-emphasis-800)",fontSize:12},data:n&&i?l?[{name:`Difference (${c} - ${u})`,itemStyle:{color:s.differenceColor}}]:r?[{name:`${c} Max`,itemStyle:{color:s.testColor}},{name:`${c} Min`,itemStyle:{color:"#ff9944"}},{name:`${u} Max`,itemStyle:{color:s.referenceColor}},{name:`${u} Min`,itemStyle:{color:"#4499cc"}}]:[{name:c,itemStyle:{color:s.testColor}},{name:u,itemStyle:{color:s.referenceColor}}]:r?[{name:"Maximum",itemStyle:{color:s.testColor}},{name:"Minimum",itemStyle:{color:s.referenceColor}}]:[{name:"Value",itemStyle:{color:s.referenceColor}}]},xAxis:{type:"value",name:"Angle (degrees)",nameLocation:"center",nameGap:30,min:0,max:360,axisLabel:{formatter:"{value}\xb0",margin:15}},yAxis:{type:"value",name:`${d(o)} (${m(o)})`,nameLocation:"center",nameGap:60,nameRotate:90,scale:!0,axisLabel:{margin:15}},series:p};e.setOption(g);const j=()=>e.resize();return window.addEventListener("resize",j),()=>{window.removeEventListener("resize",j),e.dispose()}}),[t,o,i,n,l,c,u]),(0,p.jsx)("div",{ref:f,style:{width:"100%",height:"100%",aspectRatio:"1/1"}})})),y=({data:e,property:s,plane:t,referenceData:o,comparisonMode:i=!1,showDifference:n=!1,testTensorName:l="Test Tensor",referenceTensorName:c="Reference Tensor"})=>{const d=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(!d.current||0===e.length)return;const r=h(),u=x.Ts(d.current),p=e.map((e=>{if(void 0!==e.x&&void 0!==e.y)return[e.x,e.y];const s=e.angleRad,t=e.value;let r,o;return r=t*Math.cos(s),o=t*Math.sin(s),[r,o]}));let f=p.flat();if(i&&o&&o.length>0){const e=o.map((e=>{if(void 0!==e.x&&void 0!==e.y)return[e.x,e.y];const s=e.angleRad,t=e.value;return[t*Math.cos(s),t*Math.sin(s)]}));f=[...f,...e.flat()]}const y=Math.max(...f.map((e=>Math.abs(e)))),g=e.map((e=>e.value)),j=(Math.min(...g),Math.max(...g),(e=>{switch(e){case"xy":default:return{x:"X",y:"Y"};case"xz":return{x:"X",y:"Z"};case"yz":return{x:"Y",y:"Z"}}})(t)),v={animation:!1,title:{show:!1},toolbox:{show:!0,orient:"vertical",left:"right",top:"top",feature:{saveAsImage:{show:!0,title:"Save as PNG",backgroundColor:"#ffffff",pixelRatio:2}}},tooltip:{trigger:"item",formatter:e=>{const[t,r]=e.data,o=Math.sqrt(t*t+r*r),i=180*Math.atan2(r,t)/Math.PI;return`${j.x}: ${t.toFixed(2)}<br/>${j.y}: ${r.toFixed(2)}<br/>Value: ${o.toFixed(3)} ${m(s)}<br/>Angle: ${i.toFixed(1)}\xb0`}},grid:{left:80,right:40,top:70,bottom:70,borderWidth:0},xAxis:{type:"value",name:j.x,nameLocation:"center",nameGap:35,min:1.1*-y,max:1.1*y,axisLabel:{fontSize:10,formatter:e=>e.toFixed(0),margin:15}},yAxis:{type:"value",name:j.y,nameLocation:"center",nameGap:35,min:1.1*-y,max:1.1*y,axisLabel:{fontSize:10,formatter:e=>e.toFixed(0),margin:15}},series:(()=>{const t="shear"===s||"poisson"===s,d=[];if(i&&o)if(n){const s=a(e,o).map((e=>{const s=e.angleRad,t=e.value;return[t*Math.cos(s),t*Math.sin(s)]}));d.push({name:`Difference (${l} - ${c})`,type:"line",data:s,smooth:!1,lineStyle:{width:3,color:r.differenceColor,type:"solid"},areaStyle:{opacity:.4,color:r.differenceColor},symbol:"circle",symbolSize:4,itemStyle:{color:r.differenceColor},animation:!1,connectNulls:!0,emphasis:{lineStyle:{width:4},itemStyle:{borderWidth:2,borderColor:"#ffffff"}}})}else if(t){const s=e.map((e=>{const s=e.angleRad,t=e.value;return[t*Math.cos(s),t*Math.sin(s)]})),t=e.map((e=>{const s=e.angleRad,t=e.valueMin||0;return[t*Math.cos(s),t*Math.sin(s)]})),i=o.map((e=>{const s=e.angleRad,t=e.value;return[t*Math.cos(s),t*Math.sin(s)]})),a=o.map((e=>{const s=e.angleRad,t=e.valueMin||0;return[t*Math.cos(s),t*Math.sin(s)]}));d.push({name:`${l} Max`,type:"line",data:s,smooth:!1,lineStyle:{width:2,color:r.testColor},areaStyle:{opacity:.2,color:r.testColor},symbol:"none",animation:!1,connectNulls:!0},{name:`${l} Min`,type:"line",data:t,smooth:!1,lineStyle:{width:2,color:"#ff9944"},areaStyle:{opacity:.2,color:"#ff9944"},symbol:"none",animation:!1,connectNulls:!0},{name:`${c} Max`,type:"line",data:i,smooth:!1,lineStyle:{width:2,color:r.referenceColor,type:"dashed"},areaStyle:{opacity:.1,color:r.referenceColor},symbol:"none",animation:!1,connectNulls:!0},{name:`${c} Min`,type:"line",data:a,smooth:!1,lineStyle:{width:2,color:"#4499cc",type:"dashed"},areaStyle:{opacity:.1,color:"#4499cc"},symbol:"none",animation:!1,connectNulls:!0})}else{const s=e.map((e=>{if(void 0!==e.x&&void 0!==e.y)return[e.x,e.y];const s=e.angleRad,t=e.value;return[t*Math.cos(s),t*Math.sin(s)]})),t=o.map((e=>{if(void 0!==e.x&&void 0!==e.y)return[e.x,e.y];const s=e.angleRad,t=e.value;return[t*Math.cos(s),t*Math.sin(s)]}));d.push({name:l,type:"line",data:s,smooth:!1,lineStyle:{width:2,color:r.testColor},areaStyle:{opacity:.2,color:r.testColor},symbol:"none",animation:!1,connectNulls:!0},{name:c,type:"line",data:t,smooth:!1,lineStyle:{width:2,color:r.referenceColor,type:"dashed"},areaStyle:{opacity:.1,color:r.referenceColor},symbol:"none",animation:!1,connectNulls:!0})}else if(t){const s=e.map((e=>{if(void 0!==e.x&&void 0!==e.y)return[e.x,e.y];const s=e.angleRad,t=e.value;return[t*Math.cos(s),t*Math.sin(s)]})),t=e.map((e=>{const s=e.angleRad,t=e.valueMin||0;return[t*Math.cos(s),t*Math.sin(s)]}));d.push({name:"Maximum",type:"line",data:s,smooth:!1,lineStyle:{width:2,color:r.testColor},areaStyle:{opacity:.3,color:r.testColor},symbol:"none",animation:!1,connectNulls:!0},{name:"Minimum",type:"line",data:t,smooth:!1,lineStyle:{width:2,color:r.referenceColor},areaStyle:{opacity:.3,color:r.referenceColor},symbol:"none",animation:!1,connectNulls:!0})}else d.push({type:"line",data:p,smooth:!1,lineStyle:{width:2,color:r.referenceColor},areaStyle:{opacity:.3,color:r.referenceColor},symbol:"none",animation:!1,connectNulls:!0});return d})(),legend:{show:"shear"===s||"poisson"===s||i&&o,top:30,textStyle:{color:"var(--ifm-color-emphasis-800)",fontSize:12},data:i&&o?n?[{name:`Difference (${l} - ${c})`,itemStyle:{color:r.differenceColor}}]:"shear"===s||"poisson"===s?[{name:`${l} Max`,itemStyle:{color:r.testColor}},{name:`${l} Min`,itemStyle:{color:"#ff9944"}},{name:`${c} Max`,itemStyle:{color:r.referenceColor}},{name:`${c} Min`,itemStyle:{color:"#4499cc"}}]:[{name:l,itemStyle:{color:r.testColor}},{name:c,itemStyle:{color:r.referenceColor}}]:"shear"===s||"poisson"===s?[{name:"Maximum",itemStyle:{color:r.testColor}},{name:"Minimum",itemStyle:{color:r.referenceColor}}]:[]},tooltip:{trigger:"item",formatter:e=>{const[t,r]=e.data,o=Math.sqrt(t*t+r*r),i=180*Math.atan2(r,t)/Math.PI;return`${j.x}: ${t.toFixed(2)}<br/>${j.y}: ${r.toFixed(2)}<br/>Value: ${o.toFixed(3)} ${m(s)}<br/>Angle: ${i.toFixed(1)}\xb0`}},grid:{left:"10%",right:"10%",top:"15%",bottom:"15%"}};u.setOption(v);const M=()=>u.resize();return window.addEventListener("resize",M),()=>{window.removeEventListener("resize",M),u.dispose()}}),[e,s,t,o,i,n,l,c]),(0,p.jsx)("div",{ref:d,style:{width:"100%",height:"100%",aspectRatio:"1/1"}})},g=({data:e,property:s,useScatter:t=!0,referenceData:o,comparisonMode:i=!1,showDifference:a=!1,testTensorName:n="Test Tensor",referenceTensorName:l="Reference Tensor"})=>{const c=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(!c.current||!e)return;const r=x.Ts(c.current),u=h(),p=e.surfaceData.flat().sort(((e,s)=>e-s)),f=p[Math.floor(.05*p.length)],y=p[Math.floor(.95*p.length)],g=f,j=y,v={animation:!1,title:{show:!1},toolbox:{show:!0,orient:"vertical",left:"right",top:"top",feature:{saveAsImage:{show:!0,title:"Save as PNG",backgroundColor:"#ffffff",pixelRatio:2}}},tooltip:{trigger:"item",formatter:e=>{if(i&&o&&a){const t=e.value[3];return`Difference: ${t>=0?"+":""}${t.toFixed(3)} ${m(s)}`}{const t=e.value[2];return`${d(s)}: ${t.toFixed(3)} ${m(s)}`}}},visualMap:(()=>{if(!i||!o||a){if(i&&o&&a){const s=[];for(let r=0;r<e.numU&&r<o.numU;r++)for(let t=0;t<e.numV&&t<o.numV;t++){const i=e.surfaceData[r]&&e.surfaceData[r][t]?e.surfaceData[r][t]:0,a=o.surfaceData[r]&&o.surfaceData[r][t]?o.surfaceData[r][t]:0;s.push(i-a)}const t=Math.max(...s.map(Math.abs));return{show:!1,dimension:3,min:-t,max:t,calculable:!0,realtime:!1,inRange:{color:[u.referenceColor,u.diffZeroColor,u.testColor]}}}return{show:!1,dimension:3,min:g,max:j,calculable:!0,realtime:!1,inRange:{color:[u.referenceColor,u.testColor]}}}})(),xAxis3D:{type:"value",name:"X",nameTextStyle:{color:"var(--ifm-color-emphasis-800)"}},yAxis3D:{type:"value",name:"Y",nameTextStyle:{color:"var(--ifm-color-emphasis-800)"}},zAxis3D:{type:"value",name:"Z",nameTextStyle:{color:"var(--ifm-color-emphasis-800)"}},grid3D:{viewControl:{projection:"perspective"}},legend:{show:i&&o,data:i&&o&&a?[`Difference (${n} - ${l})`]:i&&o?[n,l]:[],textStyle:{color:"var(--ifm-color-emphasis-800)"}},series:(()=>{const s=[];return i&&o&&a?t?s.push({name:`Difference (${n} - ${l})`,type:"scatter3D",data:(()=>{const s=[];for(let t=0;t<e.numU&&t<o.numU;t++)for(let r=0;r<e.numV&&r<o.numV;r++){const i=t/(e.numU-1)*2*Math.PI,a=r/(e.numV-1)*Math.PI,n=(e.surfaceData[t]&&e.surfaceData[t][r]?e.surfaceData[t][r]:0)-(o.surfaceData[t]&&o.surfaceData[t][r]?o.surfaceData[t][r]:0),l=n*Math.sin(a)*Math.cos(i),c=n*Math.sin(a)*Math.sin(i),d=n*Math.cos(a);s.push([l,c,d,n])}return s})(),symbolSize:2.5,itemStyle:{opacity:.9}}):s.push({name:`Difference (${n} - ${l})`,type:"surface",parametric:!0,itemStyle:{opacity:.8},parametricEquation:{u:{min:0,max:2*Math.PI,step:2*Math.PI/(e.numU-1)},v:{min:0,max:Math.PI,step:Math.PI/(e.numV-1)},x:(s,t)=>{const r=Math.round(s/(2*Math.PI)*(e.numU-1)),i=Math.round(t/Math.PI*(e.numV-1));return((e.surfaceData[r]&&e.surfaceData[r][i]?e.surfaceData[r][i]:0)-(o.surfaceData[r]&&o.surfaceData[r][i]?o.surfaceData[r][i]:0))*Math.sin(t)*Math.cos(s)},y:(s,t)=>{const r=Math.round(s/(2*Math.PI)*(e.numU-1)),i=Math.round(t/Math.PI*(e.numV-1));return((e.surfaceData[r]&&e.surfaceData[r][i]?e.surfaceData[r][i]:0)-(o.surfaceData[r]&&o.surfaceData[r][i]?o.surfaceData[r][i]:0))*Math.sin(t)*Math.sin(s)},z:(s,t)=>{const r=Math.round(s/(2*Math.PI)*(e.numU-1)),i=Math.round(t/Math.PI*(e.numV-1));return((e.surfaceData[r]&&e.surfaceData[r][i]?e.surfaceData[r][i]:0)-(o.surfaceData[r]&&o.surfaceData[r][i]?o.surfaceData[r][i]:0))*Math.cos(t)}},data:(()=>{const s=[];for(let t=0;t<e.numU;t++){const r=[];for(let s=0;s<e.numV;s++){const i=e.surfaceData[t]&&e.surfaceData[t][s]?e.surfaceData[t][s]:0,a=o.surfaceData[t]&&o.surfaceData[t][s]?o.surfaceData[t][s]:0;r.push(i-a)}s.push(r)}return s})()}):t?(s.push({name:i&&o?n:"Data",type:"scatter3D",data:(()=>{const s=[];for(let t=0;t<e.numU;t++)for(let r=0;r<e.numV;r++){const o=t/(e.numU-1)*2*Math.PI,i=r/(e.numV-1)*Math.PI,a=e.surfaceData[t]&&e.surfaceData[t][r]?e.surfaceData[t][r]:0,n=a*Math.sin(i)*Math.cos(o),l=a*Math.sin(i)*Math.sin(o),c=a*Math.cos(i);s.push([n,l,c,a])}return s})(),symbolSize:2.5,itemStyle:{opacity:.9,color:i&&o?u.testColor:void 0}}),i&&o&&s.push({name:l,type:"scatter3D",data:(()=>{const e=[];for(let s=0;s<o.numU;s++)for(let t=0;t<o.numV;t++){const r=s/(o.numU-1)*2*Math.PI,i=t/(o.numV-1)*Math.PI,a=o.surfaceData[s]&&o.surfaceData[s][t]?o.surfaceData[s][t]:0,n=a*Math.sin(i)*Math.cos(r),l=a*Math.sin(i)*Math.sin(r),c=a*Math.cos(i);e.push([n,l,c,a])}return e})(),symbolSize:2.5,itemStyle:{opacity:.7,color:u.referenceColor}})):(s.push({type:"surface",parametric:!0,shading:"lambert",wireframe:{show:!0,lineStyle:{color:"rgba(0,0,0,0.1)",width:.5}},itemStyle:{opacity:.8,color:i&&o?u.testColor:void 0},parametricEquation:{u:{min:0,max:2*Math.PI,step:2*Math.PI/(e.numU-1)},v:{min:0,max:Math.PI,step:Math.PI/(e.numV-1)},x:function(s,t){const r=Math.round(s/(2*Math.PI)*(e.numU-1)),o=Math.round(t/Math.PI*(e.numV-1));return(e.surfaceData[r]&&e.surfaceData[r][o]?e.surfaceData[r][o]:0)*Math.sin(t)*Math.cos(s)},y:function(s,t){const r=Math.round(s/(2*Math.PI)*(e.numU-1)),o=Math.round(t/Math.PI*(e.numV-1));return(e.surfaceData[r]&&e.surfaceData[r][o]?e.surfaceData[r][o]:0)*Math.sin(t)*Math.sin(s)},z:function(s,t){const r=Math.round(s/(2*Math.PI)*(e.numU-1)),o=Math.round(t/Math.PI*(e.numV-1));return(e.surfaceData[r]&&e.surfaceData[r][o]?e.surfaceData[r][o]:0)*Math.cos(t)}}}),i&&o&&s.push({type:"surface",parametric:!0,shading:"lambert",wireframe:{show:!0,lineStyle:{color:"rgba(0,0,0,0.1)",width:.5}},itemStyle:{opacity:.6,color:u.referenceColor},parametricEquation:{u:{min:0,max:2*Math.PI,step:2*Math.PI/(o.numU-1)},v:{min:0,max:Math.PI,step:Math.PI/(o.numV-1)},x:function(e,s){const t=Math.round(e/(2*Math.PI)*(o.numU-1)),r=Math.round(s/Math.PI*(o.numV-1));return(o.surfaceData[t]&&o.surfaceData[t][r]?o.surfaceData[t][r]:0)*Math.sin(s)*Math.cos(e)},y:function(e,s){const t=Math.round(e/(2*Math.PI)*(o.numU-1)),r=Math.round(s/Math.PI*(o.numV-1));return(o.surfaceData[t]&&o.surfaceData[t][r]?o.surfaceData[t][r]:0)*Math.sin(s)*Math.sin(e)},z:function(e,s){const t=Math.round(e/(2*Math.PI)*(o.numU-1)),r=Math.round(s/Math.PI*(o.numV-1));return(o.surfaceData[t]&&o.surfaceData[t][r]?o.surfaceData[t][r]:0)*Math.cos(s)}}})),s})()};r.setOption(v);const M=()=>r.resize();return window.addEventListener("resize",M),()=>{window.removeEventListener("resize",M),r.dispose()}}),[e,s,t,o,i,a,n,l]),(0,p.jsx)("div",{ref:c,style:{width:"100%",height:"100%",minHeight:"400px"}})},j=({data:e,referenceData:s,comparisonMode:t=!1,showDifference:o=!1,testTensorName:i="Test Tensor",referenceTensorName:a="Reference Tensor"})=>{const n=(0,r.useRef)(null);return(0,r.useEffect)((()=>{if(!n.current||!e)return;const r=x.Ts(n.current),l=h(),c=n.current.getBoundingClientRect(),d=c.width||400,m=c.height||400,p=Math.min(d,m),f=Math.max(10,Math.min(20,p/25)),y=f,g=Math.max(10,.8*f),j=Math.max(8,.7*f),v=Math.max(7,.6*f),M=[],b=[];if(t&&s&&o)for(let t=0;t<6;t++)for(let r=0;r<6;r++){const o=e[t][r]-s[t][r],i=e[t][r],a=s[t][r];(Math.abs(o)>1e-10||Math.abs(i)>1e-10||Math.abs(a)>1e-10)&&(M.push([r,5-t,o,i,a]),b.push(o))}else if(t&&s)for(let t=0;t<6;t++)for(let r=0;r<6;r++){const o=e[t][r],i=s[t][r];(Math.abs(o)>1e-10||Math.abs(i)>1e-10)&&(M.push([r,5-t,o,i]),b.push(o),b.push(i))}else for(let s=0;s<6;s++)for(let t=0;t<6;t++){const r=e[s][t];Math.abs(r)>1e-10&&(M.push([t,5-s,r]),b.push(r))}const C=Math.min(...b),S=Math.max(...b),T=t&&s&&o,N=T?Math.max(Math.abs(C),Math.abs(S)):0;const F={animation:!1,title:{show:!1},toolbox:{show:!0,orient:"vertical",left:"right",top:"top",feature:{saveAsImage:{show:!0,title:"Save as PNG",backgroundColor:"#ffffff",pixelRatio:2}}},tooltip:{trigger:"item",formatter:e=>{const[r,o,n]=e.data,l=`C${5-o+1}${r+1}`;if(T){const s=e.data[2],t=e.data[3],r=e.data[4],o=0!==r?(t-r)/Math.abs(r)*100:0;return`${l}<br/>${i}: ${t.toFixed(3)} GPa<br/>${a}: ${r.toFixed(3)} GPa<br/>Difference: ${s>=0?"+":""}${s.toFixed(3)} GPa<br/>Change: ${o>=0?"+":""}${o.toFixed(1)}%`}if(t&&s){const s=e.data[2],t=e.data[3],r=s-t,o=0!==t?(s-t)/Math.abs(t)*100:0;return`${l}<br/>${i}: ${s.toFixed(3)} GPa<br/>${a}: ${t.toFixed(3)} GPa<br/>Difference: ${r>=0?"+":""}${r.toFixed(3)} GPa<br/>Change: ${o>=0?"+":""}${o.toFixed(1)}%`}return`${l}: ${n.toFixed(3)} GPa`}},grid:{height:"60%",width:"60%",left:"center",top:60,containLabel:!0},xAxis:{type:"category",data:["C\u2081\u2081","C\u2081\u2082","C\u2081\u2083","C\u2081\u2084","C\u2081\u2085","C\u2081\u2086"],position:"top",axisLine:{show:!0},axisTick:{show:!1},axisLabel:{fontSize:g,color:"var(--ifm-color-emphasis-800)"},splitLine:{show:!1}},yAxis:{type:"category",data:["C\u2086\u2081","C\u2085\u2081","C\u2084\u2081","C\u2083\u2081","C\u2082\u2081","C\u2081\u2081"],axisLine:{show:!0},axisTick:{show:!1},axisLabel:{fontSize:g,color:"var(--ifm-color-emphasis-800)"},splitLine:{show:!1}},visualMap:{min:T?-N:C,max:T?N:S,calculable:!0,orient:"horizontal",left:"center",bottom:"5%",splitNumber:T?4:3,inRange:T?{color:[l.diffNegativeColor,l.diffPositiveColor]}:{color:[l.singleLowColor,l.singleMidColor,l.singleHighColor]},text:T?[`${a} Higher`,`${i} Higher`]:["Low","High"],textStyle:{color:"var(--ifm-color-emphasis-800)",fontSize:Math.max(8,.8*g)}},series:[{name:"Tensor Values",type:"heatmap",data:M,label:{show:!0,formatter:e=>{const r=e.data;if(T){const e=r[2],s=e>=0?"+":"";return Math.abs(e)>=100?`${s}${e.toFixed(0)}`:`${s}${e.toFixed(2)}`}if(t&&s&&r.length>=4){const e=r[2],s=r[3];return`{test|${Math.abs(e)>=100?e.toFixed(0):e.toFixed(2)}}\n{ref|${Math.abs(s)>=100?s.toFixed(0):s.toFixed(2)}}`}{const e=r[2];return Math.abs(e)>=100?e.toFixed(0):e.toFixed(2)}},color:T?"#000000":u.DIFFERENCE_LIGHT,fontSize:T?.85*y:t&&s&&!o?j:y,lineHeight:t&&s&&!o?1.2*j:1.1*y,rich:t&&s&&!o?{test:{color:l.testColor,fontWeight:"bold",fontSize:j},ref:{color:l.referenceColor,fontWeight:"normal",fontSize:v}}:void 0},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};r.setOption(F);const w=()=>{r.resize()};return window.addEventListener("resize",w),()=>{window.removeEventListener("resize",w),r.dispose()}}),[e,s,t,o,i,a]),(0,p.jsx)("div",{ref:n,style:{width:"100%",height:"100%",minHeight:"350px",aspectRatio:"1/1"}})},v=({stiffnessMatrix:e,complianceMatrix:s,referenceStiffness:t,referenceCompliance:r,comparisonMode:o=!1,showDifference:a=!1,testTensorName:n="Test Tensor",referenceTensorName:l="Reference Tensor"})=>{const c=(e,s)=>{let t=`${s}\n`;t+=e.map((e=>e.map((e=>e.toFixed(3).padStart(10))).join(""))).join("\n"),navigator.clipboard.writeText(t)},d=(e,s,t)=>{let r=`${t} Comparison\n`;r+=`${n} vs ${l}\n\n`,r+=`${n}:\n`,r+=e.map((e=>e.map((e=>e.toFixed(3).padStart(10))).join(""))).join("\n"),r+=`\n\n${l}:\n`,r+=s.map((e=>e.map((e=>e.toFixed(3).padStart(10))).join(""))).join("\n"),r+=`\n\nDifferences (${n} - ${l}):\n`,r+=e.map(((e,t)=>e.map(((e,r)=>{const o=e-s[t][r];return(o>=0?"+":"")+o.toFixed(3).padStart(10)})).join(""))).join("\n"),navigator.clipboard.writeText(r)};return(0,p.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",width:"100%",minHeight:"450px",height:"auto"},children:[(0,p.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,p.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"0.5rem",flex:"none"},children:[(0,p.jsx)("h4",{style:{color:"var(--ifm-color-emphasis-800)",fontSize:"1rem",fontWeight:"600",margin:0},children:"Stiffness Matrix (C) - GPa"}),(0,p.jsxs)("div",{style:{display:"flex",gap:"0.25rem",marginLeft:"0.5rem"},children:[o&&t?(0,p.jsx)("button",{onClick:()=>d(e,t,"Stiffness Matrix (C) - GPa"),className:i.copyButton,title:"Copy stiffness matrix comparison to clipboard",children:(0,p.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,p.jsx)("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),(0,p.jsx)("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),(0,p.jsx)("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]})}):(0,p.jsx)("button",{onClick:()=>c(e,`Stiffness Matrix (C) - GPa - ${n}`),className:i.copyButton,title:"Copy stiffness matrix to clipboard",children:(0,p.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,p.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,p.jsx)("path",{d:"m5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})}),(0,p.jsx)("button",{onClick:()=>{const e=document.querySelector(".stiffness-matrix-chart");if(e){const s=x.FP(e);if(s){const e=s.getDataURL({type:"png",pixelRatio:2,backgroundColor:"#ffffff"}),t=document.createElement("a");t.download=`Stiffness_Matrix_${n.replace(/\s+/g,"_")}.png`,t.href=e,t.click()}}},className:i.copyButton,title:"Save stiffness matrix as PNG",children:(0,p.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,p.jsx)("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),(0,p.jsx)("polyline",{points:"17,21 17,13 7,13 7,21"}),(0,p.jsx)("polyline",{points:"7,3 7,8 15,8"})]})})]})]}),(0,p.jsx)("div",{style:{flex:"1",minHeight:"400px"},children:(0,p.jsx)("div",{className:"stiffness-matrix-chart",children:(0,p.jsx)(j,{data:e,referenceData:t,comparisonMode:o,showDifference:a,testTensorName:n,referenceTensorName:l})})})]}),(0,p.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,p.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"0.5rem",flex:"none"},children:[(0,p.jsx)("h4",{style:{color:"var(--ifm-color-emphasis-800)",fontSize:"1rem",fontWeight:"600",margin:0},children:"Compliance Matrix (S) - GPa\u207b\xb9"}),(0,p.jsxs)("div",{style:{display:"flex",gap:"0.25rem",marginLeft:"0.5rem"},children:[o&&r?(0,p.jsx)("button",{onClick:()=>d(s,r,"Compliance Matrix (S) - GPa\u207b\xb9"),className:i.copyButton,title:"Copy compliance matrix comparison to clipboard",children:(0,p.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,p.jsx)("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),(0,p.jsx)("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),(0,p.jsx)("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]})}):(0,p.jsx)("button",{onClick:()=>c(s,`Compliance Matrix (S) - GPa\u207b\xb9 - ${n}`),className:i.copyButton,title:"Copy compliance matrix to clipboard",children:(0,p.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,p.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,p.jsx)("path",{d:"m5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})}),(0,p.jsx)("button",{onClick:()=>{const e=document.querySelector(".compliance-matrix-chart");if(e){const s=x.FP(e);if(s){const e=s.getDataURL({type:"png",pixelRatio:2,backgroundColor:"#ffffff"}),t=document.createElement("a");t.download=`Compliance_Matrix_${n.replace(/\s+/g,"_")}.png`,t.href=e,t.click()}}},className:i.copyButton,title:"Save compliance matrix as PNG",children:(0,p.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,p.jsx)("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),(0,p.jsx)("polyline",{points:"17,21 17,13 7,13 7,21"}),(0,p.jsx)("polyline",{points:"7,3 7,8 15,8"})]})})]})]}),(0,p.jsx)("div",{style:{flex:"1",minHeight:"400px"},children:(0,p.jsx)("div",{className:"compliance-matrix-chart",children:(0,p.jsx)(j,{data:s,referenceData:r,comparisonMode:o,showDifference:a,testTensorName:n,referenceTensorName:l})})})]})]})},M=()=>{const[e,s]=(0,r.useState)(null),[o,a]=(0,r.useState)(!1),[d,m]=(0,r.useState)(""),[u,h]=(0,r.useState)(null),[x,j]=(0,r.useState)(null),[M,b]=(0,r.useState)("youngs"),[C,S]=(0,r.useState)("xy"),[T,N]=(0,r.useState)({}),[F,w]=(0,r.useState)(null),[D,k]=(0,r.useState)(!1),[R,$]=(0,r.useState)(!0),[P,z]=(0,r.useState)(!1),[L,I]=(0,r.useState)(""),[_,E]=(0,r.useState)(null),V=(0,r.useRef)(null),[G,B]=(0,r.useState)(null),[A,W]=(0,r.useState)({}),[H,U]=(0,r.useState)(null),[O,q]=(0,r.useState)(0),[Z,Y]=(0,r.useState)(!1),X=(0,r.useRef)(!1),[Q,J]=(0,r.useState)(!1),[K,ee]=(0,r.useState)(!1),[se,te]=(0,r.useState)(""),[re,oe]=(0,r.useState)([]),[ie,ae]=(0,r.useState)(""),[ne,le]=(0,r.useState)(""),[ce,de]=(0,r.useState)([]),[me,ue]=(0,r.useState)(!1),[he,xe]=(0,r.useState)(!1);(0,r.useEffect)((()=>(pe(),je(),()=>{e&&e.terminate()})),[]);const pe=async()=>{try{const e=new Worker(new URL(t.p+t.u(9761),t.b),{type:void 0});e.onmessage=fe,e.onerror=e=>{console.error("Worker error:",e),te("Worker error: "+e.message),a(!1)},s(e),e.postMessage({type:"init",data:{}})}catch(se){console.error("Failed to initialize worker:",se),te("Failed to initialize Web Worker: "+se.message)}},fe=e=>{const{type:s,...t}=e.data;switch(s){case"initialized":t.success?(a(!0),ge("Worker initialized successfully","info")):(a(!1),te("Worker initialization failed: "+t.error));break;case"log":ge(t.message,ye(t.level));break;case"analysisResult":t.success?X.current?(B(t.data),Y(!1),X.current=!1,setTimeout((()=>Te()),100),ee(!1)):(j(t.data),P||(setTimeout((()=>Te()),100),ee(!1))):(te("Analysis failed: "+t.error),ee(!1));break;case"directionalDataResult":t.success?t.isReference?W((e=>({...e,[t.plane]:t.data}))):N((e=>({...e,[t.plane]:t.data}))):te("Directional data generation failed: "+t.error);break;case"3DSurfaceResult":t.success?t.isReference?U(t.data):w(t.data):te("3D surface generation failed: "+t.error);break;case"error":console.error("Worker error:",t.error),te("Calculation error: "+t.error),ee(!1)}},ye=e=>{switch(e){case 0:case 1:return"debug";case 2:return"info";case 3:return"warning";default:return"error"}},ge=(e,s)=>{oe((t=>[...t,{message:e,level:s,timestamp:new Date}]))},je=()=>{try{const e=localStorage.getItem("elasticTensors");if(e){const s=JSON.parse(e).map((e=>({...e,timestamp:new Date(e.timestamp)})));de(s)}}catch(se){console.error("Failed to load saved tensors:",se)}},ve=(e,s)=>{if(e.trim()&&s.trim())try{const t=[{name:e.trim(),data:s.trim(),timestamp:new Date},...ce.filter((s=>s.name!==e.trim()))];de(t),localStorage.setItem("elasticTensors",JSON.stringify(t)),ge(`Saved tensor: ${e}`,"info")}catch(se){console.error("Failed to save tensor:",se),te("Failed to save tensor to localStorage")}},Me=e=>{try{const s=ce.filter((s=>s.name!==e));de(s),localStorage.setItem("elasticTensors",JSON.stringify(s)),ge(`Deleted tensor: ${e}`,"info")}catch(se){console.error("Failed to delete tensor:",se)}},be=(e,s=!1)=>{const t=ce.find((s=>s.name===e));t&&(s?(I(t.data),le(e)):(m(t.data),ae(e)),ge(`Loaded tensor: ${e}`,"info"))},Ce=()=>ie.trim()||"Test Tensor",Se=()=>ne.trim()||"Reference Tensor",Te=()=>{e&&o&&(u&&(["xy","xz","yz"].forEach((s=>{e.postMessage({type:"generateDirectionalData",data:{tensorData:u,property:M,plane:s,numPoints:180,isReference:!1}})})),e.postMessage({type:"generate3DSurfaceData",data:{tensorData:u,property:M,isReference:!1}})),P&&V.current&&(["xy","xz","yz"].forEach((s=>{e.postMessage({type:"generateDirectionalData",data:{tensorData:V.current,property:M,plane:s,numPoints:180,isReference:!0}})})),e.postMessage({type:"generate3DSurfaceData",data:{tensorData:V.current,property:M,isReference:!0}})))},Ne=e=>{const s=e.trim().split("\n").filter((e=>e.trim()));if(6!==s.length)throw new Error("Elastic tensor must have exactly 6 rows");const t=[];for(let i=0;i<s.length;i++){const e=s[i].trim().split(/\s+/).map(parseFloat);if(e.some(isNaN))throw new Error("All values must be valid numbers");t.push(e)}const r=t.every(((e,s)=>e.length===6-s)),o=t.every((e=>6===e.length));if(!r&&!o)throw new Error("Matrix must be either full 6x6 or upper triangular format");if(r){const e=Array(6).fill(0).map((()=>Array(6).fill(0)));for(let s=0;s<6;s++)for(let r=0;r<t[s].length;r++){const o=t[s][r],i=s+r;e[s][i]=o,e[i][s]=o}return e}return t};(0,r.useEffect)((()=>{J(!1)}),[P]),(0,r.useEffect)((()=>{const e=e=>{e.target.closest(".loadDropdownContainer")||(ue(!1),xe(!1))};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)}),[]),(0,r.useEffect)((()=>{u&&o&&(N({}),W({}),w(null),U(null),Te())}),[M,u,o,P]);const Fe=e=>{if("silicon"===e){m("166  64  64   0   0   0\n 64 166  64   0   0   0\n 64  64 166   0   0   0\n  0   0   0  80   0   0\n  0   0   0   0  80   0\n  0   0   0   0   0  80"),ae("Silicon")}else if("quartz"===e){m("48.137 11.411 12.783  0.000 -3.654  0.000\n11.411 34.968 14.749  0.000 -0.094  0.000\n12.783 14.749 26.015  0.000 -4.528  0.000\n 0.000  0.000  0.000 14.545  0.000  0.006\n-3.654 -0.094 -4.528  0.000 10.771  0.000\n 0.000  0.000  0.000  0.006  0.000 11.947"),ae("Quartz")}},we=e=>{if("silicon"===e){I("166  64  64   0   0   0\n 64 166  64   0   0   0\n 64  64 166   0   0   0\n  0   0   0  80   0   0\n  0   0   0   0  80   0\n  0   0   0   0   0  80"),le("Silicon")}else if("quartz"===e){I("48.137 11.411 12.783  0.000 -3.654  0.000\n11.411 34.968 14.749  0.000 -0.094  0.000\n12.783 14.749 26.015  0.000 -4.528  0.000\n 0.000  0.000  0.000 14.545  0.000  0.006\n-3.654 -0.094 -4.528  0.000 10.771  0.000\n 0.000  0.000  0.000  0.006  0.000 11.947"),le("Quartz")}};return(0,p.jsx)("div",{className:i.container,children:(0,p.jsxs)("div",{className:i.mainGrid,children:[(0,p.jsx)("div",{className:i.inputColumn,children:(0,p.jsxs)("div",{className:i.inputSection,children:[(0,p.jsxs)("div",{className:i.header,children:[(0,p.jsx)("h3",{children:P?"Primary Tensor Input":"Elastic Tensor Input"}),(0,p.jsxs)("div",{className:i.workerStatus,children:[(0,p.jsx)("span",{className:`${i.statusIndicator} ${o?i.ready:i.loading}`,children:o?"\u25cf":"\u25cb"}),o?"Ready":"Loading..."]})]}),(0,p.jsx)("div",{className:i.modeToggle,children:(0,p.jsxs)("label",{className:i.checkboxLabel,children:[(0,p.jsx)("input",{type:"checkbox",checked:P,onChange:e=>z(e.target.checked),className:i.checkbox}),"Comparison Mode"]})}),(0,p.jsx)("input",{type:"text",value:ie,onChange:e=>ae(e.target.value),placeholder:"Tensor name (e.g., 'Silicon_modified')",className:i.tensorNameInput}),(0,p.jsxs)("div",{className:i.tensorActions,children:[(0,p.jsxs)("div",{style:{position:"relative",flex:1},className:"loadDropdownContainer",children:[(0,p.jsxs)("button",{onClick:e=>{e.stopPropagation(),ue(!me)},className:i.loadButton,style:{width:"100%"},children:["Load Tensor (",ce.length+2,") \u25bc"]}),me&&(0,p.jsxs)("div",{className:i.loadDropdown,children:[(0,p.jsxs)("div",{style:{borderBottom:"1px solid var(--ifm-color-emphasis-300)",paddingBottom:"0.25rem",marginBottom:"0.25rem"},children:[(0,p.jsx)("div",{style:{fontSize:"0.7rem",color:"var(--ifm-color-emphasis-600)",padding:"0.15rem 0.5rem",fontWeight:"600"},children:"Example Tensors"}),(0,p.jsx)("div",{className:i.loadDropdownItem,onClick:()=>{Fe("silicon"),ue(!1)},style:{cursor:"pointer"},children:(0,p.jsxs)("div",{className:i.tensorInfo,children:[(0,p.jsx)("div",{children:"Silicon"}),(0,p.jsx)("div",{className:i.tensorTimestamp,children:"Cubic crystal example"})]})}),(0,p.jsx)("div",{className:i.loadDropdownItem,onClick:()=>{Fe("quartz"),ue(!1)},style:{cursor:"pointer"},children:(0,p.jsxs)("div",{className:i.tensorInfo,children:[(0,p.jsx)("div",{children:"Quartz"}),(0,p.jsx)("div",{className:i.tensorTimestamp,children:"Trigonal crystal example"})]})})]}),ce.length>0&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{style:{fontSize:"0.7rem",color:"var(--ifm-color-emphasis-600)",padding:"0.15rem 0.5rem",fontWeight:"600"},children:"Saved Tensors"}),ce.map((e=>(0,p.jsxs)("div",{className:i.loadDropdownItem,onClick:()=>{be(e.name,!1),ue(!1)},style:{cursor:"pointer"},children:[(0,p.jsxs)("div",{className:i.tensorInfo,children:[(0,p.jsx)("div",{children:e.name}),(0,p.jsxs)("div",{className:i.tensorTimestamp,children:[e.timestamp.toLocaleDateString()," ",e.timestamp.toLocaleTimeString()]})]}),(0,p.jsx)("button",{onClick:s=>{s.stopPropagation(),Me(e.name)},className:i.deleteButton,title:"Delete tensor",children:(0,p.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,p.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]},e.name)))]})]})]}),(0,p.jsx)("button",{onClick:()=>ve(ie,d),disabled:!ie.trim()||!d.trim(),className:i.saveButton,style:{flex:1},children:"Save Tensor"})]}),(0,p.jsx)("textarea",{value:d,onChange:e=>m(e.target.value),placeholder:"6x6 elastic stiffness matrix (GPa)...",rows:6,className:i.tensorInput}),P&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:i.header,style:{marginTop:"1rem"},children:(0,p.jsx)("h3",{children:"Comparison Tensor Input"})}),(0,p.jsx)("input",{type:"text",value:ne,onChange:e=>le(e.target.value),placeholder:"Reference tensor name",className:i.tensorNameInput}),(0,p.jsxs)("div",{className:i.tensorActions,children:[(0,p.jsxs)("div",{style:{position:"relative",flex:1},className:"loadDropdownContainer",children:[(0,p.jsxs)("button",{onClick:e=>{e.stopPropagation(),xe(!he)},className:i.loadButton,style:{width:"100%"},children:["Load Tensor (",ce.length+2,") \u25bc"]}),he&&(0,p.jsxs)("div",{className:i.loadDropdown,children:[(0,p.jsxs)("div",{style:{borderBottom:"1px solid var(--ifm-color-emphasis-300)",paddingBottom:"0.5rem",marginBottom:"0.5rem"},children:[(0,p.jsx)("div",{style:{fontSize:"0.75rem",color:"var(--ifm-color-emphasis-600)",padding:"0.25rem 0.5rem"},children:"Example Tensors"}),(0,p.jsx)("div",{className:i.loadDropdownItem,onClick:()=>{we("silicon"),xe(!1)},style:{cursor:"pointer"},children:(0,p.jsxs)("div",{className:i.tensorInfo,children:[(0,p.jsx)("div",{children:"Silicon"}),(0,p.jsx)("div",{className:i.tensorTimestamp,children:"Cubic crystal example"})]})}),(0,p.jsx)("div",{className:i.loadDropdownItem,onClick:()=>{we("quartz"),xe(!1)},style:{cursor:"pointer"},children:(0,p.jsxs)("div",{className:i.tensorInfo,children:[(0,p.jsx)("div",{children:"Quartz"}),(0,p.jsx)("div",{className:i.tensorTimestamp,children:"Trigonal crystal example"})]})})]}),ce.length>0&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{style:{fontSize:"0.7rem",color:"var(--ifm-color-emphasis-600)",padding:"0.15rem 0.5rem",fontWeight:"600"},children:"Saved Tensors"}),ce.map((e=>(0,p.jsxs)("div",{className:i.loadDropdownItem,onClick:()=>{be(e.name,!0),xe(!1)},style:{cursor:"pointer"},children:[(0,p.jsxs)("div",{className:i.tensorInfo,children:[(0,p.jsx)("div",{children:e.name}),(0,p.jsxs)("div",{className:i.tensorTimestamp,children:[e.timestamp.toLocaleDateString()," ",e.timestamp.toLocaleTimeString()]})]}),(0,p.jsx)("button",{onClick:s=>{s.stopPropagation(),Me(e.name)},className:i.deleteButton,title:"Delete tensor",children:(0,p.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:(0,p.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]},e.name)))]})]})]}),(0,p.jsx)("button",{onClick:()=>ve(ne,L),disabled:!ne.trim()||!L.trim(),className:i.saveButton,style:{flex:1},children:"Save Tensor"})]}),(0,p.jsx)("textarea",{value:L,onChange:e=>I(e.target.value),placeholder:"6x6 reference elastic stiffness matrix for comparison (GPa)...",rows:6,className:i.tensorInput})]}),(0,p.jsx)("button",{onClick:()=>{if(o)try{te(""),oe([]);const s=Ne(d);if(h(s),ee(!0),P&&L.trim()){const t=Ne(L);E(t),V.current=t,e?.postMessage({type:"analyzeTensor",data:{tensorData:s}}),setTimeout((()=>{Y(!0),X.current=!0,e?.postMessage({type:"analyzeTensor",data:{tensorData:t}})}),100)}else E(null),B(null),V.current=null,e?.postMessage({type:"analyzeTensor",data:{tensorData:s}})}catch(s){te(s.message),h(null),j(null),E(null),B(null)}else te("Worker not ready. Please wait for initialization.")},disabled:!o||K,className:i.analyzeButton,children:K?"Analyzing...":"Analyze"}),se&&(0,p.jsx)("div",{className:i.errorMessage,children:se}),re.length>0&&(0,p.jsx)("div",{className:i.logOutput,children:(0,p.jsx)("div",{className:i.logEntries,children:re.slice(-3).map(((e,s)=>(0,p.jsx)("div",{className:`${i.logEntry} ${i[e.level]}`,children:(0,p.jsx)("span",{className:i.message,children:e.message})},s)))})})]})}),(0,p.jsx)("div",{className:i.resultsColumn,children:x&&(0,p.jsxs)(p.Fragment,{children:[x.eigenvalues&&!x.isPositiveDefinite&&(0,p.jsxs)("div",{className:i.errorBanner,style:{backgroundColor:"#f8d7da",border:"1px solid #f5c6cb",borderLeft:"4px solid #dc3545",padding:"12px 16px",marginBottom:"20px",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,p.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#dc3545",strokeWidth:"2",children:[(0,p.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,p.jsx)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),(0,p.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("strong",{style:{color:"#721c24"},children:"Error: Tensor Not Positive Definite"}),(0,p.jsxs)("div",{style:{fontSize:"0.9em",color:"#721c24",marginTop:"4px"},children:["This elastic tensor has ",x.eigenvalues.filter((e=>e<=0)).length," non-positive eigenvalue(s), indicating this is not a stable minimum. The calculated properties and visualizations are not physically meaningful."]})]})]}),x.eigenvalueError&&(0,p.jsxs)("div",{className:i.warningBanner,style:{backgroundColor:"#f8d7da",border:"1px solid #f5c6cb",borderLeft:"4px solid #dc3545",padding:"12px 16px",marginBottom:"20px",borderRadius:"4px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,p.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#dc3545",strokeWidth:"2",children:[(0,p.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,p.jsx)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),(0,p.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("strong",{style:{color:"#721c24"},children:"Error: Cannot Calculate Eigenvalues"}),(0,p.jsx)("div",{style:{fontSize:"0.9em",color:"#721c24",marginTop:"4px"},children:x.eigenvalueError})]})]}),(0,p.jsxs)("div",{className:i.tablesGrid,children:[(0,p.jsxs)("div",{className:i.tableCell,children:[(0,p.jsxs)("h3",{children:[P&&G?"Comparison - Average Properties":"Average Properties",P&&!G&&" (Processing Reference...)",P&&G&&" \u2713",P&&G&&(0,p.jsxs)("span",{style:{fontSize:"0.7em",marginLeft:"1rem",color:"var(--ifm-color-emphasis-600)"},children:["Ref Data: ",Object.keys(A).join(", ")||"None"]}),(0,p.jsx)("button",{onClick:()=>c("averages",x),className:i.copyButton,title:"Copy table to clipboard",children:(0,p.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,p.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,p.jsx)("path",{d:"m5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})]}),(0,p.jsxs)("table",{className:i.propertiesTable,children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"Averaging scheme"}),(0,p.jsx)("th",{children:"Bulk modulus (GPa)"}),(0,p.jsx)("th",{children:"Young's modulus (GPa)"}),(0,p.jsx)("th",{children:"Shear modulus (GPa)"}),(0,p.jsx)("th",{children:"Poisson's ratio"})]})}),(0,p.jsx)("tbody",{children:P&&G?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"Voigt"}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.properties.bulkModulus.voigt.toFixed(3)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.properties.bulkModulus.voigt.toFixed(3),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.properties.bulkModulus.voigt-G.properties.bulkModulus.voigt)},children:[l(x.properties.bulkModulus.voigt-G.properties.bulkModulus.voigt),Math.abs(x.properties.bulkModulus.voigt-G.properties.bulkModulus.voigt).toFixed(3)]})]}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.properties.youngsModulus.voigt.toFixed(3)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.properties.youngsModulus.voigt.toFixed(3),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.properties.youngsModulus.voigt-G.properties.youngsModulus.voigt)},children:["(",l(x.properties.youngsModulus.voigt-G.properties.youngsModulus.voigt),Math.abs(x.properties.youngsModulus.voigt-G.properties.youngsModulus.voigt).toFixed(3),")"]})]}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.properties.shearModulus.voigt.toFixed(3)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.properties.shearModulus.voigt.toFixed(3),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.properties.shearModulus.voigt-G.properties.shearModulus.voigt)},children:["(",l(x.properties.shearModulus.voigt-G.properties.shearModulus.voigt),Math.abs(x.properties.shearModulus.voigt-G.properties.shearModulus.voigt).toFixed(3),")"]})]}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.properties.poissonRatio.voigt.toFixed(5)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.properties.poissonRatio.voigt.toFixed(5),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.properties.poissonRatio.voigt-G.properties.poissonRatio.voigt)},children:["(",l(x.properties.poissonRatio.voigt-G.properties.poissonRatio.voigt),Math.abs(x.properties.poissonRatio.voigt-G.properties.poissonRatio.voigt).toFixed(5),")"]})]})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"Reuss"}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.properties.bulkModulus.reuss.toFixed(3)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.properties.bulkModulus.reuss.toFixed(3),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.properties.bulkModulus.reuss-G.properties.bulkModulus.reuss)},children:["(",l(x.properties.bulkModulus.reuss-G.properties.bulkModulus.reuss),Math.abs(x.properties.bulkModulus.reuss-G.properties.bulkModulus.reuss).toFixed(3),")"]})]}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.properties.youngsModulus.reuss.toFixed(3)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.properties.youngsModulus.reuss.toFixed(3),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.properties.youngsModulus.reuss-G.properties.youngsModulus.reuss)},children:["(",l(x.properties.youngsModulus.reuss-G.properties.youngsModulus.reuss),Math.abs(x.properties.youngsModulus.reuss-G.properties.youngsModulus.reuss).toFixed(3),")"]})]}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.properties.shearModulus.reuss.toFixed(3)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.properties.shearModulus.reuss.toFixed(3),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.properties.shearModulus.reuss-G.properties.shearModulus.reuss)},children:["(",l(x.properties.shearModulus.reuss-G.properties.shearModulus.reuss),Math.abs(x.properties.shearModulus.reuss-G.properties.shearModulus.reuss).toFixed(3),")"]})]}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.properties.poissonRatio.reuss.toFixed(5)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.properties.poissonRatio.reuss.toFixed(5),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.properties.poissonRatio.reuss-G.properties.poissonRatio.reuss)},children:["(",l(x.properties.poissonRatio.reuss-G.properties.poissonRatio.reuss),Math.abs(x.properties.poissonRatio.reuss-G.properties.poissonRatio.reuss).toFixed(5),")"]})]})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"Hill"}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.properties.bulkModulus.hill.toFixed(3)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.properties.bulkModulus.hill.toFixed(3),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.properties.bulkModulus.hill-G.properties.bulkModulus.hill)},children:["(",l(x.properties.bulkModulus.hill-G.properties.bulkModulus.hill),Math.abs(x.properties.bulkModulus.hill-G.properties.bulkModulus.hill).toFixed(3),")"]})]}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.properties.youngsModulus.hill.toFixed(3)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.properties.youngsModulus.hill.toFixed(3),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.properties.youngsModulus.hill-G.properties.youngsModulus.hill)},children:["(",l(x.properties.youngsModulus.hill-G.properties.youngsModulus.hill),Math.abs(x.properties.youngsModulus.hill-G.properties.youngsModulus.hill).toFixed(3),")"]})]}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.properties.shearModulus.hill.toFixed(3)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.properties.shearModulus.hill.toFixed(3),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.properties.shearModulus.hill-G.properties.shearModulus.hill)},children:["(",l(x.properties.shearModulus.hill-G.properties.shearModulus.hill),Math.abs(x.properties.shearModulus.hill-G.properties.shearModulus.hill).toFixed(3),")"]})]}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.properties.poissonRatio.hill.toFixed(5)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.properties.poissonRatio.hill.toFixed(5),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.properties.poissonRatio.hill-G.properties.poissonRatio.hill)},children:["(",l(x.properties.poissonRatio.hill-G.properties.poissonRatio.hill),Math.abs(x.properties.poissonRatio.hill-G.properties.poissonRatio.hill).toFixed(5),")"]})]})]})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"Voigt"}),(0,p.jsxs)("td",{children:[(0,p.jsx)("em",{children:"K"}),(0,p.jsx)("sub",{children:"V"})," = ",x.properties.bulkModulus.voigt.toFixed(3)]}),(0,p.jsxs)("td",{children:[(0,p.jsx)("em",{children:"E"}),(0,p.jsx)("sub",{children:"V"})," = ",x.properties.youngsModulus.voigt.toFixed(3)]}),(0,p.jsxs)("td",{children:[(0,p.jsx)("em",{children:"G"}),(0,p.jsx)("sub",{children:"V"})," = ",x.properties.shearModulus.voigt.toFixed(3)]}),(0,p.jsxs)("td",{children:[(0,p.jsx)("em",{children:"\u03bd"}),(0,p.jsx)("sub",{children:"V"})," = ",x.properties.poissonRatio.voigt.toFixed(5)]})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"Reuss"}),(0,p.jsxs)("td",{children:[(0,p.jsx)("em",{children:"K"}),(0,p.jsx)("sub",{children:"R"})," = ",x.properties.bulkModulus.reuss.toFixed(3)]}),(0,p.jsxs)("td",{children:[(0,p.jsx)("em",{children:"E"}),(0,p.jsx)("sub",{children:"R"})," = ",x.properties.youngsModulus.reuss.toFixed(3)]}),(0,p.jsxs)("td",{children:[(0,p.jsx)("em",{children:"G"}),(0,p.jsx)("sub",{children:"R"})," = ",x.properties.shearModulus.reuss.toFixed(3)]}),(0,p.jsxs)("td",{children:[(0,p.jsx)("em",{children:"\u03bd"}),(0,p.jsx)("sub",{children:"R"})," = ",x.properties.poissonRatio.reuss.toFixed(5)]})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"Hill"}),(0,p.jsxs)("td",{children:[(0,p.jsx)("em",{children:"K"}),(0,p.jsx)("sub",{children:"H"})," = ",x.properties.bulkModulus.hill.toFixed(3)]}),(0,p.jsxs)("td",{children:[(0,p.jsx)("em",{children:"E"}),(0,p.jsx)("sub",{children:"H"})," = ",x.properties.youngsModulus.hill.toFixed(3)]}),(0,p.jsxs)("td",{children:[(0,p.jsx)("em",{children:"G"}),(0,p.jsx)("sub",{children:"H"})," = ",x.properties.shearModulus.hill.toFixed(3)]}),(0,p.jsxs)("td",{children:[(0,p.jsx)("em",{children:"\u03bd"}),(0,p.jsx)("sub",{children:"H"})," = ",x.properties.poissonRatio.hill.toFixed(5)]})]})]})})]})]}),(0,p.jsxs)("div",{className:`${i.tableCell} ${i.eigenvaluesCell}`,children:[(0,p.jsxs)("h3",{children:["Eigenvalues of the stiffness matrix",(0,p.jsx)("button",{onClick:()=>c("eigenvalues",x),className:i.copyButton,title:"Copy table to clipboard",children:(0,p.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,p.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,p.jsx)("path",{d:"m5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})]}),(0,p.jsxs)("table",{className:i.propertiesTable,children:[(0,p.jsx)("thead",{children:P&&G?(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{}),(0,p.jsx)("th",{children:"Values (GPa)"}),(0,p.jsx)("th",{children:"Difference"})]}):(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{}),(0,p.jsx)("th",{children:"Value (GPa)"})]})}),(0,p.jsx)("tbody",{children:P&&G?x.eigenvalues.map(((e,s)=>(0,p.jsxs)("tr",{children:[(0,p.jsxs)("td",{children:["\u03bb",(0,p.jsx)("sub",{children:s+1})]}),(0,p.jsxs)("td",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:e.toFixed(3)}),G.eigenvalues[s]&&(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.eigenvalues[s].toFixed(3),")"]})]}),(0,p.jsx)("td",{style:{color:G.eigenvalues[s]?n(e-G.eigenvalues[s]):"inherit"},children:G.eigenvalues[s]?`${l(e-G.eigenvalues[s])}${Math.abs(e-G.eigenvalues[s]).toFixed(3)}`:"N/A"})]},s))):x.eigenvalues.map(((e,s)=>(0,p.jsxs)("tr",{children:[(0,p.jsxs)("td",{children:["\u03bb",(0,p.jsx)("sub",{children:s+1})]}),(0,p.jsx)("td",{children:e.toFixed(3)})]},s)))})]})]}),(0,p.jsxs)("div",{className:i.tableCell,children:[(0,p.jsxs)("h3",{children:["Variations of the elastic moduli",(0,p.jsx)("button",{onClick:()=>c("variations",x),className:i.copyButton,title:"Copy table to clipboard",children:(0,p.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,p.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,p.jsx)("path",{d:"m5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})]}),(0,p.jsxs)("table",{className:i.propertiesTable,children:[(0,p.jsxs)("thead",{children:[(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{}),(0,p.jsx)("th",{colSpan:"2",children:"Young's modulus (GPa)"}),(0,p.jsxs)("th",{colSpan:"2",children:["Linear compressibility (TPa",(0,p.jsx)("sup",{children:"\u22121"}),")"]}),(0,p.jsx)("th",{colSpan:"2",children:"Shear modulus (GPa)"}),(0,p.jsx)("th",{colSpan:"2",children:"Poisson's ratio"})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{}),(0,p.jsxs)("th",{children:[(0,p.jsx)("em",{children:"E"}),(0,p.jsx)("sub",{children:"min"})]}),(0,p.jsxs)("th",{children:[(0,p.jsx)("em",{children:"E"}),(0,p.jsx)("sub",{children:"max"})]}),(0,p.jsxs)("th",{children:["\u03b2",(0,p.jsx)("sub",{children:"min"})]}),(0,p.jsxs)("th",{children:["\u03b2",(0,p.jsx)("sub",{children:"max"})]}),(0,p.jsxs)("th",{children:[(0,p.jsx)("em",{children:"G"}),(0,p.jsx)("sub",{children:"min"})]}),(0,p.jsxs)("th",{children:[(0,p.jsx)("em",{children:"G"}),(0,p.jsx)("sub",{children:"max"})]}),(0,p.jsxs)("th",{children:["\u03bd",(0,p.jsx)("sub",{children:"min"})]}),(0,p.jsxs)("th",{children:["\u03bd",(0,p.jsx)("sub",{children:"max"})]})]})]}),(0,p.jsx)("tbody",{children:P&&G?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"Value"}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.extrema.youngsModulus.min.toFixed(3)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.extrema.youngsModulus.min.toFixed(3),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.extrema.youngsModulus.min-G.extrema.youngsModulus.min)},children:[l(x.extrema.youngsModulus.min-G.extrema.youngsModulus.min),Math.abs(x.extrema.youngsModulus.min-G.extrema.youngsModulus.min).toFixed(3)]})]}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.extrema.youngsModulus.max.toFixed(3)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.extrema.youngsModulus.max.toFixed(3),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.extrema.youngsModulus.max-G.extrema.youngsModulus.max)},children:[l(x.extrema.youngsModulus.max-G.extrema.youngsModulus.max),Math.abs(x.extrema.youngsModulus.max-G.extrema.youngsModulus.max).toFixed(3)]})]}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.extrema.linearCompressibility.min.toFixed(3)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.extrema.linearCompressibility.min.toFixed(3),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.extrema.linearCompressibility.min-G.extrema.linearCompressibility.min)},children:[l(x.extrema.linearCompressibility.min-G.extrema.linearCompressibility.min),Math.abs(x.extrema.linearCompressibility.min-G.extrema.linearCompressibility.min).toFixed(3)]})]}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.extrema.linearCompressibility.max.toFixed(3)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.extrema.linearCompressibility.max.toFixed(3),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.extrema.linearCompressibility.max-G.extrema.linearCompressibility.max)},children:[l(x.extrema.linearCompressibility.max-G.extrema.linearCompressibility.max),Math.abs(x.extrema.linearCompressibility.max-G.extrema.linearCompressibility.max).toFixed(3)]})]}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.extrema.shearModulus.min.toFixed(3)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.extrema.shearModulus.min.toFixed(3),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.extrema.shearModulus.min-G.extrema.shearModulus.min)},children:[l(x.extrema.shearModulus.min-G.extrema.shearModulus.min),Math.abs(x.extrema.shearModulus.min-G.extrema.shearModulus.min).toFixed(3)]})]}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.extrema.shearModulus.max.toFixed(3)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.extrema.shearModulus.max.toFixed(3),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.extrema.shearModulus.max-G.extrema.shearModulus.max)},children:[l(x.extrema.shearModulus.max-G.extrema.shearModulus.max),Math.abs(x.extrema.shearModulus.max-G.extrema.shearModulus.max).toFixed(3)]})]}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.extrema.poissonRatio.min.toFixed(5)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.extrema.poissonRatio.min.toFixed(5),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.extrema.poissonRatio.min-G.extrema.poissonRatio.min)},children:[l(x.extrema.poissonRatio.min-G.extrema.poissonRatio.min),Math.abs(x.extrema.poissonRatio.min-G.extrema.poissonRatio.min).toFixed(5)]})]}),(0,p.jsxs)("td",{children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.extrema.poissonRatio.max.toFixed(5)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.extrema.poissonRatio.max.toFixed(5),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.extrema.poissonRatio.max-G.extrema.poissonRatio.max)},children:[l(x.extrema.poissonRatio.max-G.extrema.poissonRatio.max),Math.abs(x.extrema.poissonRatio.max-G.extrema.poissonRatio.max).toFixed(5)]})]})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"Anisotropy"}),(0,p.jsxs)("td",{colSpan:"2",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.extrema.youngsModulus.anisotropy.toFixed(2)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.extrema.youngsModulus.anisotropy.toFixed(2),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.extrema.youngsModulus.anisotropy-G.extrema.youngsModulus.anisotropy)},children:[l(x.extrema.youngsModulus.anisotropy-G.extrema.youngsModulus.anisotropy),Math.abs(x.extrema.youngsModulus.anisotropy-G.extrema.youngsModulus.anisotropy).toFixed(2)]})]}),(0,p.jsxs)("td",{colSpan:"2",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.extrema.linearCompressibility.anisotropy.toFixed(4)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.extrema.linearCompressibility.anisotropy.toFixed(4),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.extrema.linearCompressibility.anisotropy-G.extrema.linearCompressibility.anisotropy)},children:[l(x.extrema.linearCompressibility.anisotropy-G.extrema.linearCompressibility.anisotropy),Math.abs(x.extrema.linearCompressibility.anisotropy-G.extrema.linearCompressibility.anisotropy).toFixed(4)]})]}),(0,p.jsxs)("td",{colSpan:"2",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:x.extrema.shearModulus.anisotropy.toFixed(2)}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",G.extrema.shearModulus.anisotropy.toFixed(2),")"]})]}),(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.extrema.shearModulus.anisotropy-G.extrema.shearModulus.anisotropy)},children:[l(x.extrema.shearModulus.anisotropy-G.extrema.shearModulus.anisotropy),Math.abs(x.extrema.shearModulus.anisotropy-G.extrema.shearModulus.anisotropy).toFixed(2)]})]}),(0,p.jsxs)("td",{colSpan:"2",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("span",{className:i.testTensorText,children:isFinite(x.extrema.poissonRatio.anisotropy)?x.extrema.poissonRatio.anisotropy.toFixed(2):"\u221e"}),(0,p.jsxs)("span",{className:i.referenceTensorText,children:["(",isFinite(G.extrema.poissonRatio.anisotropy)?G.extrema.poissonRatio.anisotropy.toFixed(2):"\u221e",")"]})]}),isFinite(x.extrema.poissonRatio.anisotropy)&&isFinite(G.extrema.poissonRatio.anisotropy)&&(0,p.jsxs)("div",{style:{fontSize:"0.8em",color:n(x.extrema.poissonRatio.anisotropy-G.extrema.poissonRatio.anisotropy)},children:[l(x.extrema.poissonRatio.anisotropy-G.extrema.poissonRatio.anisotropy),Math.abs(x.extrema.poissonRatio.anisotropy-G.extrema.poissonRatio.anisotropy).toFixed(2)]})]})]})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"Value"}),(0,p.jsx)("td",{children:x.extrema.youngsModulus.min.toFixed(3)}),(0,p.jsx)("td",{children:x.extrema.youngsModulus.max.toFixed(3)}),(0,p.jsx)("td",{children:x.extrema.linearCompressibility.min.toFixed(3)}),(0,p.jsx)("td",{children:x.extrema.linearCompressibility.max.toFixed(3)}),(0,p.jsx)("td",{children:x.extrema.shearModulus.min.toFixed(3)}),(0,p.jsx)("td",{children:x.extrema.shearModulus.max.toFixed(3)}),(0,p.jsx)("td",{children:x.extrema.poissonRatio.min.toFixed(5)}),(0,p.jsx)("td",{children:x.extrema.poissonRatio.max.toFixed(5)})]}),(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:"Anisotropy"}),(0,p.jsx)("td",{colSpan:"2",children:x.extrema.youngsModulus.anisotropy.toFixed(2)}),(0,p.jsx)("td",{colSpan:"2",children:x.extrema.linearCompressibility.anisotropy.toFixed(4)}),(0,p.jsx)("td",{colSpan:"2",children:x.extrema.shearModulus.anisotropy.toFixed(2)}),(0,p.jsx)("td",{colSpan:"2",children:isFinite(x.extrema.poissonRatio.anisotropy)?x.extrema.poissonRatio.anisotropy.toFixed(2):"\u221e"})]})]})})]})]})]}),(0,p.jsxs)("div",{className:i.chartsSection,children:[(0,p.jsxs)("div",{className:i.chartControls,children:[(0,p.jsxs)("select",{value:M,onChange:e=>b(e.target.value),className:i.propertySelect,children:[(0,p.jsx)("option",{value:"youngs",children:"Young's Modulus"}),(0,p.jsx)("option",{value:"linear_compressibility",children:"Linear Compressibility"}),(0,p.jsx)("option",{value:"shear",children:"Shear Modulus"}),(0,p.jsx)("option",{value:"poisson",children:"Poisson's Ratio"}),(0,p.jsx)("option",{value:"matrix",children:"Tensor Matrices"})]}),(0,p.jsxs)("label",{className:i.checkboxLabel,children:[(0,p.jsx)("input",{type:"checkbox",checked:D,onChange:e=>k(e.target.checked),className:i.checkbox}),"Show 3D View"]}),D&&(0,p.jsxs)("div",{className:i.radioGroup,children:[(0,p.jsxs)("label",{className:i.radioLabel,children:[(0,p.jsx)("input",{type:"radio",name:"3dMode",checked:R,onChange:()=>$(!0),className:i.radio}),"Scatter"]}),(0,p.jsxs)("label",{className:i.radioLabel,children:[(0,p.jsx)("input",{type:"radio",name:"3dMode",checked:!R,onChange:()=>$(!1),className:i.radio}),"Surface"]})]}),P&&A&&Object.keys(A).length>0&&(0,p.jsxs)("div",{className:i.radioGroup,children:[(0,p.jsxs)("label",{className:i.radioLabel,children:[(0,p.jsx)("input",{type:"radio",name:"comparisonView",checked:!Q,onChange:()=>J(!1),className:i.radio}),"Overlay"]}),(0,p.jsxs)("label",{className:i.radioLabel,children:[(0,p.jsx)("input",{type:"radio",name:"comparisonView",checked:Q,onChange:()=>J(!0),className:i.radio}),"Difference"]})]})]}),"matrix"===M?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:i.sectionTitle,children:"Stiffness & Compliance Matrices"}),(0,p.jsx)("div",{className:i.surfaceChartContainer,children:x&&(0,p.jsx)(v,{stiffnessMatrix:x.stiffnessMatrix,complianceMatrix:x.complianceMatrix,referenceStiffness:P&&G?G.stiffnessMatrix:void 0,referenceCompliance:P&&G?G.complianceMatrix:void 0,comparisonMode:P,showDifference:Q,testTensorName:Ce(),referenceTensorName:Se()})})]}):D&&"matrix"!==M?(0,p.jsx)(p.Fragment,{children:x.isPositiveDefinite?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:i.sectionTitle,children:"3D Property Surface"}),(0,p.jsx)("div",{className:i.surfaceChartContainer,children:F&&(0,p.jsx)(g,{data:F,property:M,useScatter:R,referenceData:P?H:void 0,comparisonMode:P,showDifference:Q,testTensorName:Ce(),referenceTensorName:Se()})})]}):(0,p.jsx)("div",{style:{padding:"40px 20px",textAlign:"center",color:"var(--ifm-color-emphasis-600)",fontStyle:"italic"},children:"3D visualization disabled: Tensor is not positive definite"})}):"matrix"!==M?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:i.sectionTitle,children:"Property Surface Plots"}),(0,p.jsx)("div",{className:i.polarChartsGrid,children:["xy","xz","yz"].map((e=>(0,p.jsxs)("div",{className:i.chartContainer,children:[(0,p.jsxs)("div",{className:i.chartLabel,children:[e.toUpperCase()," Plane"]}),T[e]&&(0,p.jsx)(y,{data:T[e],property:M,plane:e,referenceData:P?A[e]:void 0,comparisonMode:P,testTensorName:Ce(),referenceTensorName:Se(),showDifference:Q})]},e)))}),(0,p.jsx)("div",{className:i.sectionTitle,children:"Angular Variation"}),(0,p.jsx)("div",{className:i.directionalChartsGrid,children:["xy","xz","yz"].map((e=>(0,p.jsxs)("div",{className:i.chartContainer,children:[(0,p.jsxs)("div",{className:i.chartLabel,children:[e.toUpperCase()," Plane"]}),T[e]&&(0,p.jsx)(f,{data:T[e],property:M,referenceData:P?A[e]:void 0,comparisonMode:P,showDifference:Q,testTensorName:Ce(),referenceTensorName:Se()})]},e)))})]}):null]})]})})]})})};function b(){return(0,p.jsx)(o.A,{title:"Elastic Tensor Calculator",description:"Interactive elastic tensor analysis tool for calculating elastic properties and visualizations",children:(0,p.jsxs)("main",{style:{minHeight:"calc(100vh - 60px)"},children:[(0,p.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"0.5rem 1rem",flexWrap:"wrap",gap:"0.5rem",margin:"1rem",marginBottom:"1.5rem"},children:[(0,p.jsx)("h1",{style:{marginBottom:0,fontSize:"1.5rem",flex:"1 1 auto"},children:"Elastic Tensor Calculator"}),(0,p.jsxs)("small",{style:{color:"var(--ifm-color-emphasis-600)",flex:"0 0 auto"},children:["Inspired by ",(0,p.jsx)("a",{href:"https://progs.coudert.name/elate",target:"_blank",rel:"noopener noreferrer",children:"ELATE"})]})]}),(0,p.jsx)(M,{})]})})}}}]);