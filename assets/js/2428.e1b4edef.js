"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[2428],{2428:(e,t,n)=>{n.r(t),n.d(t,{Canvas:()=>v,ReactThreeFiber:()=>r.t,_roots:()=>r._,act:()=>r.w,addAfterEffect:()=>r.k,addEffect:()=>r.j,addTail:()=>r.l,advance:()=>r.n,applyProps:()=>r.q,buildGraph:()=>r.x,context:()=>r.p,createEvents:()=>r.g,createPortal:()=>r.o,createRoot:()=>r.c,dispose:()=>r.v,events:()=>r.f,extend:()=>r.e,flushGlobalEffects:()=>r.h,getRootState:()=>r.s,invalidate:()=>r.m,reconciler:()=>r.r,unmountComponentAtNode:()=>r.d,useFrame:()=>r.C,useGraph:()=>r.D,useInstanceHandle:()=>r.y,useLoader:()=>r.F,useStore:()=>r.z,useThree:()=>r.A});var r=n(2111),o=n(6540),s=n(9437);function i(e,t){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout((()=>e(...r)),t)}}function c({debounce:e,scroll:t,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const s=n||("undefined"==typeof window?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[c,u]=(0,o.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),d=(0,o.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:c,orientationHandler:null}),f=e?"number"==typeof e?e:e.scroll:null,h=e?"number"==typeof e?e:e.resize:null,v=(0,o.useRef)(!1);(0,o.useEffect)((()=>(v.current=!0,()=>{v.current=!1})));const[w,m,p]=(0,o.useMemo)((()=>{const e=()=>{if(!d.current.element)return;const{left:e,top:t,width:n,height:o,bottom:s,right:i,x:c,y:l}=d.current.element.getBoundingClientRect(),f={left:e,top:t,width:n,height:o,bottom:s,right:i,x:c,y:l};d.current.element instanceof HTMLElement&&r&&(f.height=d.current.element.offsetHeight,f.width=d.current.element.offsetWidth),Object.freeze(f),v.current&&!a(d.current.lastBounds,f)&&u(d.current.lastBounds=f)};return[e,h?i(e,h):e,f?i(e,f):e]}),[u,r,f,h]);function g(){d.current.scrollContainers&&(d.current.scrollContainers.forEach((e=>e.removeEventListener("scroll",p,!0))),d.current.scrollContainers=null),d.current.resizeObserver&&(d.current.resizeObserver.disconnect(),d.current.resizeObserver=null),d.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",d.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",d.current.orientationHandler))}function b(){d.current.element&&(d.current.resizeObserver=new s(p),d.current.resizeObserver.observe(d.current.element),t&&d.current.scrollContainers&&d.current.scrollContainers.forEach((e=>e.addEventListener("scroll",p,{capture:!0,passive:!0}))),d.current.orientationHandler=()=>{p()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",d.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",d.current.orientationHandler))}return function(e,t){(0,o.useEffect)((()=>{if(t){const t=e;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}}),[e,t])}(p,!!t),function(e){(0,o.useEffect)((()=>{const t=e;return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[e])}(m),(0,o.useEffect)((()=>{g(),b()}),[t,p,m]),(0,o.useEffect)((()=>g),[]),[e=>{!e||e===d.current.element||(g(),d.current.element=e,d.current.scrollContainers=l(e),b())},c,w]}function l(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:o}=window.getComputedStyle(e);return[n,r,o].some((e=>"auto"===e||"scroll"===e))&&t.push(e),[...t,...l(e.parentElement)]}const u=["x","y","top","bottom","left","right","width","height"],a=(e,t)=>u.every((n=>e[n]===t[n]));var d=n(9318),f=n(4848);n(772),n(4845),n(9982);function h({ref:e,children:t,fallback:n,resize:i,style:l,gl:u,events:a=r.f,eventSource:d,eventPrefix:h,shadows:v,linear:w,flat:m,legacy:p,orthographic:g,frameloop:b,dpr:E,performance:y,raycaster:z,camera:x,scene:C,onPointerMissed:L,onCreated:j,...H}){o.useMemo((()=>(0,r.e)(s)),[]);const R=(0,r.u)(),[S,O]=c({scroll:!0,debounce:{scroll:50,resize:0},...i}),k=o.useRef(null),T=o.useRef(null);o.useImperativeHandle(e,(()=>k.current));const B=(0,r.a)(L),[M,P]=o.useState(!1),[A,F]=o.useState(!1);if(M)throw M;if(A)throw A;const G=o.useRef(null);(0,r.b)((()=>{const e=k.current;if(O.width>0&&O.height>0&&e){async function n(){await G.current.configure({gl:u,scene:C,events:a,shadows:v,linear:w,flat:m,legacy:p,orthographic:g,frameloop:b,dpr:E,performance:y,raycaster:z,camera:x,size:O,onPointerMissed:(...e)=>null==B.current?void 0:B.current(...e),onCreated:e=>{null==e.events.connect||e.events.connect(d?(0,r.i)(d)?d.current:d:T.current),h&&e.setEvents({compute:(e,t)=>{const n=e[h+"X"],r=e[h+"Y"];t.pointer.set(n/t.size.width*2-1,-r/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==j||j(e)}}),G.current.render((0,f.jsx)(R,{children:(0,f.jsx)(r.E,{set:F,children:(0,f.jsx)(o.Suspense,{fallback:(0,f.jsx)(r.B,{set:P}),children:null!=t?t:null})})}))}G.current||(G.current=(0,r.c)(e)),n()}})),o.useEffect((()=>{const e=k.current;if(e)return()=>(0,r.d)(e)}),[]);const I=d?"none":"auto";return(0,f.jsx)("div",{ref:T,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:I,...l},...H,children:(0,f.jsx)("div",{ref:S,style:{width:"100%",height:"100%"},children:(0,f.jsx)("canvas",{ref:k,style:{display:"block"},children:n})})})}function v(e){return(0,f.jsx)(d.Af,{children:(0,f.jsx)(h,{...e})})}}}]);